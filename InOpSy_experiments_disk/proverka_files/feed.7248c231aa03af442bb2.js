(()=>{"use strict";var __webpack_modules__={96715:(e,t,o)=>{o.d(t,{Icon16Verified:()=>s});var s=(0,o(28178).makeIcon)("Icon16Verified","verified_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="verified_16"><path fill="currentColor" d="M4.5 9.586 2.957 8.043a1 1 0 0 0-1.414 1.414l2.25 2.25a1 1 0 0 0 1.414 0l5.25-5.25a1 1 0 0 0-1.414-1.414L4.5 9.586Z" /></symbol>',16,16,!1,void 0)},988865:(e,t,o)=>{o.d(t,{Icon56HideOutline:()=>s});var s=(0,o(28178).makeIcon)("Icon56HideOutline","hide_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="hide_outline_56"><g fill="none" fill-rule="nonzero"><path d="M0 0h56v56H0z" /><path fill="currentColor" d="M12.44 10.44a1.5 1.5 0 0 1 2.12 0l31 31a1.5 1.5 0 0 1-2.12 2.12l-2.515-2.513C37.03 43.573 32.652 45 28 45c-6.256 0-12.004-2.583-16.639-6.832C7.644 34.761 5 30.484 5 28c0-3.35 4.362-9.256 9.932-12.947l-2.493-2.492a1.5 1.5 0 0 1 0-2.122Zm4.662 6.784C12.052 20.387 8 25.732 8 28c0 1.454 2.232 5.063 5.389 7.957C17.505 39.73 22.556 42 28 42c3.828 0 7.46-1.118 10.75-3.129l-4.446-4.446a9 9 0 0 1-12.728-12.728ZM28 11c6.256 0 12.004 2.583 16.639 6.832C48.356 21.239 51 25.516 51 28c0 1.99-1.714 5.171-4.331 8.11a1.5 1.5 0 0 1-2.24-1.996C46.6 31.676 48 29.078 48 28c0-1.454-2.232-5.063-5.389-7.957C38.495 16.27 33.444 14 28 14c-1.443 0-2.86.159-4.248.468a1.5 1.5 0 1 1-.652-2.928c1.6-.356 3.236-.54 4.9-.54Zm-4.302 12.819a6 6 0 0 0 8.484 8.485Zm5.93-3.295a1.5 1.5 0 0 1 1.975-.774 9.028 9.028 0 0 1 4.65 4.651 1.5 1.5 0 0 1-2.75 1.2 6.028 6.028 0 0 0-3.102-3.102 1.5 1.5 0 0 1-.774-1.975Z" /></g></symbol>',56,56,!1,void 0)},378448:(e,t,o)=>{o.d(t,{default:()=>s});const s={container:"Popup-module__container--cF098",inner:"Popup-module__inner--kGW4v",innerIn:"Popup-module__innerIn--BfDNl"}},387750:(e,t,o)=>{o.d(t,{default:()=>s});const s={iframeContainer:"CheckValidationPhone-module__iframeContainer--Anx8i"}},246164:(e,t,o)=>{o.d(t,{default:()=>s});const s={content:"PageBlock-module__content--Kz7Ae"}},196709:(e,t,o)=>{o.d(t,{sendCarouselClickEvent:()=>r,sendFeedOpenAudioStats:()=>a});var s=o(470055),i=o(957973),n=o(839470);function r(e,t,o){if(!(0,n.partConfigEnabled)("feed_content_events_next_prev_click_web")||!t||!o)return;let r=null;1===e?r=i.EventItemType.CLICK_NEXT:-1===e?r=i.EventItemType.CLICK_PREVIOUS:0===e&&(r=i.EventItemType.CLICK_PRETTY_CARD),r&&s.feedInteractionItemStatCollector.logEvent({track_code:t,ref:o,item:i.FeedInteractionItemType.WALL_ITEM},r)}function a(e,t){e&&t&&s.feedInteractionItemStatCollector.logEvent({track_code:e,ref:t,item:i.FeedInteractionItemType.WALL_ITEM},i.EventItemType.OPEN_AUDIO)}},501461:(e,t,o)=>{o.d(t,{KEY:()=>s,isMainClick:()=>i,preventLinkOpening:()=>n});const s={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16,META_LEFT:91,META_RIGHT:93};function i(e){return!("click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type||0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)}const n=e=>new Promise((t=>{i(e instanceof MouseEvent?e:e.nativeEvent)&&(e.stopPropagation(),e.preventDefault(),t())}))},103912:(e,t,o)=>{o.d(t,{getPerformanceStatsEventMomentData:()=>i});var s=o(121677);const i=()=>{var e,t;const o=null==(e=(t=performance).now)?void 0:e.call(t);if(void 0===o)return;return{eventTime:o,network:s.default.getConnectionEffectiveType()}}},593568:(e,t,o)=>{o.d(t,{getPerformanceStatsTools:()=>a});var s=o(11010),i=o(434788),n=o(103912),r=o(745163);function a(){return l.apply(this,arguments)}function l(){return(l=(0,s._)((function*({module:e=r.navigationStat.getModule(),page:t,entity:s,cooldownRecord:a}={}){if(!window.performance||"visible"!==window.document.visibilityState)return;const l=(0,n.getPerformanceStatsEventMomentData)();return l?o.e(59240).then(o.bind(o,642440)).then((({configurePerformanceStatsUtils:o,navigationStat:n,PerformanceStatsEventName:r,AuxiliaryPerformanceStatsEventName:c,LeavingFeedEventName:d})=>{if(!n.getModule)return;const{storePerformanceStats:u,sendStoredPerformanceStats:_,readMetricValue:p}=o((0,i._)({},l,{module:e,page:t,entity:s,cooldownRecord:a}));return p(r.load_performance_stats_chunk)||(u(r.load_performance_stats_chunk,!0),_()),{storePerformanceStats:u,sendStoredPerformanceStats:_,readMetricValue:p,PerformanceStatsEventName:r,AuxiliaryPerformanceStatsEventName:c,LeavingFeedEventName:d}})):void 0}))).apply(this,arguments)}},960429:(e,t,o)=>{o.d(t,{createDebugConsole:()=>i,createStorageKey:()=>n});const s=(0,o(367431).makeSharedState)("debug-console-flags",(()=>({})),{version:0}),i=e=>new Proxy(console,{get(t,o,i){switch(o){case"debug":case"dir":case"error":case"info":case"log":case"table":case"trace":case"warn":{var n,r;const i=t[o];var a;const l=null!=(a=null==(r=window.nav)||null==(n=r.objLoc)?void 0:n[e])?a:s()[e];return l!==s()[e]&&(s()[e]=l),(...e)=>{l&&i.call(t,...e)}}default:return Reflect.get(t,o,i)}}}),n=({module:e,page:t,entity:o})=>[e,t,o].filter(Boolean).join("-")},301951:(e,t,o)=>{o.d(t,{initReactApp:()=>i});var s=o(973935);function i(e,t,o){var i;e&&(s.render(t,e),o||null==(i=window.cur.destroy)||i.push((()=>{e&&s.unmountComponentAtNode(e)})))}},506948:(e,t,o)=>{o.d(t,{CheckValidationPhone:()=>f});var s=o(785893),i=o(667294),n=o(988882),r=o(869048),a=o(294463),l=o(86427),c=o(382893),d=o(829082),u=o(502274),_=o(234186),p=o(387750);const f=({app_id:e,preventCheck:t=(()=>!1)})=>{const[o,f]=(0,i.useState)(null),[h,g]=(0,i.useState)(!1),[m,w]=(0,i.useState)(!1),[v,k]=(0,i.useState)(!0),[b,y]=(0,i.useState)(null),C=(0,i.useRef)(null),S=()=>{(0,d.validatePhoneCheck)().then((({status:e,sid:o})=>{if(e===a.ValidationStatus.NEED_VALIDATE||e===a.ValidationStatus.LAST_CHANCE_VALIDATE){const s=e!==a.ValidationStatus.LAST_CHANCE_VALIDATE,i={name:"auth_validation_phone",params:{status:s?"1":"0"}};o&&(i.params.sid=o),f({url:window.location.origin,scheme:(0,_.getCurrentScheme)(),action:i}),k(s),t()||w(!0)}})).catch((()=>{}))},P=(0,i.useCallback)((()=>{b&&b.sendMessage({handler:n.UserEvents.VALIDATION_PHONE_CLOSE,params:{},type:"vk-sak-sdk"})}),[b]);return(0,i.useEffect)((()=>{t()||S()}),[]),(0,i.useEffect)((()=>{const e=()=>{document.hidden||m||h||t()||S()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}),[m,t,h]),(0,i.useEffect)((()=>{const t=C.current;if(m&&t&&o){(0,u.setConfig)({appId:e});const s=new n.User({container:t});s.on(n.UserEvents.VALIDATION_PHONE_CLOSE,(e=>{e.status===l.ValidationProceedStatus.IS_VALIDATED&&g(!0),w(!1),e.redirectUrl&&""!==e.redirectUrl&&(window.location.href=e.redirectUrl)})),s.on(n.UserEvents.CONTENT_IN_HEIGHT,(e=>{t.style.height=e.height+"px"})),s.open(o).then((()=>y(s))).catch((()=>{}))}}),[m,o]),(0,s.jsx)(r.AppRootProvider,{children:(0,s.jsx)(c.Popup,{isOpen:m,canClose:v,handleClose:P,children:(0,s.jsx)("div",{ref:C,className:p.default.iframeContainer})})})}},514166:(e,t,o)=>{o.d(t,{CheckValidationPhoneFallback:()=>f});var s=o(785893),i=o(667294),n=o(988882),r=o(869048),a=o(294463),l=o(86427),c=o(382893),d=o(829082),u=o(502274),_=o(234186),p=o(387750);const f=({app_id:e,isValidModule:t=!1,onInit:o})=>{const[f,h]=(0,i.useState)(null),[g,m]=(0,i.useState)(t),[w,v]=(0,i.useState)(!1),[k,b]=(0,i.useState)(!1),[y,C]=(0,i.useState)(!0),[S,P]=(0,i.useState)(null),L=(0,i.useRef)(null),E=()=>{(0,d.validatePhoneCheck)().then((({status:e,sid:t})=>{if(e===a.ValidationStatus.NEED_VALIDATE||e===a.ValidationStatus.LAST_CHANCE_VALIDATE){const o=e!==a.ValidationStatus.LAST_CHANCE_VALIDATE,s={name:"auth_validation_phone",params:{status:o?"1":"0"}};t&&(s.params.sid=t),h({url:window.location.origin,scheme:(0,_.getCurrentScheme)(),action:s}),C(o),b(!0)}})).catch((()=>{}))},T=(0,i.useCallback)((()=>{S&&S.sendMessage({handler:n.UserEvents.VALIDATION_PHONE_CLOSE,params:{},type:"vk-sak-sdk"})}),[S]);return(0,i.useEffect)((()=>{o&&o(m)}),[o]),(0,i.useEffect)((()=>{g&&E()}),[g]),(0,i.useEffect)((()=>{const e=()=>{document.hidden||k||w||!g||E()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}),[k,g,w]),(0,i.useEffect)((()=>{const t=L.current;if(k&&t&&f){(0,u.setConfig)({appId:e});const o=new n.User({container:t});o.on(n.UserEvents.VALIDATION_PHONE_CLOSE,(e=>{e.status===l.ValidationProceedStatus.IS_VALIDATED&&v(!0),b(!1),e.redirectUrl&&""!==e.redirectUrl&&(window.location.href=e.redirectUrl)})),o.on(n.UserEvents.CONTENT_IN_HEIGHT,(e=>{t.style.height=e.height+"px"})),o.preload(f).then((()=>P(o))).catch((()=>{}))}}),[k,f]),(0,s.jsx)(r.AppRootProvider,{children:(0,s.jsx)(c.Popup,{isOpen:k,canClose:y,handleClose:T,children:(0,s.jsx)("div",{ref:L,className:p.default.iframeContainer})})})}},382893:(e,t,o)=>{o.d(t,{Popup:()=>a});var s=o(785893),i=o(667294),n=o(86894),r=o(378448);const a=({children:e,handleClose:t,isOpen:o=!1,canClose:a=!0})=>((0,n.useScrollLock)(o),(0,i.useEffect)((()=>{const e=e=>"Escape"===e.key?t():null;if(o)return a&&document.body.addEventListener("keydown",e),()=>{document.body.removeEventListener("keydown",e)}}),[t,a,o]),o?(0,s.jsx)(n.PopoutWrapper,{className:r.default.container,onClick:()=>a&&t(),children:(0,s.jsxs)("div",{className:r.default.inner,children:[(0,s.jsx)("div",{className:r.default.innerIn,children:e}),a&&(0,s.jsx)(n.ModalDismissButton,{onClick:t})]})}):null)},86427:(e,t,o)=>{var s;o.d(t,{ValidationProceedStatus:()=>s}),function(e){e[e.IS_VALIDATED=1]="IS_VALIDATED"}(s||(s={}))},294463:(e,t,o)=>{var s;o.d(t,{ValidationStatus:()=>s}),function(e){e[e.NEED_VALIDATE=3]="NEED_VALIDATE",e[e.LAST_CHANCE_VALIDATE=5]="LAST_CHANCE_VALIDATE"}(s||(s={}))},829082:(e,t,o)=>{o.d(t,{validatePhoneCheck:()=>n});var s=o(434788),i=o(599809);const n=e=>{const{apiDomain:t}=window.vk.apiConfigDomains;return(0,i.api)("auth.validatePhoneCheck",{is_auth:0,mode:1},(0,s._)({domain:t},e))}},234186:(e,t,o)=>{o.d(t,{getCurrentScheme:()=>n});var s=o(68003),i=o(910907);const n=()=>{const e=s.colorScheme.getScheme();return(0,i.normalizeScheme)(e)}},910907:(e,t,o)=>{o.d(t,{normalizeScheme:()=>i});var s=o(68003);const i=e=>{switch(e){case s.ColorSchemeName.WebDark:case s.ColorSchemeName.Dark:return s.ColorSchemeName.Dark;default:return s.ColorSchemeName.Light}}},502274:(e,t,o)=>{o.d(t,{setConfig:()=>r});var s=o(434788),i=o(988882),n=o(872629);const r=(e={})=>{const{loginDomain:t,connectDomain:o}=window.vk.apiConfigDomains;i.Config.init((0,s._)({appId:n.AuthAppId.VK,loginDomain:t,connectDomain:o},e))}},286118:(e,t,o)=>{o.d(t,{storyPublisherInitAsync:()=>i});var s=o(584356);function i(e){(function(e){const t=!0,o=(0,s.showBoxLoader)();return e.then((e=>t&&(0,s.isBoxLoadingCancelled)(o)?n:((0,s.isBoxLoadingCancelled)(o)||(0,s.hideBoxLoader)(),e)),(e=>((0,s.hideBoxLoader)(),Promise.reject(e))))})(window.stManager.add([window.jsc("web/story_publisher.js")])).then((t=>{(function(e){return e===n})(t)||window.StoryPublisher.init(...e)}))}const n="showBoxLoaderForPromise cancelled"},975577:(e,t,o)=>{o.d(t,{OwnersListPageBlock:()=>h});var s=o(434788),i=o(820224),n=o(785893),r=o(86894),a=o(96715),l=o(399639),c=o(963937),d=o(54929),u=o(877701),_=o(545637),p=o(832550),f=o(885693);const h=e=>{var{title:t,href:o,items:h,button:g}=e,m=(0,i._)(e,["title","href","items","button"]);return h.length?(0,n.jsxs)(f.PageBlock,(0,s._)({},m,{header:(0,n.jsx)(l.Header,{href:o,children:t}),separator:"hide",children:[(0,n.jsx)(r.Spacing,{size:4}),(0,n.jsx)(c.SpacedList,{spacing:2,children:h.map((e=>(0,n.jsx)(d.SimpleCell,{href:e.href,before:(0,n.jsx)(u.RichAvatar,{size:48,src:e.photo,isNFT:e.is_nft,imgAlt:e.title}),badgeAfterTitle:e.is_verified&&(0,n.jsx)(a.Icon16Verified,{}),subtitle:e.subtitle,children:e.title},e.id)))}),g?(0,n.jsx)(_.Div,{children:(0,n.jsx)(p.Button,{mode:"secondary",size:"s",stretched:!0,href:o,children:g})}):(0,n.jsx)(r.Spacing,{size:8})]})):null}},885693:(e,t,o)=>{o.d(t,{PageBlock:()=>l});var s=o(434788),i=o(820224),n=o(785893),r=o(513724),a=o(246164);const l=e=>{var{children:t}=e,o=(0,i._)(e,["children"]);return(0,n.jsx)(r.Group,(0,s._)({},o,{padding:"m",mode:"card",children:(0,n.jsx)("div",{className:a.default.content,children:t})}))}},398986:(e,t,o)=>{var s,i,n,r=o(630260);(null==(i=window.vk)||null==(s=i.pe)?void 0:s.static_manager_dynamic_imports)&&(null==(n=window.vk)?void 0:n.stDomain)&&(o.p=window.vk.stDomain+"/dist/"),window.feed=r.Feed,window.Feed=r.Feed;try{window.stManager.done(window.jsc("web/feed.js"))}catch(e){}},165392:(e,t,o)=>{o.d(t,{hideRightBlock:()=>s.hideRightBlock,requestRightBlock:()=>s.requestRightBlock});var s=o(587367)},587367:(e,t,o)=>{o.d(t,{hideRightBlock:()=>k,requestRightBlock:()=>w});var s,i,n=o(11010),r=o(434788),a=o(719645),l=o(795558),c=o(970978),d=o(561826),u=o(960429),_=o(363444),p=o(934913),f=o(813100);!function(e){e.feedRightBlockDebugLogs="__feed_page_load_debug_logs"}(s||(s={})),function(e){e.fromDocumentRequest="from_document_request"}(i||(i={}));const h=(0,u.createDebugConsole)("__feed_page_load_debug_logs"),g=e=>{h.error(e),(0,c.logError)(new Error(e))};function m(e,t,o,s){e.insertAdjacentHTML("beforeend",t),o&&(0,a.evalWithLogging)(o),function(e){e.no_left_ads&&(window.cur.no_left_ads=!0);e.is_games_in_right_block&&(window.cur.isGamesInRightBlock=!0)}(s),h.info("FeedPageRightBlock: right block has been shown.")}function w(e){return v.apply(this,arguments)}function v(){return(v=(0,n._)((function*({isDocumentRequest:e,navOptions:t}){try{var o,s,i;h.info("FeedPageRightBlock: right block request started");const n=(null==(o=t)?void 0:o.url)?window.nav.fromStr(null==(s=t)?void 0:s.url):window.nav.objLoc,a=yield _.ajax.promisifiedPost(window.nav.toStr((0,r._)({},n,{0:"al_feed_right_block.php"})),(0,r._)({},null==(i=t)?void 0:i.params,{from_document_request:e}),{local:e,ignoreDefaultErrorLogger:!0});if(e&&!(0,f.isPageTheSame)())return void h.error("FeedPageRightBlock: landing on page with different page id (document request)");if(!Array.isArray(a))return void g("FeedPageRightBlock: no array returned in response to request");const[l]=a;if(!(0,p.isLikePlainObject)(l,{html:"",js:"",no_left_ads:!1,is_games_in_right_block:!1}))return void g(`FeedPageRightBlock: invalid response: ${(0,d.stringifyUnknown)(l)}`);const{html:c,js:u,no_left_ads:w,is_games_in_right_block:v}=l;return h.info("FeedPageRightBlock: right block request has been completed. Data: ",l),c?e=>m(e,c,u,{no_left_ads:w,is_games_in_right_block:v}):void h.info("FeedPageRightBlock: no html (no right block)")}catch(e){g(`FeedPageRightBlock: error loading block. Error: ${(0,d.stringifyUnknown)(e)}`)}}))).apply(this,arguments)}function k(e,t,o){let s=(0,l.domCA)(e,".page_block");return(0,l.re)(s),window.cur.isGamesInRightBlock=!1,window.ajax.post("al_feed.php",{act:"a_hide_right_block",block_type:t,app_id:e.dataset.app_id||0,hash:o}),!1}},131735:(e,t,o)=>{o.d(t,{PhotoCarouselBlock:()=>r});var s=o(115979),i=o(767722),n=o(428518);class r{initListeners(){this.post.addEventListener("click",this.onPostClick)}deInitListener(){this.post.removeEventListener("click",this.onPostClick)}createItems(e){var t;const o=Array.from(e.querySelectorAll(`.${n.PHOTO_CAROUSEL_ITEM_CLASS}`)),s={};return(null==(t=this.blockOptions)?void 0:t.sendAnalytic)&&(s.sendAnalytic=(e,t)=>{var o,s;(null==(o=this.blockOptions)?void 0:o.sendAnalytic)&&(null==(s=this.blockOptions)||s.sendAnalytic(e,this.post,t))}),o.map((e=>new i.PhotoCarouselBlockItem(e,s)))}getCarouselOptions(){var e;const t=null==(e=this.blockOptions)?void 0:e.sendAnalytic;return{onPrevClick:e=>{t&&t("click_previous",this.post,e)},onNextClick:e=>{t&&t("click_next",this.post,e)}}}constructor(e,t){var o;this.isDestroyed=!1,this.destroy=()=>{this.isDestroyed||(this.deInitListener(),this.carousel.destroy(),this.items.forEach((e=>e.destroy())),this.isDestroyed=!0)},this.onPostClick=e=>{var t;const o=e.target;(null==(t=this.blockOptions)?void 0:t.sendAnalytic)&&(o.classList.contains("post_img")||o.classList.contains("author")||o.classList.contains("mem_link")||o.classList.contains(n.PHOTO_CAROUSEL_AVATAR_CLASS)?this.blockOptions.sendAnalytic("open_user",this.post,e):o.classList.contains(n.PHOTO_ELEMENT_CLASS)||o.classList.contains(n.PHOTO_NO_SIZE_ELEMENT_CLASS)||o.classList.contains("page_post_thumb_wrap")?this.blockOptions.sendAnalytic("open_photo",this.post,e):o.classList.contains(n.PHOTO_CAROUSEL_HIDE_BTN_CLASS)&&this.blockOptions.sendAnalytic("hide",this.post,e))},this.post=e,this.blockOptions=t;const i=this.getCarouselOptions();this.items=this.createItems(e),this.carousel=new s.PhotoCarousel(e,this.items,i),this.initListeners(),null==(o=window.cur.destroy)||o.push(this.destroy)}}},767722:(e,t,o)=>{o.d(t,{PhotoCarouselBlockItem:()=>l});var s=o(509366),i=o(705758),n=o(827652),r=o(953908),a=o(95432);class l extends s.PhotoCarouselItem{destroy(){this.deInitListeners()}initListeners(){this.shareBtn&&this.shareBtn.addEventListener("click",this.onShareClick),this.commentsBtn&&this.commentsBtn.addEventListener("click",this.onCommentsClick),this.likeBtn&&this.likeBtn.addEventListener("click",this.onLikeClick),this.photo.addEventListener("click",this.onPhotoClick)}deInitListeners(){this.shareBtn&&this.shareBtn.removeEventListener("click",this.onShareClick),this.commentsBtn&&this.commentsBtn.removeEventListener("click",this.onCommentsClick),this.likeBtn&&this.likeBtn.removeEventListener("click",this.onLikeClick),this.photo.removeEventListener("click",this.onPhotoClick)}showPhoto(e,t=this.photoViewOptions){(0,a.showPhoto)(this.photoRawId,this.photoContext,t,e),(0,r.cancelEvent)(e)}constructor(e,t){super(e),this.onPhotoClick=e=>{var t;e.ctrlKey||e.metaKey||(this.showPhoto(e),(null==(t=this.options)?void 0:t.sendAnalytic)&&this.options.sendAnalytic("open_photo"))},this.onShareClick=e=>{var t;if(!this.objectRawId)return;const o=null==(t=this.options)?void 0:t.sendAnalytic;o&&(o("click_to_sharing",e),window.cur.sbOnShare=()=>{o("repost",e)}),n.Likes.share(this.objectRawId,this.shareOptions),(0,r.cancelEvent)(e)},this.onCommentsClick=e=>{var t;const o=this.photoViewOptions||{};o.commentFocusInit=!0,this.showPhoto(e,o);const s=null==(t=this.options)?void 0:t.sendAnalytic;s&&s("click_to_comment",e)},this.onLikeClick=e=>{var t;if(!(this.likeBtn&&this.objectRawId&&this.likeHash))return;const o=this.isLiked()?"unlike":"like",s=null==(t=this.options)?void 0:t.sendAnalytic;s&&s(o,e),n.Likes.toggle(this.likeBtn,e,this.objectRawId,this.likeHash)},this.isLiked=()=>this.likeBtn&&this.likeBtn.classList.contains("active"),this.options=t,this.shareBtn=e.querySelector("._share"),this.commentsBtn=e.querySelector("._comment"),this.likeBtn=e.querySelector("._like"),this.objectRawId=e.dataset.objectRawId,this.likeHash=e.dataset.likeHash;const o=e.dataset.shareOptions||"";this.shareOptions=o&&(0,i.parseJSON)(o),this.initListeners()}}},135617:(e,t,o)=>{o.d(t,{initPhotoBlockInPost:()=>a});var s=o(131735),i=o(428518),n=o(45203),r=o(970978);function a(e,t){const o=e.querySelector(`.${i.PHOTO_CAROUSEL_CLASS}`);if(o)try{if(o.classList.contains("PhotoCarousel--recognize"))return new n.PhotoRecognizeBlock(e);const i={sendAnalytic:t};return new s.PhotoCarouselBlock(e,i)}catch(e){console.error(e),(0,r.logError)(e)}}},9747:(e,t,o)=>{o.d(t,{initFeedRightBlocks:()=>d});var s=o(434788),i=o(785893),n=o(86894),r=o(659397),a=o(869048),l=o(975577),c=o(301951);const d=e=>{e=(0,r.decodeHTMLEntitiesDeep)(e);const t=document.querySelector("#feed_right_blocks_root");(0,c.initReactApp)(t,(0,i.jsxs)(a.AppRootProvider,{children:[(0,i.jsx)(n.Spacing,{size:15}),(0,i.jsx)(l.OwnersListPageBlock,(0,s._)({},e))]}))}},215460:(e,t,o)=>{var s;o.d(t,{BlockTypeIds:()=>s}),function(e){e.YoulaRecommendationsCarousel="block_youla-recommendations-carousel",e.AliExpressRecommendationsCarousel="block_aliexpress-recommendations-carousel",e.PhotoRecognize="tags_suggestions",e.RecommendedNarratives="recommended_narratives",e.BookmarkGame="bookmark_game",e.AchievementGame="achievement_game",e.VideosForYou="videos_for_you",e.VideoPostcard="video_postcard",e.UXPollBlock="uxpoll_block"}(s||(s={}))},688756:(e,t,o)=>{o.d(t,{LEAVING_FEED_STATS:()=>s});const s="leaving_feed_stats"},488957:(e,t,o)=>{o.d(t,{feedLoadingStats:()=>c});var s=o(11010),i=o(839470),n=o(593568),r=o(848751),a=o(688756);function l(){return(l=(0,s._)((function*(){const e=yield(0,n.getPerformanceStatsTools)({module:"feed",entity:a.LEAVING_FEED_STATS});if(!e)return;const{storePerformanceStats:t,sendStoredPerformanceStats:o,readMetricValue:s,LeavingFeedEventName:i}=e;window.setTimeout((()=>{Object.keys(i).some(s)||(t(i.stay_in_feed,!0),o(),window.nav.removeNavigationStartListener(r.onNavigationStart))}),12e4)}))).apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=(0,s._)((function*({collect_stats:e,is_skeleton_rendered:t}){if(!e||!(0,i.partConfigEnabled)("feed_web_performance_stats"))return;(0,i.partConfigEnabled)("web_navigation_listeners")&&function(){l.apply(this,arguments)}();const o=yield(0,n.getPerformanceStatsTools)({module:"feed"});if(!o)return;const{storePerformanceStats:s,sendStoredPerformanceStats:r,PerformanceStatsEventName:a,AuxiliaryPerformanceStatsEventName:c}=o;s(a.render_content),s({metricName:a.render_content_without_ttfb,basisMetricName:a.render_content,auxiliaryMetricName:c.TTFB}),t?(s(a.render_content_after_skeleton),s({metricName:a.render_content_after_skeleton_without_ttfb,basisMetricName:a.render_content_after_skeleton,auxiliaryMetricName:c.TTFB}),s({metricName:a.render_content_after_skeleton_without_skeleton,basisMetricName:a.render_content_after_skeleton,auxiliaryMetricName:a.render_skeleton})):(s(a.render),s({metricName:a.render_without_ttfb,basisMetricName:a.render,auxiliaryMetricName:c.TTFB})),r()})),d.apply(this,arguments)}},848751:(e,t,o)=>{o.d(t,{onNavigationStart:()=>d});var s=o(11010),i=o(981254),n=o(593568),r=o(93983),a=o(543020),l=o(688756),c=o(82161);function d(e,t){return u.apply(this,arguments)}function u(){return(u=(0,s._)((function*(e,t){const o=window.nav.objLoc[0]===i.FeedPath.feed&&t[0]!==window.nav.objLoc[0];try{if(o&&(0,c.isPageFirstOneOpened)()&&!["error","timeout"].includes((0,r.getFeedPageSkeletonStorage)().contentRequestState)){const e=yield(0,n.getPerformanceStatsTools)({module:"feed",entity:l.LEAVING_FEED_STATS});if(!e)return;const{storePerformanceStats:t,sendStoredPerformanceStats:o,LeavingFeedEventName:s,readMetricValue:i}=e;if(i(s.navigation_from_feed))return;t(s.navigation_from_feed),(0,r.getFeedPageSkeletonStorage)().hasSkeleton?t(s.navigation_from_feed_skeleton_on):t(s.navigation_from_feed_skeleton_off),["initial","loading"].includes((0,r.getFeedPageSkeletonStorage)().contentRequestState)?t(s.navigation_from_feed_before_page_load):t(s.navigation_from_feed_after_page_load),o(),window.nav.removeNavigationStartListener(d)}}catch(e){console.error("leaving feed navigation stats error"),(0,a.logUnknownError)(e)}}))).apply(this,arguments)}},941468:(e,t,o)=>{o.d(t,{feedLogFilteredRow:()=>n});var s=o(385376),i=o(290266);function n({filterReason:e,ref:t,row:o,rowsContainer:n,section:r}){var a,l;const c={contentId:null==(a=o.firstElementChild)?void 0:a.id,feedRowsCount:n.childElementCount,filterReason:e,ref:t,rowFlags:(0,i.formatStringValueBooleans)([Boolean(null==(l=o.firstElementChild)?void 0:l.id),Boolean(o.firstElementChild)]),section:r};(0,s.saveStatlogEvents)({name:"feed_pagination_item_filtered",value:c})}},175426:(e,t,o)=>{function s(e){const t=window.cur;t.feedScrollCheckIntervalID&&clearInterval(t.feedScrollCheckIntervalID);const o=setInterval((function(){"feed"===window.cur.module?e():s()}),500);function s(){clearInterval(o)}t.feedScrollCheckIntervalID=o,setTimeout(s,5e3)}o.d(t,{feedPaginationIntervalCheckInit:()=>s})},523408:(e,t,o)=>{o.d(t,{shouldFilterPaginatedRow:()=>l});const s=/^post(-?\d+_\d+)$/,i=e=>!!e.id&&s.test(e.id),n=e=>!!e.id&&e.id.startsWith("feedback_row"),r={shouldFilter:!1},a={shouldFilter:!0,filterReason:"empty"};function l({row:e}){const t=e.firstElementChild;return t?function(e){const t=i(e),o=n(e);if(!t&&!o)return r;const s=!!e.id&&null!==document.querySelector(`#${e.id}`);if(!s)return r;return{shouldFilter:!0,filterReason:c({isNotification:o,isPost:t})}}(t):a}function c(e){return e.isNotification?"duplicate_notification":e.isPost?"duplicate_post":"duplicate_unknown"}},864424:(e,t,o)=>{o.d(t,{attachPlayerEventHandler:()=>a,isFeedPostDurationStatsFixEnabled:()=>r,sendCarouselClickEventWeb:()=>l,shouldLinkEmitOpenGroupUserEvent:()=>c});var s=o(839470),i=o(809053),n=o(196709);function r(){return(0,s.partConfigEnabled)("feed_posts_duration_stats_fix")}function a({isAudioChanged:e,attachElement:t}){if(!(0,s.partConfigEnabled)("feed_content_events_open_audio")||!e||!t)return;const o=(0,i.getTrackCodeFromPost)(t),r=(0,i.resolveRefFromCur)();(0,n.sendFeedOpenAudioStats)(o,r)}function l(e,t,o){(0,s.partConfigEnabled)("feed_content_events_next_prev_click_web")&&(0,n.sendCarouselClickEvent)(e,t,o)}function c(e){var t;return"Post/ownerLinkClick"===(null==(t=e)?void 0:t.getAttribute("data-task-click"))}},42575:(e,t,o)=>{o.d(t,{initCheckValidationPhone:()=>_});var s=o(785893),i=o(973935),n=o(293579),r=o(321850),a=o(872629),l=o(584356),c=o(839470),d=o(506948),u=o(514166);const _=()=>{const e="CheckValidationPhone";(0,n.registerReactApplication)(e,(()=>{const t=(0,n.getReactRootEl)(e);if(t){const e=(0,c.partConfigEnabled)("vkc_cvp_non_intersection")?(0,s.jsx)(d.CheckValidationPhone,{app_id:a.AuthAppId.VK,preventCheck:()=>(0,l.curBox)()}):(0,s.jsx)(u.CheckValidationPhoneFallback,{app_id:a.AuthAppId.VK,isValidModule:!0});i.render(e,t),(0,r.pushNavDestroy)((()=>{i.unmountComponentAtNode(t)}))}}))}},290266:(e,t,o)=>{function s(e){return e.map((e=>e?"1":"0")).join("_")}o.d(t,{formatStringValueBooleans:()=>s})},813100:(e,t,o)=>{o.d(t,{isPageTheSame:()=>r});var s=o(839470),i=o(82161),n=o(934913);const r=(0,s.partConfigEnabled)("vk_local_return")?(0,i.vkLocal)((()=>!0)):(()=>{const e=(0,n.getField)(window,"PageID");return()=>e===(0,n.getField)(window,"PageID")})()},829234:(e,t,o)=>{o.d(t,{isAdWithLongImpression:()=>c,isAdWithLongImpressionOnly:()=>d,isAdWithShowOff:()=>u,isAutoplayAd:()=>l,isElemViewable:()=>p,postsGetRaws:()=>a});var s=o(280598),i=o(795558),n=o(82161),r=o(809053);const a=e=>{if(!(e instanceof HTMLElement))return{};let t=(0,n.indexOf)((0,i.domPN)(e).children,e),o=e.firstElementChild;if(!(o instanceof HTMLElement))return{};for(;o&&o.id.startsWith("moat");)o=(0,i.domNS)(o);if(!(o instanceof HTMLElement))return{};let s,a,l,c=/^post(-?\d+_\d+)$/,d={};if("ads_feed_placeholder"===o.id)return d;const u=window.cur;d={module:(0,r.resolveRef)(u.module,u.section,u.subsection),index:t},"feed"===u.module&&"search"===u.section&&(d.q=u.q);let _=o.getAttribute("data-ad-view");_&&(d["ad_"+_]=1);let p=o.getAttribute("post_view_hash");p&&(d.hash=p);let f=o.getAttribute("data-post-track-code");if(f&&!_&&(d.trackCode=f),"block_"===o.id.substr(0,6)){d[o.id]=1,d.block=o.id.substr(6);let e=(0,i.attr)(o,"data-contain");e&&e.split(",").forEach((function(e){const t=e.split(":");d[t[0]]=(0,n.intval)(t[1])||1}))}else if(a=o.id.match(c))d[a[1]]=1;else if(a=o.id.match(/^post(adsite.*)$/))d[a[1]]=1;else{var h;if(s=o.className,a=s.match(/feed_reposts_wrap(-?\d+_\d+)/)){if(l=(0,i.domFC)(o),(0,i.hasClass)((0,i.domFC)(l),"post_copy")&&(d[a[1]]=-1),(a=null==(h=(0,i.domFC)(l))?void 0:h.id.match(c))&&(d[a[1]]=1),(0,i.isVisible)(l=(0,i.domNS)(l)))for(l=(0,i.domFC)(l);l;l=(0,i.domNS)(l)){var g;(a=null==(g=l)?void 0:g.id.match(c))&&(d[a[1]]=1)}}else if(a=s.match(/feed_repost(-?\d+_\d+)/)){if(l=(0,i.domFC)(o),!l)return d;(0,i.hasClass)(l,"post_copy")&&(d[a[1]]=-1),(a=l.id.match(c))&&(d[a[1]]=1)}else{let e=o.id;if((0,i.hasClass)(o,"post_photos")){var m,w,v;l=(0,i.geByClass1)("post_image",o,"a");const t=null==(v=l)||null==(w=v.querySelector)||null==(m=w.call(v,"[data-post-id]"))?void 0:m.getAttribute("data-post-id");t&&(a=t.match(/^(-?\d+_p?\d+)$/),a&&(e=a[1]))}d[e]=1}}return d},l=e=>{const t=e&&(0,i.domFC)(e);return t&&t.hasAttribute("data-ad-video-autoplay")},c=e=>{const t=e&&(0,i.domFC)(e);return t&&(t.hasAttribute("data-ad-stat-impression_long")||t.hasAttribute("data-ad-disabled-stat-impression_long"))},d=e=>{let t=e&&(0,i.domFC)(e);return t&&t.hasAttribute("data-ad-views-long-only")},u=e=>{let t=e&&(0,i.domFC)(e);return t&&t.hasAttribute("data-ad-stat-show_off")},_=(0,s.memoizeFirstTruthy)((()=>(0,i.ge)("page_header").offsetHeight)),p=(e,t,o,s)=>{let i=_(),n=o+i,r=o+s,a=e.offsetHeight,l=e.offsetTop+i,c=l+a;return(c>n&&l<r?(Math.min(r,c)-Math.max(n,l))/a:0)>=t}},561826:(e,t,o)=>{o.d(t,{stringifyUnknown:()=>s});const s=e=>{if("object"!=typeof e)return String(e);try{return JSON.stringify(e)}catch(e){return"got a non-serializable error object"}}},934913:(e,t,o)=>{function s(e){return"object"==typeof e&&null!==e}function i(e,t){return function(e,t){return s(e)&&t in e}(e,t)?e[t]:void 0}o.d(t,{getField:()=>i,isLikePlainObject:()=>r,unknownToBinaryInt:()=>n});const n=e=>1===Number(e)?1:0;function r(e,t){return s(e)&&Object.entries(t).every((([t,o])=>typeof e[t]==typeof o))}},120744:(e,t,o)=>{o.d(t,{getAuthorOnboardingTooltipsSharedState:()=>l,renderAuthorUserOnboardingTooltip:()=>d,renderHelpTooltip:()=>c});var s=o(367431),i=o(850343),n=o(815671),r=o(104677),a=o(29271);const l=()=>(0,s.makeSharedState)("author-onboarding-tooltips",(()=>({isAuthorUserTooltipShown:!1,isAuthorGroupTooltipShown:!1})),{version:1}),c=(e,t,o,s)=>{const{tooltip:i}=(0,r.helpHintTooltip)(e,{content:t,onHideRequestSent:o,isServerSideHideDisabled:!0},{width:s,forceSide:"top",withCloseButton:!1,appendToParent:!0,autoAdjustToViewport:!1,offset:[2,-6],noAutoHideOnWindowClick:!1,cls:"feature_intro_tt feature_intro_blue_tt"});window.requestAnimationFrame((()=>i.show()))},d=e=>{const t=l(),o=i.AvailableHelpHints.AUTHOR_LIKE_ONBOARDING_HINT,s=(0,n.ensureAccountHelpHintsService)();s.canShow(o)&&!t().isAuthorUserTooltipShown&&(t().isAuthorUserTooltipShown=!0,c(e,a.getLang("intro_hint_description_feed_author_like_onboarding"),(()=>s.hideHelpHint(o)),225))}},234514:(e,t,o)=>{o.d(t,{LikeButtonTypes:()=>s});const s={like:"like",share:"share",views:"views",comment:"comment"}},469943:(e,t,o)=>{function s(e){var t,o;if(null!==(o=t=e)&&"object"==typeof o&&("queue"in t||"key"in t&&"string"==typeof t.key))return e.queue||e.key}o.d(t,{subscriptionObjectStableId:()=>s})},498275:(e,t,o)=>{o.d(t,{friendsRecommGetTrackCode:()=>h,friendsRecommLogClear:()=>u,friendsRecommLogGet:()=>d,friendsRecommLogOnFail:()=>f,friendsRecommLogSave:()=>c,friendsRecommLogSend:()=>_,getRef:()=>l});var s,i=o(531730),n=o(82161),r=o(363444),a=o(795558);!function(e){e.friends_recomm="friends_recomm"}(s||(s={}));const l=()=>{var e;return"feed"===window.cur.module&&window.Feed?null==(e=window.Feed)?void 0:e.getModuleRef():window.cur.module};function c(e,t=!1){const o=d();o.push(e),i.multiAccountLs.set("friends_recomm",o),_(t)}function d(e=!1,t,o=!1){const s=i.multiAccountLs.get("friends_recomm");let r=Array.isArray(s)?s:[];return t&&(r=r.filter((e=>(o?e[1]!==t:e[1]===t)&&(0,n.inArray)(e[0],["show_user_rec","open_user"])))),e&&(r=r.map((e=>e.join("|")))),r}function u(e){if(e){const t=d(!1,e,!0);t.length?i.multiAccountLs.set("friends_recomm",t):i.multiAccountLs.remove("friends_recomm")}else i.multiAccountLs.remove("friends_recomm")}function _(e=!1){var t,o,s;!(null==(t=window.cur)?void 0:t.friendsRecommLogIdle)&&(null==(s=window)||null==(o=s.curNotifier)?void 0:o.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=()=>{clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(_)),clearTimeout(window.cur.friendsRecommLog),e?p():window.cur.friendsRecommLog=window.setTimeout(p,1e4)}function p(){if(window.cur.friendsRecommProcess)return;const e=d(!0);e.length&&(window.cur.friendsRecommProcess=!0,u(),r.ajax.post("al_friends.php",{act:"a_recomm_logs",logs:e},{onDone:()=>{delete window.cur.friendsRecommProcess},onFail:()=>(f(e),delete window.cur.friendsRecommProcess,!0)}))}function f(e){let t=d();t=e.map((e=>e.split("|"))).concat(t),i.multiAccountLs.set("friends_recomm",t)}function h(e){let t,o=(0,a.domData)(e,"code");return o||(t=(0,a.gpeByClass)("ui_gallery",e),o=(0,a.domData)(t,"code")),o||""}},420778:(e,t,o)=>{o.d(t,{blockInstanceSetForFeedRowContent:()=>r,feedInitialViewRecommendedGroupsTrigger:()=>n});var s=o(459474);const i="__RecommendedGroups";function n(e,t){const o=e.querySelector(".js-feed_groups_recomm"),n=e.querySelector(".ui_gallery");if(!o||!n)return void console.error(new Error("RecommendedGroups: missing block container for view"),o,n);const r=n.getAttribute("data-code")||"",a=null!=(l=o[i])?l:void 0;var l;if(!a)return void console.error(new Error("RecommendedGroups: missing block instance"),o,n);const c="number"==typeof t?t:void 0;a.viewBlock(r,c);const d=(0,s.uiGetGallery)(n);d&&d.getVisibleItems().forEach((e=>{a.onViewGroup(e[0])})),n.visible=!0}function r(e,t){e[i]=t}},999237:(e,t,o)=>{o.d(t,{triggerReactionsUpdate:()=>a});var s=o(693982),i=o(682951),n=o(505426),r=o(109454);const a=(e,t,o,a)=>{const l=(0,s.parseLikeObjectId)(e);l&&l.objectType===i.SUPPORTED_OBJECT_TYPES.wall&&l.objectId?(0,n.emitEvent)(n.WallDataEvents.post_reactions_counts_update,function(e,t,o,s){var i,n,a;const l={counts:e,isFromWkLayer:null==(i=t)?void 0:i.isFromWkLayer,isPrimaryLikeButtonClick:null==(n=t)?void 0:n.isPrimaryLikeButtonClick,isQueueUpdate:null==(a=t)?void 0:a.isQueueUpdate,isUserAction:t.isUserAction,postFullId:o.objectId,previewVisibility:t.previewVisibility,reactionIdState:s?{reactionId:s.id}:void 0,suggestSubscribe:t.suggestSubscribe};return s?(0,r.reactionsCountsUpdatePayload)(l,s):(0,r.reactionsCountsOnlyUpdatePayload)(l)}(t,a,l,o)):l&&l.objectType===i.SUPPORTED_OBJECT_TYPES.wall_reply&&l.objectId?(0,n.emitEvent)(n.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:l.objectId,reactionIdState:o?{reactionId:o.id}:void 0}):console.warn("Unsupported reactions object update",e)}},749721:(e,t,o)=>{o.d(t,{clickUXPollsBlock:()=>n,viewUXPollsBlock:()=>i});var s=o(504867);function i(e){(0,s.statlogsValueEvent)("uxpolls_view",e)}function n(e){(0,s.statlogsValueEvent)("uxpolls_click",e)}},228411:(e,t,o)=>{o.d(t,{updateAriaLabelCounter:()=>n});var s=o(29271),i=o(234514);const n=(e,t,o)=>{if(!("number"==typeof t&&e instanceof HTMLElement&&e.classList.contains("PostBottomAction")))return;const n=(e=>{let t;switch(e){case i.LikeButtonTypes.comment:t=s.getLang("likes_comments_N_aria_short","raw");break;case i.LikeButtonTypes.like:t=s.getLang("likes_likes_N_aria_short","raw");break;case i.LikeButtonTypes.share:t=s.getLang("likes_shares_N_aria_short","raw")}return t})(o);if(!n)return;const r=(0,s.langNumeric)(t,n,!1);e.setAttribute("aria-label",r)}},280598:(e,t,o)=>{o.d(t,{memoizeFirstTruthy:()=>s});const s=e=>((e,t)=>{let o,s=!1;return(...i)=>(!0===s||(o=e(...i),s=t(o)),o)})(e,(e=>!!e))},630260:(e,t,o)=>{o.d(t,{Feed:()=>ae});var s=o(434788),i=o(659397),n=o(962983),r=o(839470),a=o(9480),l=o(301230),c=o(488957),d=o(175426),u=o(577552),_=o(652027),p=o(29271),f=o(643897),h=o(10645),g=o(849222),m=o(95432),w=o(584356),v=o(562112),k=o(953908),b=o(438221),y=o(459474),C=o(795558),S=o(719645),P=o(96756),L=o(725296),E=o(514986),T=o(320422),B=o(215066),A=o(82161),x=o(469943),I=o(498275),R=o(420778),N=o(84852),j=o(54413),O=o(854099),D=o(664988),F=o(120425),M=o(198186),H=o(709291),q=o(829234),V=o(215460),U=o(385295),W=o(135617),G=o(862736),z=o(880660),Y=o(90692),Q=o(941468),$=o(523408),K=o(991243),X=o(137363),Z=o(9747),J=o(749721),ee=o(42575),te=o(931917),oe=o(428518),se=o(531232),ie=o(321850),ne=o(864424),re=o(286118);const ae={sectionUpdateExceptions:["search","notifications","photos_search","mentions","articles","articles_search","likes","recommended","live","topics"],blockHideReason:function e(t,o){if(e.progress)return!1;e.progress=!0;let s="block_"+t,i=(0,C.ge)(s);delete cur.feedEntriesHTML[s],ajax.post("al_feed.php",{act:"a_block_hide_reason",block_id:t,reason:0|o,hash:(0,C.attr)(i,"data-hash"),ref:ae.getModuleRef(),pos:(0,C.attr)(i,"data-pos")},{onDone:function(t){e.progress=!1,t?(0,C.val)(i,t):(0,C.hide)(i)},hideProgress:function(){e.progress=!1}})},blockRestore:function(e){let t="block_"+e,o=(0,C.ge)(t);cur.feedEntriesHTML[t]&&(0,C.val)(t,cur.feedEntriesHTML[t]),ajax.post("al_feed.php",{act:"a_block_restore",block_id:e,hash:(0,C.attr)(o,"data-hash"),ref:ae.getModuleRef(),pos:(0,C.attr)(o,"data-pos")})},blockHide:function(e,t){if((0,L.actionsMenuItemLocked)(t))return;(0,L.lockActionsMenuItem)(t);let o="block_"+e,s=(0,C.ge)(o),i=(0,C.geByClass1)("ui_actions_menu_wrap",s);ajax.post("al_feed.php",{act:"a_block_hide",block_id:e,hash:(0,C.attr)(s,"data-hash"),ref:ae.getModuleRef(),pos:(0,C.attr)(s,"data-pos")},{onDone:function(e){uiActionsMenu.toggle(i,!1),cur.feedEntriesHTML[o]=(0,C.val)(s),(0,C.val)(s,e)},hideProgress:L.unlockActionsMenuItem.pbind(t)})},videoRecomsBlockHideCancel:function(){ajax.post("/al_feed.php",{act:"a_video_recom_hide_cancel"}),ae.restorePost("video_recoms")},videoRecomsBlockHideReason:function(e,t){(0,C.re)((0,C.geByClass1)("feed_rb_video_reason_wrap")),(0,C.show)((0,C.geByClass1)("feed_rb_video_reason_thankyou")),ajax.post("/al_feed.php",{act:"a_video_recom_hide_reason",reason:t,reason_hash:e})},expandVideosPost:function(e,t){let o=(0,C.geByClass1)("page_post_sized_thumbs",(0,C.domPN)(t)),s=0;(0,A.each)(o.children,(function(){if(!(0,C.isVisible)(this)&&((0,C.show)(this),s++,s>5))return!1})),(0,C.toggle)(t,!(0,C.isVisible)(o.children[o.children.length-1]))},update:function(e){if(cur.feedUpdateLoading)return;if(window.Notifier&&cur.add_queues&&cur.add_queues.length&&(cur.add_queues.forEach((function(e){Notifier.addKey(e,ae.updated)})),"news"!=cur.section))return;if("feed"!==cur.module||"top"==cur.subsection||(0,A.inArray)(cur.section,ae.sectionUpdateExceptions)||cur.isDisabledFeedAutoupdate)return;let t=Math.random();if("news"!=cur.section&&"comments"!=cur.section&&t>.3||"news"==cur.section&&(e||t>.05))return;cur.feedUpdateLoading=!0;let o=ae.getSectionParams(cur.section);(0,A.extend)(o,cur.navParams),ajax.post("al_feed.php?au_"+cur.section,(0,A.extend)(o,{timestamp:cur.timestamp,posted:e?1:"",queue:cur.add_feed_queue?1:0}),{onDone:function(t,o,s){if(cur.feedUpdateLoading=!1,1==e&&(!o||-1==o.indexOf(vk.id+"")))return void setTimeout(ae.update.pbind(2),2e3);if("feed"!==cur.module||t.section!=cur.section||t.timestamp<cur.timestamp||s<cur.timestamp)return;(0,B.statlogsValueEvent)("feed_check_update",!!o),t.count+=cur.count;let i,n,r,a,l=cur.rowsCont,c=(0,C.ce)("div"),d=0;if("news"==cur.section){if(a=(0,b.scrollGetY)(),o){for(c.innerHTML=o;c.lastChild;)i=c.lastChild,l.insertBefore(i,l.firstChild),ae.onPostLoaded(i,!0);(0,A.each)((0,C.geByClass)("ts"+s,l),(function(e,t){var o,s;d+=this.offsetHeight;const i=null==(s=t)||null==(o=s.querySelector)?void 0:o.call(s,".post");i&&(0,M.highlightUpdatedPost)(i),cur.feedUnreadCount++}))}d&&a>100&&(0,b.scrollToY)(a+d,0,!1,!0)}else if(o)for(c.innerHTML=o;i=c.lastChild;)if("DIV"==i.tagName)if("podcasts_recommended_block"!==i.id)if(r=i.firstChild.id.substr(4),r&&cur.wallLayer==r)c.removeChild(i);else if(n=(0,C.ge)("post"+r)){if(!(0,C.hasClass)(n.parentNode,"feed_row"))return;const e=(0,C.ge)("replies"+r);let t=e.nextSibling,o=0;if((0,A.each)([].slice.call((0,C.geByClass)("reply",i,"div")),(function(){(0,C.ge)(this.id)||((0,C.addClass)(this,"new_reply"),e.appendChild(this),o++)})),o){let s=n.parentNode.offsetHeight,i=(0,C.geByClass)("new_reply",e,"div").length;t&&"replies_open"==t.className||(t=(0,C.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(r),role:"button",tabIndex:0}),e.parentNode.insertBefore(t,e.nextSibling)),t.innerHTML=p.getLang("wall_x_new_replies_more",Math.min(100,i)),t.newCnt=i;let a=(0,b.scrollGetY)(),c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=(0,C.getXY)(t)[1],u=n.parentNode.offsetHeight;s=u-s,(0,A.inArray)(r,cur.feedUnread)||cur.feedUnread.unshift(r),!cur.idleManager.isIdle&&d>a+100&&d<a+c+100?(l.insertBefore((0,C.ge)("post_ph"+r)||(0,C.ce)("div",{id:"post_ph"+r}),l.firstChild),(0,A.inArray)(r,cur.feedToSort)||cur.feedToSort.push(r)):((0,C.re)(n.parentNode),l.insertBefore(n.parentNode,l.firstChild),d>a+c+100&&(s=u),s&&(0,b.scrollToY)((0,b.scrollGetY)()+s,0,!1,!0)),cur.feedUnreadCount+=o}c.removeChild(i)}else a=(0,b.scrollGetY)(),l.insertBefore(i,l.firstChild),ae.onPostLoaded(i,!0),d=i.offsetHeight,a>100&&(0,b.scrollToY)(a+d,0,!1,!0);else c.removeChild(i);else c.removeChild(i);ae.applyOptions(t),ae.updateTitle()},onFail:function(){return cur.feedUpdateLoading=!1,!1},showProgress:function(){cur.feedUpdateLoading=!0},hideProgress:function(){cur.feedUpdateLoading=!1}})},getNewQKey:function(e){let t={act:"a_get_key",only_update:cur.add_feed_queue?1:0,need_ignore:(0,D.isArray)(cur.ignore_owners)?0:1},o={onDone:function(o,s,n){if(cur.section!=i)return;if(cur.add_feed_queue=n,o)cur.add_queues=o,setTimeout(ae.update.pbind(0),0);else if(!t.only_update){let t=s;return void(cur.timestamp=(t||(0,D.vkNow)()/1e3)-e)}(0,D.isArray)(s)&&(cur.ignore_owners=s)},local:1},i=cur.section;ajax.post("al_feed.php",(0,s._)({},ae.getSectionParams(cur.section),t,{queue:1}),o)},updated:function(e,t){cur.queueTO=cur.queueTO||(0,D.irand)(0,5e3),setTimeout(ae.handleQueueEvent.pbind(e,t),cur.queueTO)},handleQueueEvent:function(e,t){if("search"!=cur.section&&"news"!=cur.section&&cur.section||!(0,D.isArray)(cur.add_queues))return;const o=cur.add_queues.find((t=>(0,x.subscriptionObjectStableId)(t)===e));if(!o)return;if(t.failed){cur.add_queues=!1,cur.add_feed_queue=null;let e=curNotifier.error_timeout||1;return clearTimeout(cur.lp_error_to),void(cur.lp_error_to=setTimeout(ae.getNewQKey.bind(ae).pbind(e),1e3*e))}if(!(0,D.isArray)(t.events)||!t.events.length)return;o.ts=t.ts,t.key&&(o.key=t.key);let s=(0,b.scrollGetY)(),i=0;(0,A.each)(t.events,(function(){if((0,D.isObject)(this))return Wall.processQueueEvent(this);i+=ae.pushEvent(this.split("<!>"),s+(0,C.getSize)("page_header_cont")[1])}));let n=(0,b.scrollGetY)();i&&Math.abs(s-n)<100&&(cur.leftMenuDelta=i,(0,b.scrollToY)(n+i,0,!1,!0)),ae.updateTitle(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()},needScrollPost:function(e,t){return e+80>(0,C.getXY)(t)[1]||cur.storyLayer||window.mvcur&&mvcur.mvShown||window.pvcur&&cur.pvShown},pushEvent:function(e,t){let o=e[0],i=e[1],n=e[2],r=(0,C.ge)("post"+n),l=cur.section,c="search"!=l?(0,A.intval)(e.pop()):0,d=0,u=function(e){return(0,A.intval)((0,C.getStyle)((0,C.domByClass)(e,"page_block"),"marginTop"))||(0,A.intval)((0,C.getStyle)((0,C.domByClass)((0,C.domNS)(e),"page_block"),"marginTop"))||15};if(!cur.options||o!=cur.options.qversion)return 0;switch((Wall.isArchiveWall()?"archive_post"===i:"reveal_post"===i)&&(i="res_post"),(Wall.isArchiveWall()?"reveal_post"===i:"archive_post"===i)&&(i="del_post"),i){case"new_post":{if(r)break;let o=X.GroupAdminLevel.USER;if((0,A.intval)(e[11])&&(0,A.intval)(e[11])!=vk.id)return ajax.post("al_feed.php",{act:"a_need_own_reply",oid:(0,A.intval)(e[11])},{onDone:function(o){o&&(e[11]=0,ae.pushEvent(e,t))}}),0;if("search"!=l){let t=n.split("_")[0];e[8]=(0,A.intval)(e[8])>0&&4==(4&c)?"1":"0",te.Ranges.isGroupId(t)&&(o=8&c?X.GroupAdminLevel.EDITOR:2&c?X.GroupAdminLevel.MODERATOR:X.GroupAdminLevel.USER)}"search"==l&&(0,B.statlogsValueEvent)("feed_switch",0,"search_update",cur.options.q&&"#"==cur.options.q.charAt(0)?"hashtag":"");let s=cur.rowsCont,i=s.childNodes,_=Wall.getNewPostHTML(e,o,ae.feedPostRepl);if(!_)break;let f,h,g,m,w,v,k=e[12],b="search"!=l&&(window._wf<=0||(0,C.hasClass)(cur.feedEls.wrap,"feed_has_new")||ae.needScrollPost(t,s)),y=cur.storyLayer;y&&(b=!0);let S=!1,P=_;if(b&&(_=Wall.updatePostImages(_)),k){if(cur.ignore_owners.length&&(0,A.inArray)((0,A.intval)(k),cur.ignore_owners))break;if(h=(0,C.geByClass1)("feed_reposts_wrap"+k,s,"div"))g=(0,C.geByClass1)("feed_reposts_first",h,"div").firstChild,m=(0,C.geByClass1)("feed_reposts_group",h,"div"),w=(0,C.geByClass1)("feed_reposts_more_link",h),ae.needScrollPost(t,g)&&(d-=g.offsetHeight+u(g)),g.parentNode.replaceChild(f=(0,C.se)(P),g),m.insertBefore(g,m.firstChild),(0,C.isVisible)(m)||O.FlatButton.setLabel(w,p.getLang("news_show_X_reposts",m.childNodes.length)),h=h.parentNode,s.firstChild!=h&&s.insertBefore(h,s.firstChild),ae.needScrollPost(t,h)&&(d+=h.offsetHeight+u(h)),h.bits=0;else if((v=(0,C.geByClass)("feed_repost"+k,s,"div"))&&v.length){_=(0,C.rs)(cur.wallTpl.grouped_posts,{place:k,random:(0,D.irand)(1e8,2e8),first:_,other:"",label:p.getLang("news_show_X_reposts",v.length)});let e=(0,C.se)('<div class="feed_row'+(b?"_unshown":"")+'">'+_+"</div>");s.insertBefore(e,s.firstChild),!b&&ae.needScrollPost(t,e)&&(d+=e.offsetHeight+u(e)),S=!0,h=e.firstChild,f=(0,C.geByClass1)("feed_reposts_first",h,"div"),m=(0,C.geByClass1)("feed_reposts_group",h,"div"),(0,A.each)((0,A.clone)(v),(function(){ae.needScrollPost(t,this)&&(d-=this.offsetHeight+u(this)),(0,C.re)(this.parentNode),m.appendChild(this.firstChild)}))}else f=(0,C.se)('<div class="feed_row'+(b?"_unshown":"")+'"><div class="feed_repost'+k+'">'+_+"</div></div>"),s.insertBefore(f,s.firstChild),S=!0,!b&&ae.needScrollPost(t,f)&&(d+=f.offsetHeight+u(f))}else f=(0,C.se)('<div class="feed_row'+(b?"_unshown":"")+'">'+_+"</div>"),s.insertBefore(f,s.firstChild),S=!0,!b&&ae.needScrollPost(t,f)&&(d+=f.offsetHeight+u(f));const L=(0,C.geByClass1)("post",f);0==e[8]&&(0,C.addClass)(L,"closed_comments"),cur.deepRepliesActive&&(0,C.addClass)(L,"deep_active"),b&&S&&(cur.newPostsCount=cur.newPostsCount?cur.newPostsCount+1:1,cur.feedEls.newPosts.innerHTML=p.getLang("news_new_posts",cur.newPostsCount),(0,C.addClass)(cur.feedEls.wrap,"feed_has_new"),1==cur.newPostsCount&&ae.needScrollPost(t,cur.feedEls.newPosts)&&!y&&(d+=(0,C.getSize)(cur.feedEls.newPosts)[1])),a.AudioUtils.updateQueueReceivedPost(f),(0,z.updateNarrativeSnippetsFromQueueByPost)(f),(0,Y.updateArticleSnippetsFromQueueByPost)(f),cur.feedUnreadCount++,"search"!=l&&L&&(0,M.highlightUpdatedPost)(L),i.length>300?s.removeChild(i[300]):i.length<=1&&(0,C.removeClass)(cur.feedEls.wrap,"feed_is_empty"),Wall.updateMentionsIndex();break}case"new_post_reply":{if(r)break;const o=cur.rowsCont,s=o.childNodes,i=Wall.getNewPostHTML(e,!1,ae.feedPostRepl);if(!i)break;const n=(0,C.se)('<div class="feed_row">'+i+"</div>");o.insertBefore(n,o.firstChild),ae.needScrollPost(t,n)&&(d+=n.offsetHeight+u(n)),(0,z.updateNarrativeSnippetsFromQueueByPost)(n),(0,Y.updateArticleSnippetsFromQueueByPost)(n),(0,K.updateStickersFromQueue)(n),cur.feedUnreadCount++,s.length>300?o.removeChild(s[300]):s.length<=1&&(0,C.removeClass)(cur.feedEls.wrap,"feed_is_empty");break}case"edit_post":{const o=(0,C.ge)("wpt"+n);let s;if(!(0,C.isVisible)(r)||!o)break;let i=(0,C.geByClass1)("wall_post_more",o);i&&(i=(0,C.isVisible)((0,C.domNS)(i))),(s=ae.needScrollPost(t,o))&&(d-=o.offsetHeight);let a=(0,C.rs)(e[3],{poll_hash:cur.wallTpl.poll_hash});const l=(0,C.ge)("post"+n);l&&!(0,C.isVisible)(l.parentNode)&&(a=Wall.updatePostImages(a)),(0,C.val)(o,a),i&&(i=(0,C.geByClass1)("wall_post_more",o),i&&i.onclick()),s&&(d+=o.offsetHeight),(0,z.updateNarrativeSnippetsFromQueueByPost)(o),(0,Y.updateArticleSnippetsFromQueueByPost)(o),(0,M.highlightUpdatedPostContent)(o),window.Wall&&Wall.updatePostAuthorData(n);break}case"edit_reply":{let t=e[3];const o=(0,C.ge)("wpt"+t);if(!(0,C.isVisible)("post"+t)||!o)break;let s=(0,C.geByClass1)("wall_reply_more",o);s&&(s=(0,C.isVisible)((0,C.domNS)(s)));let i=e[4];(0,C.val)(o,i),s&&(s=(0,C.geByClass1)("wall_reply_more",o),s&&s.onclick()),(0,z.updateNarrativeSnippetsFromQueueByPost)(o),(0,Y.updateArticleSnippetsFromQueueByPost)(o),(0,K.updateStickersFromQueue)(o),(0,H.highlightUpdatedReplyContent)(o);break}case"post_parsed_link":{if(!r)break;let t=(0,C.geByClass1)("wall_postlink_preview_btn_disabled",r);if(!t)break;let o=e[3];if("1"===o)(0,C.removeClass)(t,"wall_postlink_preview_btn_disabled");else if("0"===o)(0,C.re)(t);else if(o){(0,C.removeClass)(t,"wall_postlink_preview_btn_disabled");let o=(0,C.geByClass1)("flat_button",t);o&&(o.setAttribute("href",e[3]),o.removeAttribute("onclick"))}break}case"del_post":if(r){let e=(0,C.domClosest)("feed_row",r)||(0,C.domClosest)("feed_row_unshown",r)||r;cur.wallMyDeleted[n]||(ae.needScrollPost(t,r)&&(d-=r.offsetHeight+u(r)),(0,_.revertLastInlineVideo)(r),(0,C.re)(e)),cur.options.offset--,(0,C.hasClass)(cur.feedEls.wrap,"feed_has_new")&&!(0,C.isVisible)(e)&&(cur.newPostsCount--,cur.newPostsCount?cur.feedEls.newPosts.innerHTML=p.getLang("news_new_posts",cur.newPostsCount):(0,C.removeClass)(cur.feedEls.wrap,"feed_has_new"))}break;case"res_post":r&&cur.options.offset++;break;case"new_reply":{if(!r||cur.wallMyReplied[n]||(0,C.ge)("post"+e[3]))break;if((0,C.hasClass)((0,C.ge)("post"+n),"deep_active")){const t=Wall.addNewReply(e);d+=t[0];break}let o=(0,C.ge)("replies"+n),s=(0,C.ge)("replies_wrap"+n),i=r.offsetHeight;const a=n.split("_")[0],l=te.Ranges.isGroupId(a)?8&c?X.GroupAdminLevel.EDITOR:2&c?X.GroupAdminLevel.MODERATOR:X.GroupAdminLevel.USER:X.GroupAdminLevel.USER;let u=Wall.getNewReplyHTML(e,l);if(!u)break;let _,f=!1,h=!1;if((0,C.isVisible)(o)&&(0,C.isVisible)(s)&&!(0,C.isVisible)("reply_link"+n)){_=o.nextSibling;let e=(0,C.geByClass)("new_reply",o,"div").length+1;if(cur.wallMyOpened[n]){_&&"replies_open"==_.className&&(0,C.re)(_),h=!0;let e=(0,C.geByClass1)("wr_header",o,"a"),t=(0,C.geByClass)("reply",o,"div").length+1,s=t;e&&(s=(0,A.intval)(e.getAttribute("offs").split("/")[1])+1),(s>5||t<s)&&(e||o.insertBefore(e=(0,C.ce)("a",{className:"wr_header"}),o.firstChild),Wall.updateRepliesHeader(n,e,t,s))}else u=Wall.updatePostImages(u),f=(0,C.se)(u),(0,C.addClass)(f,"new_reply"),_&&"replies_open"==_.className||(_=(0,C.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(n),role:"button",tabIndex:0}),o.parentNode.insertBefore(_,o.nextSibling)),_.innerHTML=p.getLang("wall_x_new_replies_more",Math.min(100,e)),_.newCnt=e}else(0,C.re)("reply_link"+n),(0,C.show)(s,o),h=!0;n.split("_")[0]==vk.id&&cur.feedUnreadCount++,f||(f=(0,C.se)(u)),o.appendChild(f),ae.needScrollPost(t,h?f:_)&&(d+=r.offsetHeight-i),f instanceof HTMLElement&&((0,z.updateNarrativeSnippetsFromQueueByPost)(f),(0,Y.updateArticleSnippetsFromQueueByPost)(f),(0,K.updateStickersFromQueue)(f)),h&&(0,H.highlightUpdatedReply)(f),Wall.repliesSideSetup(n),Wall.updateMentionsIndex(),Likes.update("wall"+n,{comment_num:e[13]});break}case"del_reply":if(!cur.wallMyDeleted[n]&&r){if((0,C.hasClass)((0,C.gpeByClass)("post",r),"deep_active")){const t=Wall.removeDeepReply(e);d+=t[0];break}ae.needScrollPost(t,r)&&(d-=r.offsetHeight);let o=r.parentNode.id.match(/replies(-?\d+_\d+)/);(0,_.revertLastInlineVideo)(r),(0,C.re)(r),o&&Wall.repliesSideSetup(o[1])}break;case"view_post":Likes.update("wall"+n,{views_num:Wall.formatCount((0,A.intval)(e[3]))});break;case"like_post":case"like_reply":{if(!r)break;let t="like_reply"==i?"wall_reply"+n:n,o=r&&(0,C.domByClass)(r,"_like_wrap"),a=r&&(0,C.domByClass)(r,"_share_wrap");const l=(0,N.likeDataReactionsFields)(e);Wall.likeFullUpdate(o,t,(0,s._)({isQueueUpdate:!0,like_my:o&&(0,C.hasClass)(o,"my_like"),like_num:e[3],like_title:!1,share_my:a&&(0,C.hasClass)(a,"my_share"),share_num:e[4],share_title:!1},l));break}}return d},feedPostRepl:function(e,t){e.replies=cur.wallTpl.post_replies;let o={full_id:t[2],item_id:"wall_"+t[2],sec_name:(0,D.stripHTML)(t[3]),date:Wall.getNowRelTime(),del:cur.wallTpl.spam};if("search"==cur.section&&cur.q){let s=e.text||"",i=cur.q.toLowerCase().split(/[\s.,:;!?()]/),n=[];s=s.replace(/<(.|\n)+?>/g,(function(e){return n.push(e),""}));let r,a,l,c=s.toLowerCase();for(r=i.length-1;r>=0;r--)if(l=i[r],(0,A.trim)(l))for(a=0;-1!=(a=c.indexOf(l,a));)s.charAt(a-1)!=String.fromCharCode(2)?(s=s.substr(0,a)+""+r+""+s.substr(a+l.length),c=c.substr(0,a)+""+r+""+c.substr(a+l.length)):a+=2;s=s.replace(/\x02(\d+)\x02/g,(function(e,t){return'<span class="highlight">'+i[t]+"</span>"})),s=s.replace(/\x01/g,(function(){return n.shift()||""})),o.text=s,"new_post_reply"==t[1]&&(o.date_postfix=t[7])}return o},reSortItems:function(){cur.feedToSort&&cur.feedToSort.length&&((0,A.each)(cur.feedToSort,(function(e,t){let o=(0,C.ge)("post_ph"+t),s=(0,C.ge)("post"+t).parentNode;o&&s&&(o.parentNode.insertBefore(s,o),(0,C.re)(o))})),cur.feedToSort=[],(0,b.scrollToY)(0,0))},showNewPosts:function(){(0,C.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0;let e=(0,C.ge)("feed_rows");Wall.loadPostImages(e),(0,A.each)((0,C.geByClass)("feed_row_unshown",e,"div"),(function(){(0,C.replaceClass)(this,"feed_row_unshown","feed_row")}))},updateTitle:function(){cur.idleManager&&(cur.idleManager.isIdle||(cur.feedUnreadCount=0),(0,C.setDocumentTitle)((cur.feedUnreadCount?"("+cur.feedUnreadCount+") ":"")+cur.feedInitialTitle))},toggleTabsMenuTab:function(e,t){let o=(0,C.geByClass1)("feed_section_"+e,cur.feedEls.rmenu);o&&(0,C.toggleClass)(o,"ui_rmenu_item_hidden",!t)},toggleTabsMenu:function(e,t){let o=(0,C.ge)("feed_add_list_icon");return void 0===t&&(t=!(0,C.hasClass)(o,"shown")),l.browser.mozilla&&(0,C.setStyle)("page_body",{overflow:t?"visible":""}),uiActionsMenu.toggle(o,t),t&&(0,k.addEvent)(document,"mousedown",(function e(t){ae.toggleTabsMenu(!1,0),(0,k.removeEvent)(document,"mousedown",e)})),e&&(0,k.cancelEvent)(e)},checkTabsFilter:function(e,t){let o,s,i,n=t==cur.section,r=cur.my_feed_types.tabs;switch(t){case"news":return!1;case"newlist":return ae.addList();default:if(i=t.match(/list(\d+)/))return ae.editList(i[1])}o=-1!=(s=(0,A.indexOf)(r,t)),(0,C.toggleClass)(e,"checked",!o),o?(r.splice(s,1),n&&(cur.onSaveTabs=function(e,t){ae.toggleTabsMenu(null,!1),ae.switchSection("news")}.pbind(t,o))):r.push(t),cur.my_feed_types.tabs=r,ae.toggleTabsMenuTab(t,!o||n),clearTimeout(cur.saveTabsTO),cur.saveTabsTO=setTimeout(ae.saveTabs,500)},hasSearchParams:function(e){let t=!1;return(0,A.each)(e,(function(e,o){if((!e.indexOf("c[")&&"c[section]"!==e||"q"==e)&&o)return t=!0,!1})),t},getSectionParams:function(e){let t={section:e};switch(e){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"podcasts":case"articles":void 0===(t.subsection=cur.subsections[e])&&delete t.subsection;break;case"owner":(t.owner=cur.owner)||delete t.section;break;case"source":case"notifications":(t.source=cur.source)||delete t.source;break;case"list":void 0===(t.subsection=cur.subsections["list"+cur.list])&&delete t.subsection,(t.list=cur.list)||delete t.list;break;case"search":const o=(0,C.ge)("search_filters_form");if(o){let e=(0,A.serializeForm)(o)||{};for(let t in e)e[t]&&"0"!=e[t]||delete e[t];(0,A.extend)(t,e)}t["c[q]"]=(0,A.trim)((0,C.val)(cur.feedEls.search));break;case"photos_search":(t.q=(0,A.trim)((0,C.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,A.intval)(cur.search_sort_value))||delete t.sort;break;case"trends_search":window.nav.objLoc.trend_id&&(t.trend_id=window.nav.objLoc.trend_id),(t.q=(0,A.trim)((0,C.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,A.intval)(cur.search_sort_value))||delete t.sort;break;case"articles_search":(t.q=(0,A.trim)((0,C.val)(cur.feedEls.search)))||(t.section="articles");break;case"comments":cur.reposts&&(t.reposts=cur.reposts);break;case"mentions":const s=new URLSearchParams(location.search);s.delete("ref"),history.replaceState(null,"","?"+s+location.hash),cur.mentionObj&&cur.mentionObj!=vk.id&&(t.obj=cur.mentionObj)}return t},switchNotifyList:function(e,t){uiRightMenu.go((0,C.geByClass1)("feed_section_"+e),!1,!1),ae.go(t)},switchSubSection:function(e,t,o){if(t&&(0,k.checkEvent)(t))return!0;let s=cur.section;"list"===cur.section&&(s="list"+cur.list),cur.subsection=cur.subsections[s]=e;let i=ae.getSectionParams(cur.section);i.hash=o,delete cur.feedUpdateLoading,delete cur.isFeedLoading,nav.go((0,A.extend)(i||{},{0:"feed"})),uiRightMenu.showProgress(cur.feedEls.rmenu)},switchSection:function(e,t,o){if(t&&(0,k.checkEvent)(t))return!0;if((0,C.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,"photos_search"==e&&!(0,A.trim)((0,C.val)(cur.feedEls.search))){if("photos_search"!=cur.section)return!1;e="photos"}"comments"==e&&(cur.reposts=cur.options.reposts=""),(0,B.statlogsValueEvent)("feed_switch",0,e),ae.setSection(e,1);let s=ae.getSectionParams(e||"news");delete cur.feedUpdateLoading,delete cur.isFeedLoading;let i=!o&&(0,A.extend)(s||{},{0:"feed"});return uiRightMenu.go((0,C.geByClass1)("feed_section_"+e),!1,i),!1},setSection:function(e,t,o){if(t=t||0,cur.prevSection=cur.section,!(e==cur.section&&t<2)&&e){if(uiRightMenu.hideProgress(cur.feedEls.rmenu),cur.feedEls.search&&uiSearch.hideProgress(cur.feedEls.search),t>1){Page.playVkFestBanner&&Page.playVkFestBanner(),(0,C.toggleClass)(cur.feedEls.wrap,"feed_submit_shown",(0,A.inArray)(e,cur.options.feed_types.tabs.concat(["list","likes"]))),(0,C.toggleClass)(cur.feedEls.wrap,"feed_submit_only_shown",~["recommended","search","updates","comments"].indexOf(e));let t=(0,A.inArray)(e,["articles_search","articles","search","photos_search","photos","trends","trends_search"]);(0,C.toggleClass)(cur.feedEls.wrap,"feed_search_shown",t),t&&(0,C.elfocus)(cur.feedEls.search),"search"===e&&o.stories_block_show?(0,C.addClass)(cur.feedEls.wrap,"feed_submit_shown_stories"):(0,C.removeClass)(cur.feedEls.wrap,"feed_submit_shown_stories"),cur.section&&(0,C.val)(cur.feedEls.search,"")}2==t&&window.Stories&&Stories.updateFeedStories(e,o),cur.my_feed_types&&(~(0,A.indexOf)(cur.my_feed_types.optional_tabs,cur.section)&&!~(0,A.indexOf)(cur.my_feed_types.tabs,cur.section)&&ae.toggleTabsMenuTab(cur.section,!1),~(0,A.indexOf)(cur.my_feed_types.optional_tabs,e)&&!~(0,A.indexOf)(cur.my_feed_types.tabs,e)&&ae.toggleTabsMenuTab(e,!0)),cur.section=e,4!=t?(cur.editingHide=("notifications"==e||"replies"==e)&&ae.notifyCheckHideReply,cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()):ae.searchUpdate()}},applyOptions:function(e,t){t=t||0,e.no_left_ads&&(cur.no_left_ads=!0),e.owner&&(cur.owner=e.owner),cur.subsection=e.subsection||"",ae.setSection(e.section,t,e),cur.options||(cur.options={reply_names:{}}),(0,A.extend)(cur.options.reply_names,e.reply_names),delete e.reply_names,(0,A.extend)(cur,e);let o=cur.section;if("list"===cur.section&&(o="list"+e.list),cur.subsections[o]=cur.subsection,e.loc&&2==t&&nav.setLoc(e.loc),e.section&&"news"==e.section&&e.subsection&&"top"==e.subsection&&(0,B.statlogsValueEvent)("feed_switch",0,"top_news",t),e.filters){let t=(0,C.ge)("search_filters_minimized"),o=t&&(0,C.hasClass)(t,"ui_rmenu_item_expanded"),s=!!t;(0,C.val)("feed_filters",e.filters),window.searcher&&s&&j.searcher.toggleMinimizedFilters((0,C.ge)("search_filters_minimized"),o,!0)}if(e.script&&(0,S.evalWithLogging)(e.script),e.htitle&&(cur.feedInitialTitle=document.title=(0,D.replaceEntities)((0,D.stripHTML)(e.htitle))),void 0!==e.add_feed_queue&&null!==e.add_feed_queue?(cur.add_feed_queue=!1,e.add_feed_queue=!1,ae.getNewQKey(0),!0!==e.add_queue&&(cur.add_queue=e.add_queue)&&setTimeout(ae.update.pbind(0),0)):t&&"search"!=cur.section&&"news"!=cur.section&&cur.section&&(cur.add_feed_queue=!1,e.add_feed_queue=!1),e.add_queues&&(cur.add_queues=e.add_queues,setTimeout(ae.update.pbind(0),0)),e.q){(0,C.val)(cur.feedEls.search,(0,D.replaceEntities)(e.q));let t=e.q;t.length>30&&(t=(0,A.trim)(t.substr(0,30))+"...")}e.last_view&&(cur.options.last_view=e.last_view),void 0!==e.feedback_list&&(cur.options.feedback_list=e.feedback_list),ae.searchUpdate(),"comments"!=cur.section||cur.reposts||(0,C.toggle)("comments_filters",!cur.reposts),(0,D.isString)(cur.all_shown_text)&&(0,C.val)("all_shown",cur.all_shown_text),(0,D.isString)(cur.show_more_text)&&(0,C.val)("show_more_link",cur.show_more_text),cur.empty_text&&(0,C.val)("feed_empty",cur.empty_text),cur.count>=0&&(0,C.re)("feed_error_wrap");let s=!((0,C.geByClass1)("feed_row",cur.rowsCont,"div")||!1),i=(0,C.ge)("feed_rows_next");if(s?((0,C.toggleClass)(cur.feedEls.wrap,"feed_is_empty",!(0,C.isVisible)("feed_error_wrap")),(0,C.hide)("all_shown"),(0,C.toggle)("show_more_link",cur.count>0&&!cur.all_shown)):!cur.all_shown||i&&i.firstChild?((0,C.hide)("all_shown"),(0,C.show)("show_more_link"),(0,C.removeClass)(cur.feedEls.wrap,"feed_is_empty")):((0,C.hide)("show_more_link"),(0,C.show)("all_shown"),(0,C.removeClass)(cur.feedEls.wrap,"feed_is_empty"),(0,C.re)(i)),e.playlistsData&&(e.playlistsData=JSON.parse(e.playlistsData),cur.pageVideosList=(0,A.extend)(cur.pageVideosList||{},e.playlistsData)),("notifications"==cur.section||"replies"==cur.section)&&cur.notify){let e=(0,C.ge)("feedback_row"+cur.notify);e&&e.onclick&&(setTimeout((function(){e.onclick(),(0,b.scrollToY)((0,C.getXY)(e)[1],0)}),l.browser.msie?100:0),delete cur.notify)}cur.feedSection&&cur.feedSection(e.section,e.subsection)},showMore:function(){if(cur.isFeedLoading)return;cur.disableAutoMore=!1;let e,t=(0,C.ge)("feed_rows_next");if(t){if(t.firstChild)for(;t.firstChild;)e=t.firstChild,cur.rowsCont.insertBefore(e,t),ae.onPostLoaded(e,!0);(0,C.re)(t)}"live"==cur.section&&(cur.all_shown=!0);let o=(0,C.ge)("show_more_link");if(cur.all_shown&&((0,C.hide)(o),(0,C.show)("all_shown")),"live"==cur.section)return;let s=!1,i=function(e){e.keyCode==k.KEY.ESC&&(s=!0)};(0,k.addEvent)(document,"keyup",i);let n=ae.getSectionParams(cur.section||"news");(0,A.extend)(n,{offset:cur.offset,from:cur.from,part:1,more:1,last_view:cur.options.last_view,games_news_items_allowed:cur.isGamesInRightBlock?0:1}),(0,A.extend)(n,cur.navParams),cur.options.feedback_list&&(n.list=cur.options.feedback_list),nav.objLoc.situational_suggest_id&&(n.situational_suggest_id=nav.objLoc.situational_suggest_id);let a=cur.section;ajax.post("al_feed.php?sm_"+cur.section,n,{onDone:function(e,t){if((0,k.removeEvent)(document,"keyup",i),a==cur.section)if(s)cur.disableAutoMore=!0;else{if(t){let e,s=(0,C.ce)("div");for(s.innerHTML=t;e=s.firstElementChild;){const t=(0,$.shouldFilterPaginatedRow)({row:e});var o;if(t.shouldFilter)console.info("Feed: skipping loaded row",e),s.removeChild(e),(0,r.randEnabled)(null!=(o=window.cur.feed_pagination_filtering_log_prob)?o:.01)&&(0,Q.feedLogFilteredRow)({filterReason:t.filterReason,ref:ae.getModuleRef(),row:e,rowsContainer:cur.rowsCont,section:cur.section});else cur.rowsCont.appendChild(e),ae.onPostLoaded(e,!0)}}(0,u.shortCurrency)(),ae.applyOptions(e),setTimeout(ae.scrollCheck,200)}},showProgress:function(){(0,L.lockButton)(o),cur.isFeedLoading=!0},hideProgress:function(){if((0,L.unlockButton)(o),cur.isFeedLoading=!1,o.seen){let e=Math.ceil((Date.now()-o.seen)/1e3),t=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,B.statlogsValueEvent)("feed_load_more_seen_time",e,t),o.seen=!1}},cache:1})},getTypesSection:function(){return"owner"===cur.section?te.Ranges.isUserId(cur.owner)?"person":"group":cur.section},checkFilter:function(e,t){let o,s,i=ae.getTypesSection(),n=cur.my_feed_types[i],r=cur.feed_types[i];"notifications"!=i?(!0===n&&(n=(0,A.clone)(r)),o=-1!=(s=(0,A.indexOf)(n,t)),o?n.splice(s,1):(n.push(t),n.length==r.length&&(n=!0)),(0,L.checkbox)(e),cur.my_feed_types[i]=n,ae.updateTypesCookie(),ae.setFiltersUpdatePage(),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)):ae.setNotifyFilter(e,t)},setFilter:function(e,t){let o=ae.getTypesSection(),s=(0,C.ge)(o+"_type_filter"),i=!0;"notifications"!=o&&((0,A.each)((0,C.geByClass)("_feed_filter_row",s,"div"),(function(){if((0,L.isChecked)(this)&&this!=e)return i=!1})),i?(cur.my_feed_types[o]=!0,(0,A.each)((0,C.geByClass)("_feed_filter_row",s,"div"),(function(){(0,L.checkbox)(this,!0)}))):((0,A.each)((0,C.geByClass)("_feed_filter_row",s,"div"),(function(){(0,L.checkbox)(this,!1)})),cur.my_feed_types[o]=[t],(0,L.checkbox)(e,!0)),ae.updateTypesCookie(),ae.setFiltersUpdatePage({force_expand_filters:1}),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu))},setFiltersUpdatePage:function(e){e=e||{};let t=nav.strLoc;if("updates"===cur.section){t.match(/\&filters\_expanded\=1/)||(0,C.ge)("updates_show_all_filters")&&!e.force_expand_filters||(t+="&filters_expanded=1"),t=t.replace(/\&filters\_shown\=([a-z\,]+)/,"");let o=(0,C.geByClass)("_feed_filter_row","feed_filters"),s=[];for(let e=0;e<o.length;e++)(0,C.hasClass)(o[e],"hide")||s.push(o[e].id.replace("filter_updates",""));t+="&filters_shown="+s.join(",")}nav.go(t)},setNotifyFilter:function(e,t){(0,L.checkbox)(e),cur.notifyPrefs||(cur.notifyPrefs={}),cur.notifyPrefs[t]=(0,L.isChecked)(e),clearTimeout(cur.saveNotifyPrefsTO),cur.saveNotifyPrefsTO=setTimeout((function(){let e=[];(0,A.each)(cur.notifyPrefs,(function(t,o){e.push((o?"":"-")+t)})),e=e.join(","),ajax.post("/al_feed.php",{act:"a_set_notify_prefs",prefs:e,feed:1,hash:cur.topNotifyHash},{onDone:function(e){(0,A.addTemplates)({top_notify_prefs:e}),(0,C.toggleClass)("top_notify_pref_"+t,"checked",cur.notifyPrefs[t]),cur.notifyPrefs={},window.TopNotifier&&TopNotifier.invalidate(),nav.go(nav.strLoc),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)}})}),500)},updateTypesCookie:function(){let e=[];(0,A.each)(cur.my_feed_types,(function(t,o){"tabs"!=t&&e.push(!0===o?"*":o.join(","))})),(0,v.setCookie)("remixfeed",e.join("."),365)},toggleFeedTop:function(e,t,o){let s=(0,C.geByClass1)("_ui_toggler",e),i="top";switch((0,C.toggleClass)(s,"on"),cur.section){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"list":i=(0,C.hasClass)(s,"on")?"top":"recent";break;case"articles":i=(0,C.hasClass)(s,"on")?"suggested":"top";break;case"podcasts":i=(0,C.hasClass)(s,"on")?"recent":"top"}ae.switchSubSection(i,t,o)},switchList:function(e){cur.prevList=cur.list,cur.list=e,ae.setSection("list",1),uiRightMenu.go((0,C.geByClass1)("feed_section_list"+e),!1,!1),ae.go(ae.getSectionParams(cur.section))},setSearchSort:function(e){cur.search_sort_value=e,ae.submitSearch()},_activateReplyBox:function(e,t,o){(t||{}).cancelBubble=!0;let s=(0,C.ge)("reply_box"+e);if(cur.editing&&cur.editing!=e&&cur.notifyReplyData&&cur.notifyReplyData[cur.editing].disabled&&ae.notifyCheckHideReply(cur.editing,(window.event||{}).target),s&&(0,C.isVisible)(s))return void ae.notifyCheckHideReply(e,!1);if(void 0===cur.notifyReplyData&&(cur.notifyReplyData={}),cur.notifyReplyData[e]=o,o.disabled){if(s)(0,C.show)(s);else{(0,C.ge)("feedback_row"+e).appendChild((0,C.se)((0,C.rs)(cur.options.feedback_dis,{item:e,text:o.disabled})))}return void setTimeout((function(){cur.editing=e}),0)}(0,C.show)(s),Wall.showEditReply(e,t);let i=(0,C.ge)("reply_field"+e);i.setAttribute("placeholder",o.ph),window.Emoji&&Emoji.val(i,o.greet.replace(/ $/,"&nbsp;")),(0,C.data)(i,"send",ae.notifySendReply),(0,C.removeClass)("reply_box"+e,"clear_fix")},notifyClick:function(e,t,o){let s=(0,C.ge)("feedback_row"+e);Wall.checkPostClick(s,t)&&ae._activateReplyBox(e,t,o)},blindNotifyReply:function(e,t,o){ae._activateReplyBox(e,t,o)},notifySendReply:function(e,t,o){let s=cur.notifyReplyData[e];if(!s||s.sending)return;let i,n=(0,C.ge)("reply_field"+e),r=(0,C.ge)("reply_button"+e),a=(0,C.ge)("feedback_row"+e),l=n&&(0,C.data)(n,"composer");if(o.stickerId)i={message:"",attach1_type:"sticker",attach1:o.stickerId};else{if(i=l?Composer.getSendParams(l,ae.notifySendReply.pbind(e)):{message:(0,A.trim)(Emoji.editableVal(n))},i.delayed)return;if(!i.attach1_type&&(!i.message||s.greet&&!s.greet.indexOf(i.message)))return void Emoji.editableFocus(n,!1,!0)}(0,A.extend)(i,{act:"post",from:"feedback",item:e},s.params||{});let c=(0,C.ge)("reply_as_group"+e);c&&(0,C.isVisible)((0,C.domPN)(c))&&(i.from_oid=(0,C.domData)((0,C.domClosest)("_submit_post_box",c),"from-oid")),s.sending=1,ajax.post("al_wall.php",Wall.fixPostParams(i),{onDone:function(t,o){if(delete s.sending,l?Composer.reset(l):window.Emoji&&Emoji.val(n,""),n.autosize&&n.autosize.update(),ae.notifyHideReply(e),o){let e=(0,C.geByClass1)("_answer_wrap",a);(0,C.val)(e,o),(0,C.show)(e)}else t&&(0,w.showDoneBox)(t)},onFail:function(){delete s.sending},showProgress:()=>(0,L.lockButton)(r),hideProgress:()=>(0,L.unlockButton)(r)})},notifyCheckHideReply:function(e,t){let o=cur.notifyReplyData&&cur.notifyReplyData[e];if(o&&!o.sending&&(0,C.isVisible)("reply_box"+e)){if(cur.editing=!1,!o.disabled){let t=(0,C.ge)("reply_field"+e),s=(0,A.trim)(window.Emoji?Emoji.editableVal(t):""),i=Wall.hasComposerMedia(t);if(!t||i||s&&!o.greet||o.greet.indexOf(s))return}ae.notifyHideReply(e)}},notifyHideReply:function(e){cur.editing==e&&(cur.editing=!1);let t=(0,C.ge)("feedback_row"+e);(0,C.removeClass)(t,"reply_box_open"),(0,C.hide)("reply_box"+e);let o=cur.replySubmitSettings;o&&o.tt&&o.tt.el&&o.tt.destroy()},notifyPostTooltip:function(e,t,o,s){let i=(o||{}).reply,n="al_wall.php";t.indexOf("topic_comment")?t=t.replace("wall_reply","").replace("wall",""):(n="al_board.php",t=t.replace("topic_comment","")),s=s||{},(0,T.showTooltip)(e,(0,A.extend)({url:n,params:(0,A.extend)({act:"post_tt",post:t,self:1,from:"feedback"},o||{}),slide:15,shift:[!i||i%2?27:329,6],ajaxdt:100,showdt:400,hidedt:800,dir:"auto",className:"rich wall_tt wall_module _feed_notification feed_notification",appendParentCls:"scroll_fix_wrap"},s))},getModuleRef:function(){let e=cur.module||"feed_other";return"feed"==cur.module&&(e="news"==cur.section?cur.subsection?"feed_news_"+cur.subsection:"feed_news":"podcasts"===cur.section?e+"_"+cur.section+("recent"===cur.subsection?"_my":""):cur.section?e+"_"+cur.section:"feed_other"),e},ignoreItem:function(e,t,o,s,i,n=0,r="",a=!0){let l;switch(e){case V.BlockTypeIds.UXPollBlock:case V.BlockTypeIds.VideosForYou:case V.BlockTypeIds.VideoPostcard:case V.BlockTypeIds.PhotoRecognize:case V.BlockTypeIds.RecommendedNarratives:case V.BlockTypeIds.BookmarkGame:case V.BlockTypeIds.AchievementGame:case V.BlockTypeIds.YoulaRecommendationsCarousel:case V.BlockTypeIds.AliExpressRecommendationsCarousel:l=(0,C.ge)(e);break;default:l=(0,C.ge)("post"+e)}if(!l)return;let c=l.getAttribute("data-ad"),d=(0,C.geByClass1)("ui_actions_menu_wrap",l),u=ae.getModuleRef();return d&&uiActionsMenu.toggle(d,!1),(0,_.revertLastInlineVideo)(l),a&&(t.includes("caption")?cur.feedEntriesHTML[e+"_ignored"]=(0,C.val)(l):cur.feedEntriesHTML[e]=(0,C.val)(l)),new Promise(((d,_)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:e,feed_raw:t,caption_type:s,uids:i,hash:o,ad_data:c,ref:u,session_id:cur.feed_session_id,module:ae.getModuleRef(),position:(0,A.indexOf)((0,C.domPN)((0,C.domPN)(l)).children,(0,C.domPN)(l)),reason_id:n,track_code:r},{onDone:function(e,t){ae.destroyPhotoCarouselByPost(l),a&&((0,C.val)(l,e),(0,S.evalWithLogging)(t)),d()},onFail:()=>(_(),!0),stat:[window.jsc("web/privacy.js"),"privacy.css"]})}))},unignoreItem:function(e,t,o,s){let i=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_item",post_raw:e,feed_raw:t,hash:o,ref:i},{onDone:function(){t.includes("caption")?(0,C.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):ae.restorePost(e)},showProgress:s&&L.lockButton.pbind(s),hideProgress:s&&L.unlockButton.pbind(s)})},reportIgnoredItem:function(e,t){ajax.post("al_wall.php",{act:"spam",post:e,hash:t},{onDone:function(t){let o=(0,C.ge)("post"+e),s=o&&(0,C.geByClass1)("feed_post_report",o,"div");(0,C.val)(s,t)}})},ignoreOwner:function(e,t,o,s,i){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,C.val)("post"+e));let n="list"==cur.section&&cur.list||0,r=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,type:o,hash:s,list:n,ref:r},{onDone:function(o){(0,C.val)("post"+e,o),(0,A.each)((0,C.geByClass)("post",cur.rowsCont),(function(o,s){let i=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);i&&i[1]!=e&&(!i[4]&&i[2]==t||i[4]&&i[3]==t)&&((0,_.revertLastInlineVideo)(this),(0,C.hide)(this.parentNode))}))},showProgress:()=>O.FlatButton.lock(i),hideProgress:()=>O.FlatButton.unlock(i)})},unignoreOwner:function(e,t,o,s){let i="list"==cur.section&&cur.list||0,n=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,hash:o,list:i,ref:n},{onDone:function(o){e?(0,C.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,C.val)("ignore_row"+t,o),(0,A.each)((0,C.geByClass)("post",cur.rowsCont),(function(e,o){let s=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);s&&(!s[4]&&s[2]==t||s[4]&&s[3]==t)&&(0,C.show)(this.parentNode)}))},showProgress:()=>O.FlatButton.lock(s),hideProgress:()=>O.FlatButton.unlock(s)})},ignoreGroupWall:function(e,t,o,s){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,C.val)("post"+e));let i=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,ignore_type:"group_wall",hash:o,ref:i},{onDone:function(t){(0,C.val)("post"+e,t)},showProgress:()=>O.FlatButton.lock(s),hideProgress:()=>O.FlatButton.unlock(s)})},unignoreGroupWall:function(e,t,o,s){let i=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,ignore_type:"group_wall",hash:o,ref:i},{onDone:function(o){e?(0,C.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,C.val)("ignore_row"+t,o)},showProgress:()=>O.FlatButton.lock(s),hideProgress:()=>O.FlatButton.unlock(s)})},ignoreLiveOwner:function(e,t,o,s){let i=(0,C.ge)("post"+e),n=(0,C.geByClass1)("ui_actions_menu_wrap",i);n&&uiActionsMenu.toggle(n,!1),(0,_.revertLastInlineVideo)(i),cur.feedEntriesHTML[e+"_ignored"]=(0,C.val)("post"+e),ajax.post("al_feed.php?act=a_ignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,C.val)("post"+e,t)},showProgress:s&&L.lockButton.pbind(s),hideProgress:s&&L.unlockButton.pbind(s)})},unignoreLiveOwner:function(e,t,o,s){ajax.post("al_feed.php?act=a_unignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,C.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"])},showProgress:s&&L.lockButton.pbind(s),hideProgress:s&&L.unlockButton.pbind(s)})},unsubscribe:function(e,t,o){(0,k.triggerEvent)((0,C.ge)("post_delete"+e),"mouseout"),cur.feedEntriesHTML[e]=(0,C.ge)("post"+e).innerHTML;let s=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);s&&ajax.post("al_feed.php",{act:"unsubscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[s[2]],owner_id:s[1],place_id:s[3],hash:t,feed:1},{onDone:function(t){(0,C.ge)("post"+e).innerHTML=t.replace("%post_raw%",e)},showProgress:o&&L.lockButton.pbind(o),hideProgress:o&&L.unlockButton.pbind(o)})},subscribe:function(e,t,o){let s=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);s&&ajax.post("al_feed.php",{act:"subscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[s[2]],owner_id:s[1],place_id:s[3],hash:t,feed:1},{onDone:ae.restorePost.pbind(e),showProgress:o&&L.lockButton.pbind(o),hideProgress:o&&L.unlockButton.pbind(o)})},restorePost:function(e){let t;if(e===V.BlockTypeIds.PhotoRecognize)t=(0,C.ge)(e);else t=(0,C.ge)("post"+e);if(!t)return;t.innerHTML=cur.feedEntriesHTML[e],ae.initPhotoCarouselInPost(t);let o=(0,C.geByClass1)("input_back",t,"div"),s=(0,C.geByTag1)("textarea",t);s&&(s.placeholder=o.innerHTML,o.parentNode.removeChild(o),(0,P.placeholderSetup)(s))},toggleReposts:function(e,t,o,s){if((0,k.checkEvent)(s))return!0;let i=(0,C.ge)("feed_reposts_more"+t+"_"+o),n=(0,C.ge)("feed_reposts"+t+"_"+o),r=0,a=(0,b.scrollGetY)(),l=(0,C.isVisible)(n);if(n)return l?r-=n.offsetHeight+(0,A.intval)((0,C.getStyle)(e,"marginTop")):((0,C.domPN)((0,C.domPN)(n))||{}).bits=0,(0,C.toggle)(n,!l),O.FlatButton.setLabel(i,l?p.getLang("news_show_X_reposts",n.childNodes.length):p.getLang("news_hide_reposts")),r&&(0,b.scrollToY)(a+r+(0,C.getSize)("page_header")[1],0),!1;i&&(0,C.re)(i.parentNode.parentNode)},editHidden:function(){return(0,E.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")]}),cur.onOListSave=ae.onHiddenSave,!1},onHiddenSave:function(e,t,o,s){let i=(0,w.curBox)(),n={act:"a_ignore_olist",no_reposts:(0,C.ge)("feed_list_reposts")&&!(0,L.isChecked)("feed_list_reposts")?1:0,hash:s.hash};return(0,r.partConfigEnabled)("use_only_black_list_param_to_process_owners")?n.Black=t.join(","):e.length<t.length?n.White=e.join(","):n.Black=t.join(","),ajax.post("al_feed.php",n,{onDone:function(e,t){i.hide(),ae.switchSection("photos"==cur.section?"photos":"news")},showProgress:L.lockButton.pbind(i.btns.ok[0]),hideProgress:L.unlockButton.pbind(i.btns.ok[0])}),!1},addList:function(){return ae.editList(-1)},editList:function(e){return ae.toggleTabsMenu(!1,0),(0,E.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",list_id:e,height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")],onFail:function(e){return setTimeout((0,E.showFastBox)({title:p.getLang("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},e,p.getLang("global_close")).hide,4500),!0}}),cur.onOListSave=ae.onListSave.pbind(e),!1},onListSave:function(e,t,o,s,i){let n=(0,C.val)("feed_list_name");if(!(0,A.trim)(n))return(0,L.notaBene)("feed_list_name"),!1;if(!t.length)return!1;let r=(0,w.curBox)();return ajax.post("al_feed.php",{act:"a_save_list",hash:cur.tabs_hash,White:t.join(","),title:n,list_id:e,no_reposts:(0,C.ge)("feed_list_reposts")&&!(0,L.isChecked)("feed_list_reposts")?1:0},{onDone:function(t){let o=(0,C.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu),s=(0,C.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu);const i=uiRightMenu.selectLabelNode(o);(0,C.val)(i,(0,A.clean)(n)),(0,C.val)((0,C.geByClass1)("ui_actions_menu_item_label",s),(0,A.clean)(n)),r.hide(),e>0?ae.switchList(e):nav.go({0:"feed",section:"list",list:t},null,{nocur:!0})},onFail:function(e){return(0,C.val)("feed_list_error",e),(0,C.show)("feed_list_error_wrap"),!0},showProgress:L.lockButton.pbind(r.btns.ok[0]),hideProgress:L.unlockButton.pbind(r.btns.ok[0])}),!1},deleteList:function(e,t,o,s){if(s&&(0,k.cancelEvent)(s),e<=0)return!1;if(!o){ae.toggleTabsMenu(!1,0);const o=(0,E.showFastBox)({title:p.getLang("news_delete_list_sure_title"),bodyStyle:"padding: 20px; line-height: 160%;"},p.getLang("news_delete_list_sure").replace("{list}",t),p.getLang("global_delete"),(function(){ae.deleteList(e,t,!0)}),p.getLang("global_cancel"),(function(){o.hide()}));return}const i=(0,w.curBox)();ajax.post("al_feed.php",(0,A.extend)({act:"a_delete_list",list_id:e,hash:cur.tabs_hash}),{onDone:function(){(0,C.re)((0,C.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu)),(0,C.re)((0,C.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu)),boxQueue.hideAll(),"list"==cur.section&&cur.list==e&&ae.switchSection("news")},showProgress:L.lockButton.pbind(i.btns.ok[0]),hideProgress:L.unlockButton.pbind(i.btns.ok[0])})},saveTabs:function(){ajax.post("al_feed.php",{act:"a_save_tabs",hash:cur.tabs_hash,tabs:cur.my_feed_types.tabs.join(",")},{hideProgress:function(){(0,D.isFunction)(cur.onSaveTabs)&&cur.onSaveTabs(),cur.onSaveTabs=null}})},statsShow:function(e,t){return(0,m.showWiki)({w:"stats"+(cur.source||"")},!1,e)},editLiveBlacklist:function(e){(0,k.cancelEvent)(e),(0,E.showBox)("al_video.php?act=live_blacklist_box",{},{onDone:function(e,t){F.default.init(e,t)},stat:[window.jsc("web/videoview.js"),"videoview.css",window.jsc("web/indexer.js")]})},_scrollCheck:e=>{if("scroll"!=(e=e||{}).type&&(!cur.idleManager||cur.idleManager.isIdle))return;let t,o,s,i,n,r,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=(0,b.scrollGetY)(),c=0,d=[];if(!cur.isFeedLoading&&!cur.disableAutoMore){const e=(0,C.ge)("show_more_link");(0,C.isVisible)(e)&&l+a+1e3>e.offsetTop&&ae.showMore()}if((0,C.domPN)(cur.topRow)==cur.rowsCont&&"feed_rows_next"!=(cur.topRow||{}).id||(cur.topRow=(0,C.domFC)(cur.rowsCont)),!vk.id||!cur.topRow||"feed_rows_next"==cur.topRow.id||((window.curNotifier||{}).idle_manager||{}).is_idle&&"init"!=e.type)return;let u=[];for(i=(0,C.domPS)(cur.topRow);i;i=(0,C.domPS)(i))cur.topRow.offsetTop>l&&(cur.topRow=i),i.unseen||(i.unseen=!0,u.push((0,q.postsGetRaws)(i)),(0,q.isAdWithShowOff)(i)&&Wall.triggerAdStat((0,C.domFC)(i),"show_off"));for(Page.postsUnseen(u),i=cur.topRow;i&&(t=c||i.offsetTop,!(t>=l+a));i=n)if(n=(0,C.domNS)(i),"feed_rows_next"==(n||{}).id&&(n=null),c=n?n.offsetTop:t+i.offsetHeight,c<l&&n&&(cur.topRow=n),LongView&&LongView.register(i,"feed"),U.longView.registerElement(i),r=i.bits||0,!(r>=3)){var _,p;if(cur.feedSeenPostHeight>0)cur.feedPostHeaderHeight=cur.feedPostHeaderHeight||(0,C.getH)(null==(p=i)||null==(_=p.querySelector)?void 0:_.call(p,".post_header, .js-PostHeader")),o=t+cur.feedPostHeaderHeight,s=o+cur.feedSeenPostHeight,i.postBottom||(i.postBottom=o+(0,C.getH)((0,C.geByClass1)("wall_text",i))),s=Math.min(s,i.postBottom),(0,C.geByClass1)("feed_friends_recomm",i)&&(s+=.35*i.clientHeight),r|=(o>=l&&o<l+a?1:0)|(s>=l&&s<l+a?2:0);else r|=(t>=l&&t<l+a?1:0)|(c>=l&&c<l+a?2:0);if(r&&(i.bits=r,3==r)){let e=(0,q.postsGetRaws)(i);var f;if((0,q.isAdWithLongImpressionOnly)(i)||(0,q.isAutoplayAd)(i)?Wall.triggerAdStat((0,C.domFC)(i),"impression"):d.push(e),(0,C.geByClass1)("VideosForYouGallery",i))null==(f=window.FeedVideosForYou)||f.viewBlock();else if((0,C.geByClass1)("FeedVideoPostcard",i)){var h;null==(h=window.FeedVideoPostcard)||h.viewBlock()}else if(i.querySelector(".UxpollsBlock")){const e=i.querySelector(".UxpollsBlock").dataset.trackCode;(0,J.viewUXPollsBlock)(e)}else if((0,C.geByClass1)("feed_friends_recomm",i)){var g;let t=(0,C.geByClass1)(y.UI_GALLERY_CLASSNAME,i);const o=(0,C.domData)(t,"from");let s=(0,C.domData)(t,"code")||"";(0,I.friendsRecommLogSave)(["view_block",o,e.index,(0,D.vkNow)(),e.module,s],!0);null==(g=(0,y.uiGetGallery)(t))||g.setGalleryViewed()}else if((0,C.geByClass1)("js-feed_groups_recomm",i))(0,R.feedInitialViewRecommendedGroupsTrigger)(i,e.index);else if(i.querySelector("#feed_mini_apps_recomm"))window.RecommendedMiniApps.viewBlock();else if(i.querySelector(`#${oe.FEED_RECOGNIZE_PHOTO_POST_ID}`)){var m;null==(m=(0,se.recognizeBlockState)().block)||m.viewBlock()}}}d=d.concat(U.longView.process(l,a)),LongView&&LongView.onScroll(l,a),Page.postsSeen(d);let w=(0,C.ge)("show_more_link"),v=w.offsetTop;if(!w.seen&&v>=l&&v<l+a){w.seen=Date.now();let e=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,B.statlogsValueEvent)("feed_load_more_seen",(0,L.isButtonLocked)(w),e)}},searchUpdate:function(){if(cur.feedEls.search&&p.getLang("news_search")){let e;e=cur.section.indexOf("photos")?cur.section.indexOf("articles")?p.getLang("news_search"):p.getLang("news_articles_search"):p.getLang("news_photo_search"),cur.feedEls.search.setAttribute("placeholder",(0,A.clean)((0,D.unclean)(e))),(0,P.placeholderInit)(cur.feedEls.search,{reload:!0})}},go:function(e,t,o){if(e=e||{},cur._back_local){let w=cur._back_local;w.back?(0,g.showBackLink)(w.back[0],w.back[1],w.back[2]):(0,g.showBackLink)(!1),cur._back_local=!1}if(cur.feedReq)try{cur.feedReq.abort()}catch(v){(0,f.debugLog)(v)}cur.feedReqObj=null;let s=1,i=function(){cur.isFeedLoading=!1};(l.browser.msie||o)&&(s=!1,i=cur.onFrameBlocksDone),cur.wasScroll=!!o&&(0,b.scrollGetY)();let r=window.event&&window.event.target;if(r&&"search"===e.section&&!e._post){let k=nav.getPostParams(r);if(k.post_id&&k.post_click_type){function y(t,o){t&&!e[o]&&(e[o]=t)}y(k.post_id,"_post"),y(k.post_click_type,"_post_click_type"),y(k.post_click_url,"_post_click_url"),y(k.post_click_mention_id,"_post_click_mention_id"),y(k.post_click_cc_key,"_post_click_cc_key"),y(k.ad_data,"_post_ad_data"),y(k.ad_block_unique_id,"_post_ad_block_unique_id")}}let a=cur.feedReqObj={},c={},d=0;const p=()=>{if(!cur.feedReqObj||cur.feedReqObj!==a)return;if(++d>500)return;let e=!0,t={};(0,A.each)(c,(function(o){let s=(0,C.ge)(o);if(s&&(0,C.hasClass)(s,"feed_row"))return s.firstChild?void ae.onPostLoaded(s,!0):(t[o]=!0,void(e=!1))})),e||(c=t,setTimeout(p,100))},m=+new Date;cur.feedReq=ajax.post("al_feed.php",(0,A.extend)(e,{part:1}),{onDone:function(o,i,r,a,l){if(!cur.feedEls)return;if((0,_.revertLastInlineVideo)(),(0,C.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,window.tooltips&&tooltips.destroyAll((0,C.ge)("feed_rows")),boxQueue.hideAll(),layers.fullhide&&!cur.storyLayer&&layers.fullhide(!0),s&&ajax._framenext(),window.wall&&Wall.cancelEdit(),boxQueue.hideAll(),t?t(i||""):(0,C.val)(cur.rowsCont,i||""),ae.applyOptions(o,2),!e.norecom&&"notifications"!==e.section){(0,C.val)("feed_recommends",o.recommends||""),(0,C.toggle)("feed_recommends",!!o.recommends);let e="/al_feed.php#"+(0,n.toQueryString)({act:"recom"});ajaxCache[e]&&delete ajaxCache[e],(0,C.toggleClass)(cur.feedEls.wrap,"feed_asc_shown",(0,C.geByClass1)("feed_asc_block","feed_recommends"))}let d;if(r&&(0,S.evalWithLogging)(r),(0,h.checkPageBlocks)(),(0,b.scrollToTop)(0),(0,u.shortCurrency)(),cur.feedEls.wall)switch(d="clear_fix",cur.section){case"updates":d+=" page_block feed_updates";break;case"photos_search":d+=" page_block feed_found_photos";break;case"notifications":d+=" page_block feed_notifications";break;case"coronavirus":case"stayhome":d+=" feed_wall--with-header"}if((0,C.ge)("feed_wall").className=d,(0,C.toggle)("feed_recommends",(0,A.inArray)(cur.section,["news","recommended","videos"])),(0,C.val)("feed_app_widget",a||""),(0,C.toggle)("feed_app_widget",a),a&&l&&(0,S.evalWithLogging)(l),cur.rowsCont&&cur.rowsCont.children&&((0,A.each)(cur.rowsCont.children,(function(){let e=this;(0,C.hasClass)(e,"feed_row")&&(!e.id||e.firstChild?ae.onPostLoaded(e,!0):c[e.id]=!0)})),(0,D.isEmpty)(c)||setTimeout(p,10)),cur.q){const e="photos_search"===cur.section?B.servicePhotos:B.serviceNews,t=+new Date-m;(0,B.saveSearchAttemptStats)(e,0,cur.count,(0,C.val)(cur.feedEls.search),0,cur.event_bits,t,"",B.blockNameEmpty,"",!1,0,null,cur.sort),(0,G.updateCounters)(location.href,document.referrer)}setTimeout(ae.scrollCheck,200)},onFail:function(){return!1},showProgress:function(){cur.isFeedLoading=!0},frame:s,ads:1,hideProgress:i})},onFeedSearch:function(e,t,o,s){t||(0,B.removeSearchPositionTracker)("photos");let i,n,r=s||cur.section;if(r.indexOf("photos")?r.indexOf("trends")?r.indexOf("articles")?(i="search",n="news"):(i="articles_search",n="articles"):(i="trends_search",n="trends"):(i="photos_search",n="photos"),"search"==i||ae.hasSearchParams(ae.getSectionParams(i))){i!=cur.section&&ae.setSection(i,1);let o=ae.getSectionParams(i);cur.disableSort&&(o.disable_sort=1),ae.go(o),window.searcher&&j.searcher.highlightHotHashtag(t||(0,C.val)(e))}else ae.go(ae.getSectionParams(n));uiSearch.onChanged(e),uiSearch.showProgress(e)},onSearchChange:function(){return setTimeout(ae.onFeedSearch.pbind(cur.feedEls.search),0),!1},init:function(e){(0,c.feedLoadingStats)(e),setTimeout((function(){(0,A.each)((0,C.geByTag)("textarea",cur.rowsCont),(function(){(0,P.placeholderSetup)(this)})),cur.q&&(0,B.saveSearchAttemptStats)("photos_search"===cur.section?B.servicePhotos:B.serviceNews,0,cur.count,(0,C.val)(cur.feedEls.search),"0",cur.event_bits,"0","",B.blockNameEmpty,"",!1,0,null,cur.sort)}),200),(0,A.extend)(cur,{oid:e.user_id,postTo:e.user_id,phCache:{},phShown:{},subsections:{},feed_session_id:e.feed_session_id||"na",module:"feed",isFeedLoading:!1,customSearchChange:ae.onSearchChange,navParams:e.nav_params||{},isGamesInRightBlock:e.is_games_in_right_block,wallPostCb:function(){"news"==cur.section?setTimeout(ae.update.pbind(1),1e3):setTimeout(ae.switchSection.pbind("news"),1e3)},idleManager:function(){let e,t,o;const s={isIdle:!1,onIdle:null,onUnIdle:null,stop:function(){(0,k.removeEvent)(document,"mousemove keydown",e),(0,k.removeEvent)(window,"focus blur",o)},start:function(){l.browser.mobile||(e=function(){cur.idleManager&&s.isIdle&&(s.isIdle=!1,s.onUnIdle&&s.onUnIdle())},t=function(){cur.idleManager&&(s.isIdle=!0,s.onIdle&&s.onIdle())},o=function(o){"focus"==o.type?e():t()},(0,k.addEvent)(window,"focus blur",o))}};return s}(),currentModule:function(){return"videos"==cur.section?"feed_videos":cur.module},onFrameBlocksDone:function(){cur.isFeedLoading=!1,(0===cur.wasScroll||cur.wasScroll>0||!1===cur.wasScroll&&"search"==cur.section&&cur.q&&"#"==cur.q.substr(0,1))&&(cur.wasScroll=!1)},feedEntriesHTML:{},feedUnreadCount:0,feedInitialTitle:"",feedUnread:[],feedToSort:[],feedEls:{wrap:(0,C.ge)("main_feed"),wall:(0,C.ge)("feed_wall"),search:(0,C.ge)("search_query"),rmenu:(0,C.ge)("feed_rmenu"),newPosts:(0,C.ge)("feed_new_posts")}}),cur.nav.push((function(e,t,o,s){if(void 0!==e[0])return;let i=(0,A.clone)(o);if(delete i[0],void 0===e.section||(0,A.inArray)(cur.section,["notifications","replies"])==(0,A.inArray)(e.section,["notifications","replies"])){if("notifications"==cur.section)return ae.switchNotifyList(o.list||"all",(0,A.extend)(i,s.params||{})),!1;if(e.list)return ae.switchList(e.list),!1;if(void 0!==e.section&&ae.switchSection(e.section||"news",!1,!0),e.notify)return!1;if(e.q)return(0,C.val)(cur.feedEls.search,e.q),ae.onFeedSearch(cur.feedEls.search),!1;if(delete e.subsection,(0,D.isEmpty)(e)){let e=(0,C.geByClass1)("feed_section_"+(t.section||"news")+(t.list||""));e&&uiRightMenu.go(e,!1,!1)}return cur.likesTabTT&&cur.likesTabTT.destroy(),(0,ne.isFeedPostDurationStatsFixEnabled)()&&ae.onFeedPageLeaveHandler(),ae.go((0,A.extend)(i,s.params||{})),!1}})),cur.idleManager.onUnIdle=ae.updateTitle,cur.idleManager.onIdle=ae.reSortItems,cur.options=cur.options||{},(0,A.extend)(cur.options,e),ae.applyOptions(e,3),cur.rowsCont=e.wallCont=(0,C.ge)("feed_rows"),Wall.init(e),cur.rowsCont&&cur.rowsCont.children&&(0,A.each)(cur.rowsCont.children,(function(){let e=this;(0,C.hasClass)(e,"feed_row")&&e.firstChild&&ae.onPostLoaded(e,!0)})),cur._back={text:p.getLang("news_return_to_news"),show:[ae.startEvents],hide:[function(){clearInterval(cur.updateInt),(0,k.removeEvent)(window,"scroll",ae.scrollCheck),(0,k.removeEvent)(window,"resize",ae.scrollCheck),(0,ne.isFeedPostDurationStatsFixEnabled)()&&ae.onFeedPageLeaveHandler(),cur.idleManager.stop(),clearTimeout(cur.lp_error_to),window.cur.feedScrollCheckIntervalID&&clearInterval(window.cur.feedScrollCheckIntervalID)}],loc:!1},ae.startEvents(e),(0,ee.initCheckValidationPhone)(),(0,I.friendsRecommLogSend)(!0),setTimeout((function(){ae._scrollCheck({type:"init"})}),200);try{const e=nav.objLoc.storybox;if(e){const t=JSON.parse(atob(e));t&&(0,re.storyPublisherInitAsync)([(0,s._)({photoUrl:t.url?t.url:t.blob,stickers:t.stickers,attachment:t.attachment,serviceInfo:t.service_info},t)])}}catch(e){console.log(e)}},startEvents:function(){var e,t;cur.idleManager.start(),cur.updateInt=setInterval((function(){ae.update(0)}),2e4),(0,k.addEvent)(window,"scroll",ae.scrollCheck),(0,k.addEvent)(window,"resize",ae.scrollCheck),(null==(t=cur)||null==(e=t.options)?void 0:e.pagination_time_interval_check_enabled)&&(0,d.feedPaginationIntervalCheckInit)((function(){ae._scrollCheck()}))},onFeedPageLeaveHandler:()=>{window.cur.topRow&&Page.postsUnseen([(0,q.postsGetRaws)(window.cur.topRow)])},mentionClick:function(e,t){let o=e,s=((e.getAttribute("mention")||"").match(/^bp(-?\d+_\d+)$/)||{})[1];if(!s)return nav.go(e,t);for(s=s.split("_");e;e=e.parentNode){let i=(e.id||"").match(/^replies(-?\d+_topic\d+)$/);if(i){if(i[1].split("_")[0]==s[0])return Wall.showReply(o,i[1],s[0]+"topic_"+s[1],t);break}}return nav.go(e,t)},toggleCustomFeedTab:function(e,t){return(0,C.hasClass)(e,"feed_tab_link_hidden")?((0,C.removeClass)(e,"feed_tab_link_hidden"),(0,v.setCookie)("remixcustom_feed_added",t)):(0,L.lockButton)(e),ae.checkTabsFilter((0,C.geByClass1)("_feed_custom_"+t),t)},recomSubscribe:function(e,t,o){let s,i,n=o?t:(0,C.domPS)(t),r=o?(0,C.domNS)(t):t;o?(s="/al_feed.php",i={act:"subscr",oid:e,from:nav.objLoc.section,hash:(0,C.val)("feed_recom_hash")}):(s="/al_fans.php",i={act:"unsub",oid:e,hash:(0,C.val)("feed_recom_hash"),no_response:1}),ajax.post(s,i,{onDone:function(){(0,C.toggle)(n,!o),(0,C.toggle)(r,!!o),"recommended"!=nav.objLoc.section&&nav.go(nav.objLoc,!1,{params:{norecom:1}})},showProgress:()=>(0,L.lockButton)(t),hideProgress:()=>(0,L.unlockButton)(t)})},clickBlogReminder:function(e,t,o,s,i,n){if(ajax.post("blog.php",{act:"click_reminder",hash:s,nid:t,accept:1,target:n},{onDone:function(){}}),"_blank"!==(0,C.attr)(e,"target"))return(0,k.cancelEvent)(i),nav.go(o)},hideBlogReminder:function(e,t,o,s){o&&(0,k.cancelEvent)(o),(0,C.re)("feed_blog_reminder"),ajax.post("blog.php",{act:"hide_reminder",hash:e,nid:t,accept:0,target:s},{onDone:function(){}})},preloadVideos:function(e){function t(e){let t=new XMLHttpRequest;t.open("GET",e),t.send()}e&&cur.videoAutoplayScrollHandler&&(cur.videoAutoplayPreloaded=cur.videoAutoplayPreloaded||{},(0,A.each)(e,(function(e,o){t(o.index_url),t(o.index_url.replace(/index-(.+).m3u8/,"seg-1-$1.ts")),cur.videoAutoplayPreloaded[o.video]=o.quality})))},expandJoinedGroups:function(e,t){return(0,k.cancelEvent)(t),(0,C.show)((0,C.geByClass1)("feed_groups_hidden_list",e.parentNode)),(0,C.re)(e),!1},showAllFilters:function(e){(0,C.re)(e);let t=(0,C.geByClass)("hide",e.parentNode);for(let e=0;e<t.length;e++)(0,C.removeClass)(t[e],"hide")},toggleSubscription:function(e,t,o,s,i){let n=(0,C.domClosest)("_ui_menu_wrap",e);n&&uiActionsMenu.toggle(n,!(0,C.hasClass)(n,"shown")),Page.toggleSubscription(e,t,o,s,i,(function(e,t){(0,C.geByClass)("post",cur.rowsCont).forEach((function(o){let i=o.id.split("_"),n=+i[i.length-2].replace("post","");if(s!==n)return;let r=(0,C.geByClass1)("page_action_subscribe",o);(0,C.val)(r,e),(0,C.domData)(r,"act",t)}))}))},onPostLoaded:function(e,t){Wall.onPostLoaded(e,t),this.initPrettyCardGallery(e),t&&!(0,C.hasClass)(e,"_post")&&ae.initPhotoCarouselInPost((0,C.geByClass1)("_post",e))},openPostSuggest:function(e,t,o){if(t&&null!=t.type)switch(t.type){case 1:const i=t.postData,n=t.notHideByClick;let r=(0,C.ge)("post_field");return void((r?(0,A.trim)(r.innerHTML).replace("<br>",""):"")||cur.wallAddMedia&&cur.wallAddMedia.attachCount()?(0,E.showFastBox)({title:p.getLang("news_suggest_alert_title")},p.getLang("news_suggest_alert_text"),p.getLang("global_yes"),(function(){(0,w.curBox)().hide(),s(i,n)}),p.getLang("global_cancel")):s(i,n));case 4:return window.open(t.link),void ae.suggestionEvent(e,"open",o,t.notHideByClick)}function s(t,s=!1){cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),cur.options&&(cur.options.situational_suggest_id=e),t[0]=t[0].replace(/<br>/g,"\n");let i=cur.editing;delete cur.editing,Wall.setDraft(t),ae.suggestionEvent(e,"open",o,s),cur.editing=i}},suggestionEvent:(e,t,o,s)=>(ajax.post("al_feed.php",{act:"suggestion_event",suggest_id:e,event_type:t,not_hide_by_click:(0,A.intval)(s)}),s||(0,C.re)((0,C.geByClass1)("_post_suggest")),(0,k.cancelEvent)(o)),closePostSuggest(e,t,o){ae.suggestionEvent(e,t,o,!1)},hideRightBlock:o(165392).hideRightBlock,initPrettyCardGallery:function(e){if(!(0,C.geByClass1)("pretty-cards",e))return!1;window.PrettyCardGallery&&new window.PrettyCardGallery(e)},initPhotoCarouselInPost(e){if(!e)return;const t=(0,W.initPhotoBlockInPost)(e,ae.sendPhotoCarouselEvent.bind(ae));(0,C.data)(e,"photo_carousel",t),(0,ie.pushNavDestroy)((()=>{(0,C.removeData)(e,"photo_carousel")}))},destroyPhotoCarouselByPost(e){const t=(0,C.data)(e,"photo_carousel");t&&t.destroy()},sendPhotoCarouselEvent(e,t,o=null){var s;if(!t)return;let i=null==(s=t.querySelector(".post_img"))?void 0:s.getAttribute("data-post-id");var n;(0,r.partConfigEnabled)("feed_photo_carousel_click_events_web")&&(i=null==(n=t)?void 0:n.getAttribute("data-post-id"));if(!i)return;let a="",l="",c=/(-?\d+)_p(\d+)/;(0,r.partConfigEnabled)("feed_photo_carousel_click_events_web")&&(c=/1_(-?\d+)_(\d+)/);const d=i.match(c);if(!d||!d[1]||!d[2])return;a=d[1],l=d[2];let u=t.getAttribute("data-photo-raw-id");const _=t.getAttribute("data-pseudopost-type"),p=t.getAttribute("data-post-creation-timestamp");if(!u&&"photo_group"===_&&o){const e=o.target;if(e&&e.href){const t=e.href.match(/\/photo(-?\d+_\d+)/);u=t&&t[1]}}const f={event_type:e,content_type:_,post_owner_id:a,post_id:l,photo_raw_id:u,timestamp:p,ref:ae.getModuleRef()};(0,B.statlogsValueEvent)("feed_new_carousel_stat",f)},disablePhotoRecognizeBlock(e){const t=document.getElementById(`${V.BlockTypeIds.PhotoRecognize}`);t&&(cur.feedEntriesHTML[`${V.BlockTypeIds.PhotoRecognize}_ignored`]=(0,C.val)(t),ajax.post("al_feed.php",{act:"disable_recognize_block",hash:e},{onDone:e=>{(0,C.val)(t,e)}}))},enablePhotoRecognizeBlock(e){const t=document.getElementById(`${V.BlockTypeIds.PhotoRecognize}`);t&&ajax.post("al_feed.php",{act:"enable_recognize_block",hash:e},{onDone:()=>{(0,C.val)(t,cur.feedEntriesHTML[`${V.BlockTypeIds.PhotoRecognize}_ignored`])}})},initRightBlocks:e=>{(0,Z.initFeedRightBlocks)(e)}};ae.scrollCheck=(0,i.throttle)(ae._scrollCheck,50)},385295:(e,t,o)=>{o.d(t,{longView:()=>a});var s=o(829234),i=o(795558),n=o(82161);let r={tracking:[],viewed:{}};const a={process:(e,t)=>{const{tracking:o,viewed:a}=r;if(0===o.length)return[];let l=[];return(0,n.each)(o,(function(o,r){var c;let d=(0,i.domFC)(r),u=null==(c=d)?void 0:c.id;if(!d||!u)return;let _=(0,i.domData)(d,"ad-block-uid"),p=""+u;if(_&&(p+="_"+_),!a[p]&&document.body.contains(r))if((0,s.isElemViewable)(r,.5,e,t)){let e=Date.now();r.longViewStartedAt?e-r.longViewStartedAt>=1e3&&(a[p]=!0,l.push((0,n.extend)({},(0,s.postsGetRaws)(r),{long:1}))):r.longViewStartedAt=Date.now()}else r.longViewStartedAt=null})),l},registerElement:e=>!!e&&(!!e.longViewTracking||!e.longViewRegistered&&(e.longViewRegistered=!0,e.longViewTracking=(0,s.isAutoplayAd)(e)||(0,s.isAdWithLongImpression)(e)||(0,s.isAdWithLongImpressionOnly)(e),!!e.longViewTracking&&(r.tracking.push(e),!0)))}},719645:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{evalWithLogging:()=>evalWithLogging});var _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(643897);const evalWithLogging=evalString=>{try{return eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__.logEvalError)(e,evalString)}}},827652:(e,t,o)=>{o.d(t,{Likes:()=>P});var s=o(434788),i=o(795558),n=o(953908),r=o(320422),a=o(82161),l=o(893106),c=o(95432),d=o(664988),u=o(514986),_=o(931917),p=o(29271),f=o(693982),h=o(234514),g=o(682951),m=o(898298),w=o(999237),v=o(878021),k=o(228411),b=o(362246),y=o(809053),C=o(170864),S=o(120744);const P={toggle(e,t,o,s){if((0,n.cancelEvent)(t),(0,d.isObject)(window.cur)&&(0,d.isFunction)(cur.viewAsBox))return cur.viewAsBox();if(vk.widget&&!vk.id)return window.Widgets.oauth();const r=(0,i.hasClass)(e,"active");(0,i.addClass)(e,"animate"),this.clientUpdate(o,h.LikeButtonTypes.like,r?-1:1,!r),this.handleAuthorLikeInReply(o,e,r);const a=o.match(/^(video)(?!(_comment))(.*)/)?(0,b.getVideoTrackCode)():void 0,l={act:r?"a_do_unlike":"a_do_like",object:o,hash:s,list:cur.pvListId,wall:2,from:this._getReference(o),from_widget:vk.widget?1:0,track_code:a},c=()=>((0,i.toggleClass)(e,"active",r),this.clientUpdate(o,h.LikeButtonTypes.like,r?1:-1,r),this.handleAuthorLikeInReply(o,e,!r),!1);window.ajax.post("like.php",l,{onDone:t=>{if(t.unauth_action_box)return c(),void v.UnauthActionBox.show(t.unauth_action_box);this.update(o,t);const s=o.match(/^(wall|market)(.*)/);s&&cur.onLike&&cur.onLike(e,s[1],s[2],r),this.handleAuthorLikeInReply(o,e,r,t)},onFail:c});(0,d.intval)((0,i.domData)(e,"count"))>0?P.showLikes(e,o,{fast:!0}):e.tt&&e.tt.destroy&&e.tt.destroy()},_getReference:e=>cur.pvShown?"photo_viewer":e===cur.wallLayer?"wkview":window.mvcur&&window.mvcur.mvShown?"videoview":cur.wallType?"feed"===cur.wallType?"news"===cur.section?`feed_${cur.subsection?cur.subsection:cur.section}`:"recommended"===cur.section?"feed_recommended"+("recent"!==cur.subsection?"_"+cur.subsection:""):(0,a.inArray)(cur.section,["friends","groups","videos","photos"])?"feed_"+(cur.subsection?"_"+cur.subsection:""):`feed_${cur.section}`:"top"===cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,share(e,t={},o=void 0){if(vk.widget&&!vk.id)return window.Widgets.oauth();if((0,d.isObject)(window.cur)&&(0,d.isFunction)(cur.viewAsBox))return cur.viewAsBox();if(window.cur){const e=(0,y.getTrackCodeFromPost)(o);window.cur.shareButtonTrackCode=e}const{objectType:i,objectId:n}=(0,f.parseLikeObjectId)(e);(vk.widget?window.showBox:u.showBox)("like.php",(0,s._)({act:"publish_box",object:e,from_widget:vk.widget?1:0},t),{onDone:(e,t)=>{t.unauth_action_box&&(e.hide(),v.UnauthActionBox.show(t.unauth_action_box))},stat:[window.jsc("web/page.js"),"page.css",window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")]}),"wall"===i&&window.Wall&&window.Wall.triggerAdPostStat(n,"share_post"),cur.RpcMethods&&(cur.RpcMethods.likeFullUpdate=t=>P.update(e,window.cleanObj(t)))},clientUpdate(e,t,o,s){const n=this._getButtonsByType(e,t);if(!n.length)return;const r=(0,d.intval)((0,i.domData)(n[0],"count"))+o;this._updateDom(e,t,r,s),this.updateExternalIndex(e,{type:t,count:r,isActive:s})},update(e,t){if(!isNaN(parseInt(t.like_num))){const o=(0,d.isUndefined)(t.like_my)?void 0:!!(0,d.intval)(t.like_my);this._updateDom(e,h.LikeButtonTypes.like,t.like_num,o,t.like_title,t.like_from_group),this.updateExternalIndex(e,{type:h.LikeButtonTypes.like,count:t.like_num,isActive:o})}if(!isNaN(parseInt(t.share_num))){const o=(0,d.isUndefined)(t.share_my)?void 0:!!(0,d.intval)(t.share_my);this._updateDom(e,h.LikeButtonTypes.share,t.share_num,o,t.share_title),this.updateExternalIndex(e,{type:h.LikeButtonTypes.share,count:t.share_num})}if((0,a.isNumeric)(t.views_num)&&this._updateDom(e,h.LikeButtonTypes.views,t.views_num,void 0,t.views_title),(0,a.isNumeric)(t.comment_num)&&this._updateDom(e,h.LikeButtonTypes.comment,t.comment_num),t[g.REACTIONS_COUNTS_RESPONSE_FIELD]){const o=!!t.isQueueUpdate;(0,w.triggerReactionsUpdate)(e,t[g.REACTIONS_COUNTS_RESPONSE_FIELD],void 0,{isQueueUpdate:o,isUserAction:!1,previewVisibility:m.previewVisibilityUseCurrent})}},updateComments(e,t){this.update(e,{comment_num:t})},_updateDom(e,t,o,s,n,r){var c;const u=this._getButtonsByType(e,t),_=t===h.LikeButtonTypes.views;if(!(null==(c=u)?void 0:c.length))return;let g="";_?g=o:o>0&&(g=vk.widget?(0,a.formatCount)(o):(0,p.langNumeric)(o,"%s",!0)),_||(o=(0,d.intval)(o));for(let e=0;e<u.length;e++){const a=u[e];if((0,i.hasClass)(a,"no_counter"))continue;const c=_?u[e]:(0,f.getElementLikeButtonCount)(u[e]);if((0,l.animateCount)(c,g,{str:"auto",noWrapWidth:!_,noSpaceIfEmpty:!0}),(0,i.toggleClass)(a,"empty",o<=0),"boolean"==typeof s&&(0,i.toggleClass)(a,"active",s),(0,i.attr)(u[e],"data-count",o),(0,i.attr)(a,"data-combine")){const e=s?p.getLang("global_dislike"):`${p.getLang("global_like")}${o?" "+o:""}`;(0,i.attr)(a,"title")!==e&&(0,i.attr)(a,"title",e)}var m,w,v;if((0,k.updateAriaLabelCounter)(a,o,t),_)null==(v=a)||null==(w=v.closest)||null==(m=w.call(v,".like_views"))||m.setAttribute("title",n||"");const b=u[e].tt;if(b){const e=(0,i.domByClass)(b.container,"_content"),l=(0,i.domByClass)(b.container,"_value"),c=(0,i.domByClass)(b.container,"_title"),u=(0,i.domByClass)(b.container,"like_tt_group_like"),_=(0,d.intval)((0,i.val)(l));if((0,i.val)(l,o),n&&(0,i.val)(c,n),(0,d.isObject)(b)&&(b.likeInvalidated=!0),(_!==o&&_<7||!1===n)&&(t===h.LikeButtonTypes.like?a.needReinitLikesTT=!0:t===h.LikeButtonTypes.share&&(a.needReinitShareTT=!0)),t===h.LikeButtonTypes.like&&(0,i.toggleClass)(e,"me_hidden",!s),!1===n&&b.destroy&&b.destroy(),void 0!==r&&u){const e="like_tt_group_like_hidden";r?u.classList.remove(e):u.classList.add(e)}}}},_getButtonsByType:(e,t)=>(0,i.domQuery)(`._like_${e} ._${t}, ._like_${e} [data-like-button-type="${t}"]`),showLikes(e,t,o={}){var s;if(!e||!(e instanceof HTMLElement)||e.postDontShowLikes)return;if(vk.widget&&vk.show_external_auth_box)return;let n=o.views?{views:1}:o.share?{published:1}:{};o.listId&&(n.list=o.listId),o.like_hash&&(n.like_hash=o.like_hash),o.like_stats_params&&Object.assign(n,o.like_stats_params);const l=!!(0,i.geByClass1)("share",(0,i.gpeByClass)("like_wrap",e));let c=document.body,u=!1;const _=getComputedStyle(e),p=(0,d.intval)(_.getPropertyValue("padding-left").replace("px","")),h=(0,d.intval)(_.getPropertyValue("padding-top").replace("px","")),g=(0,f.getElementLikeButtonIcon)(e);let m=40;"wpost"===o.from&&(m=24);const w=[m-(0,i.getSize)(g)[0]/2-p,10-h];let v=o.cl||"";if(o.share)v+="likes_tt_share";else if(v+="likes_tt_like","widget_community"===o.from)w[0]=6;else if("wcomments"===o.from||"widget_comments"===cur.wallType){const t=16,o=10;w[0]=(0,i.getSize)(e)[0]+t-(0,i.getSize)(g)[0]/2-o}else"photo_carousel"===o.from&&(w[1]=10);if(!!(null==(s=o)?void 0:s.isFromReactionsPreview)){const t=e.querySelector("._ReactionsPreview__itemsContainer");if(t){const e=t.querySelector(".ReactionsPreviewItem"),o=(0,i.getXYRect)(e,!1),s=(o.width||0)/2;let n=s;c=t;o.left+o.width/2>window.innerWidth/2&&(u=!0,n=t.offsetWidth-s),w[0]=-n+m}}let k,b;o.share?(k="needReinitLikesTT",b="resetLikesTTTimer"):(k="needReinitShareTT",b="resetShareTTTimer"),clearTimeout(e[b]),(0,r.showTooltip)(e,{url:"/like.php",params:(0,a.extend)({act:"a_get_stats",object:t,has_share:l?1:""},n),appendEl:c,slide:15,shift:w,ajaxdt:o.fast?0:100,showdt:o.fast?0:400,hidedt:200,dir:"auto",checkLeft:!0,needLeft:u,reverseOffset:80,noZIndex:!0,hasover:!0,tip:{over:()=>{P.showLikes(e,t,o)}},typeClass:"like_tt",className:v,onHide:()=>{clearTimeout(e[b]),e[k]&&(e[b]=setTimeout((()=>{delete e[k],e.tt&&e.tt.destroy&&e.tt.destroy()}),200))}})},showShare:function(e,t,o){P.showLikes(e,t,(0,a.extend)(o,{share:1}))},updateViews:(e,t)=>{vk.widget&&vk.show_external_auth_box||window.ajax.post("like.php",{act:"a_get_stats",object:e,views:1},{cache:1,onDone(t,o){const s=(0,i.ce)("div",{innerHTML:o});P._updateDom(e,h.LikeButtonTypes.views,t,void 0,s.innerText||s.textContent)}})},makeTemplate(e,t){if(!e)return"";(t=(0,a.extend)({buttons_prepend:"",object_raw:"",likes_count:"",liked:!1,share_count:"",shared:"",views_count:"",share_opts:{},like_opts:{},class_name:"",like_cont_class:"",like_class_name:"",[g.REACTIONS_COUNTS_RESPONSE_FIELD]:"",reactions_class_name:""},t)).like_active=t.liked?"active":"",t.share_active=t.shared?"active":"",t.comment_active="",t.likes_formatted_count=t.likes_count>0?(0,p.langNumeric)(t.likes_count,"%s",!0):"",t.share_formatted_count=t.share_count>0?(0,p.langNumeric)(t.share_count,"%s",!0):"",t.share_opts=this._convertOptsToString(t.share_opts),t.like_opts=this._convertOptsToString(t.like_opts),t.like_class_name+=t.likes_count>0?"":" empty",t.share_class_name=t.share_count>0?"":"empty";const o=t[g.REACTIONS_COUNTS_RESPONSE_FIELD],s=!!o&&Object.values(o).some((e=>!!e));return t.reactions_class_name+=s?"":" PostBottomAction--empty",(0,i.rs)(e,t)},_convertOptsToString:e=>JSON.stringify(e).replace(/\"/g,"'"),updateExternalIndex(e,t={}){const{objectType:o,objectId:s}=(0,f.parseLikeObjectId)(e);switch(o){case"photo":if(!cur.pvShown||!cur.pvCurPhoto||cur.pvCurPhoto.id!==s)return;const e=cur.pvListId,o=cur.pvIndex,i=cur.pvData[e][o];t.type===h.LikeButtonTypes.like?(i.likes=t.count,i.liked=t.isActive,cur.pvCommsLikes[i.id][1]=t.count):t.type===h.LikeButtonTypes.share&&(i.shares=t.count);break;case"video":if(window.mvcur&&window.mvcur.mvShown&&window.mvcur.videoRaw===s&&t.type===h.LikeButtonTypes.like){const e=window.Videoview.getMvData();e.likes=t.count,void 0!==t.isActive&&(e.liked=t.isActive,window.Videoview.playerOnLiked(t.isActive),window.Videoview.recache())}break;case"clip":t.type===h.LikeButtonTypes.like&&window.Videoview.playerOnLiked(t.isActive)}},showLikesList(e,t){cur.viewAsBox||(0,i.hasClass)((0,i.gpeByClass)("like_btn",e),"no_counter")||(0,c.showWiki)({w:"likes/"+(0,a.clean)(t)},!1,!1,{queue:1})},showSharesList(e,t){cur.viewAsBox||(0,i.hasClass)((0,i.gpeByClass)("like_btn",e),"no_counter")||(0,c.showWiki)({w:"shares/"+(0,a.clean)(t)},!1,!1,{queue:1})},handleAuthorLikeInReply(e,t,o,s){var i,n,r,a;const{objectId:l}=(0,f.parseLikeObjectId)(e),c=(0,C.getPostElemByChildEl)(t),d=Number(null==(n=c)||null==(i=n.dataset)?void 0:i.postAuthorId),u=null==(a=c)||null==(r=a.querySelector(`.reply#post${l}`))?void 0:r.querySelector(".HighlightingAuthorLike");if(!u||!_.Ranges.isUserId(d)||vk.id!==d)return;const p="HighlightingAuthorLike--hidden";(s?s.like_my:!o)?(u.classList.remove(p),s&&(0,S.renderAuthorUserOnboardingTooltip)(u)):u.classList.add(p)}}},120425:(e,t,o)=>{o.d(t,{default:()=>u});var s=o(725296),i=o(221780),n=o(584356),r=o(82161),a=o(953908),l=o(795558),c=o(404145),d=o(672132);const u={init(e,t){let o,u,_,p=(0,l.ge)("video_live_blacklist_search"),f=(0,l.ge)("video_live_blacklist_wrap"),h=(0,l.domByClass)(f,"olist");const g={};function m(e){const s=e;if((e=(0,r.trim)(e).replace(/\s+/g," ").toLowerCase())===u)return;u=e;const n=e?o.search(e):t.list;let a="";if(n.length){const t=new RegExp(e,"i");for(let o,s=0;s<n.length;s++)o=n[s],a+=(0,r.getTemplate)("video_live_blacklist_item",{id:o.id,href:o.href,photo:o.photo,name:e?o.name.replace(t,"<em>$&</em>"):o.name,class:g[o.id]?" olist_item_wrap_on":""})}else a=(0,r.getTemplate)("video_live_blacklist_empty",{text:(0,i.langStr)(i.getLang("global_search_not_found"),"search","<b>"+(0,r.clean)(s)+"</b>")});(0,l.val)(h,a)}e.setOptions({bodyStyle:"padding:0;",onDestroy:function(){uiSearch.destroy(p),_&&_.destroy(),e=o=_=f=p=null}}),t.list.length&&(e.removeButtons().addButton(i.getLang("global_save"),(function(o){ajax.post("al_video.php?act=save_live_blacklist",{exclude:Object.keys(g).join(","),hash:t.save_hash},{onDone:function(t){e.hide(),t&&(0,n.showDoneBox)(t)},showProgress:()=>(0,s.lockButton)(o),hideProgress:()=>(0,s.unlockButton)(o)})})).addButton(i.getLang("global_cancel"),null,"no"),_=new uiScroll(f),m(""),f.onclick=function(e){const t=(0,l.domClosest)("olist_item_wrap",e.target);if(!t)return;(0,a.cancelEvent)(e);const o=(0,l.domData)(t,"id");(0,l.toggleClass)(t,"olist_item_wrap_on")?g[o]=1:delete g[o]},p&&(o=new d.vkIndexer(t.list,(function(e){return e.name+" https://"+(0,c.getHostName)()+e.href})),uiSearch.init(p,{onChange:m}),uiSearch.focus(p)))}}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(e,t,o,s)=>{if(!t){var i=1/0;for(l=0;l<deferred.length;l++){for(var[t,o,s]=deferred[l],n=!0,r=0;r<t.length;r++)(!1&s||i>=s)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[r])))?t.splice(r--,1):(n=!1,s<i&&(i=s));if(n){deferred.splice(l--,1);var a=o();void 0!==a&&(e=a)}}return e}s=s||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>s;l--)deferred[l]=deferred[l-1];deferred[l]=[t,o,s]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var s={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,__webpack_require__.d(o,s),o},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,o)=>(__webpack_require__.f[o](e,t),t)),[])),__webpack_require__.u=e=>25394===e?"AudioLongtapModal.98b6df61d646414354a3.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.b73d1f0a03f70163e02d.js":96816===e?"web-audio-lyrics-modal.5b786d2492e85e4a335f.js":9375===e?"voice_message_player.f0c31b4a3dc08de145c9.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.6cf18c53f58f775934b3.js":28872===e?"feed-client-nav-skeleton.a30e12215b3ca16e7fe2.js":35953===e?"feed-client-nav-async-right-block.d1fcdf48d7fa743442bf.js":51162===e?"StickersKit.7b7673c72a73454cf039.js":59240===e?"performance-stats.59c5c96e7372abb54c8c.js":38288===e?"lottie.5e4758c39f106eab733a.js":void 0,__webpack_require__.miniCssF=e=>e+"."+{25394:"6af57e1b0cf5a74f9a87",57468:"35be3dfa1e90e3cdd0a1",75980:"5bbee2c9f3e189193a73"}[e]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,o,s)=>{if(inProgress[e])inProgress[e].push(t);else{var i,n;if(void 0!==o)for(var r=document.getElementsByTagName("script"),a=0;a<r.length;a++){var l=r[a];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="vk:"+o){i=l;break}}i||(n=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack","vk:"+o),i.src=e),inProgress[e]=[t];var c=(t,o)=>{i.onerror=i.onload=null,clearTimeout(d);var s=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach((e=>e(o))),t)return t(o)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=c.bind(null,i.onerror),i.onload=c.bind(null,i.onload),n&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",loadStylesheet=e=>new Promise(((t,o)=>{var s=__webpack_require__.miniCssF(e),i=__webpack_require__.p+s;if(((e,t)=>{for(var o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var i=(r=o[s]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var n=document.getElementsByTagName("style");for(s=0;s<n.length;s++){var r;if((i=(r=n[s]).getAttribute("data-href"))===e||i===t)return r}})(s,i))return t();((e,t,o,s)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=n=>{if(i.onerror=i.onload=null,"load"===n.type)o();else{var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=a,i.parentNode.removeChild(i),s(l)}},i.href=t,document.head.appendChild(i)})(e,i,t,o)})),installedCssChunks={12495:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{25394:1,57468:1,75980:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{var e={12495:0};__webpack_require__.f.j=(t,o)=>{var s=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==s)if(s)o.push(s[2]);else{var i=new Promise(((o,i)=>s=e[t]=[o,i]));o.push(s[2]=i);var n=__webpack_require__.p+__webpack_require__.u(t),r=new Error;__webpack_require__.l(n,(o=>{if(__webpack_require__.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=o&&("load"===o.type?"missing":o.type),n=o&&o.target&&o.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",r.name="ChunkLoadError",r.type=i,r.request=n,s[1](r)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,o)=>{var s,i,[n,r,a]=o,l=0;if(n.some((t=>0!==e[t]))){for(s in r)__webpack_require__.o(r,s)&&(__webpack_require__.m[s]=r[s]);if(a)var c=a(__webpack_require__)}for(t&&t(o);l<n.length;l++)i=n[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(c)},o=self.webpackChunkvk=self.webpackChunkvk||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var __webpack_exports__=__webpack_require__.O(void 0,[75514,98066,56990,24509,76400,40885,68592,21370,39211,88656,70486],(()=>__webpack_require__(398986)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();