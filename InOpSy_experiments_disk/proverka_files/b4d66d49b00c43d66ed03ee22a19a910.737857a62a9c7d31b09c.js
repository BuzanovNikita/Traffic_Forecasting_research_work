(self.webpackChunkvk=self.webpackChunkvk||[]).push([[82197],{474582:(e,t,n)=>{"use strict";let r;n.d(t,{default:()=>_,from_client_text:()=>v,from_server_text:()=>b});const i=new Array(128).fill(void 0);function o(e){return i[e]}i.push(void 0,null,!0,!1);let a=i.length;function s(e){const t=o(e);return function(e){e<132||(i[e]=a,a=e)}(e),t}const c="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&c.decode();let d=null;function u(){return null!==d&&0!==d.byteLength||(d=new Uint8Array(r.memory.buffer)),d}function l(e,t){return e>>>=0,c.decode(u().subarray(e,e+t))}function f(e){a===i.length&&i.push(i.length+1);const t=a;return a=i[t],i[t]=e,t}let m=0;const h="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},p="function"==typeof h.encodeInto?function(e,t){return h.encodeInto(e,t)}:function(e,t){const n=h.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(void 0===n){const n=h.encode(e),r=t(n.length,1)>>>0;return u().subarray(r,r+n.length).set(n),m=n.length,r}let r=e.length,i=t(r,1)>>>0;const o=u();let a=0;for(;a<r;a++){const t=e.charCodeAt(a);if(t>127)break;o[i+a]=t}if(a!==r){0!==a&&(e=e.slice(a)),i=n(i,r,r=a+3*e.length,1)>>>0;const t=u().subarray(i+a,i+r);a+=p(e,t).written}return m=a,i}function v(e){const t=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=m;return s(r.from_client_text(t,n))}function b(e){const t=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=m;return s(r.from_server_text(t,n))}function k(){const e={wbg:{}};return e.wbg.__wbindgen_object_drop_ref=function(e){s(e)},e.wbg.__wbindgen_error_new=function(e,t){return f(new Error(l(e,t)))},e.wbg.__wbindgen_number_new=function(e){return f(e)},e.wbg.__wbindgen_bigint_from_i64=function(e){return f(e)},e.wbg.__wbindgen_object_clone_ref=function(e){return f(o(e))},e.wbg.__wbindgen_string_new=function(e,t){return f(l(e,t))},e.wbg.__wbg_set_bd72c078edfa51ad=function(e,t,n){o(e)[s(t)]=s(n)},e.wbg.__wbg_new_898a68150f225f2e=function(){return f(new Array)},e.wbg.__wbg_new_b51585de1b234aff=function(){return f(new Object)},e.wbg.__wbg_set_502d29070ea18557=function(e,t,n){o(e)[t>>>0]=s(n)},e.wbg.__wbindgen_throw=function(e,t){throw new Error(l(e,t))},e}function y(e,t){return r=e.exports,w.__wbindgen_wasm_module=t,d=null,r}async function w(e){if(void 0!==r)return r;void 0===e&&(e=new URL(n(732052),n.b));const t=k();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:i,module:o}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return y(i,o)}const _=w},997864:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this._=e}var i=r.prototype;function o(e,t){for(var n=0;n<e;n++)t(n)}function a(e,t,n){return function(e,t){o(t.length,(function(n){e(t[n],n,t)}))}((function(n,r,i){t=e(t,n,r,i)}),n),t}function s(e,t){return a((function(t,n,r,i){return t.concat([e(n,r,i)])}),[],t)}function c(e,t){var n={v:0,buf:t};return o(e,(function(){var e;n={v:n.v<<1|(e=n.buf,e[0]>>7),buf:function(e){var t=a((function(e,t,n,r){return e.concat(n===r.length-1?Buffer.from([t,0]).readUInt16BE(0):r.readUInt16BE(n))}),[],e);return Buffer.from(s((function(e){return(e<<1&65535)>>8}),t))}(n.buf)}})),n}function d(){return"undefined"!=typeof Buffer}function u(){if(!d())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function l(e){u();var t=a((function(e,t){return e+t}),0,e);if(t%8!=0)throw new Error("The bits ["+e.join(", ")+"] add up to "+t+" which is not an even number of bytes; the total should be divisible by 8");var n,i=t/8,o=(n=function(e){return e>48},a((function(e,t){return e||(n(t)?t:e)}),null,e));if(o)throw new Error(o+" bit range requested exceeds 48 bit (6 byte) Number max.");return new r((function(t,n){var r=i+n;return r>t.length?_(n,i.toString()+" bytes"):w(r,a((function(e,t){var n=c(t,e.buf);return{coll:e.coll.concat(n.v),buf:n.buf}}),{coll:[],buf:t.slice(n,r)},e).coll)}))}function f(e,t){return new r((function(n,r){return u(),r+t>n.length?_(r,t+" bytes for "+e):w(r+t,n.slice(r,r+t))}))}function m(e,t){if("number"!=typeof(n=t)||Math.floor(n)!==n||t<0||t>6)throw new Error(e+" requires integer length in range [0, 6].");var n}function h(e){return m("uintBE",e),f("uintBE("+e+")",e).map((function(t){return t.readUIntBE(0,e)}))}function p(e){return m("uintLE",e),f("uintLE("+e+")",e).map((function(t){return t.readUIntLE(0,e)}))}function g(e){return m("intBE",e),f("intBE("+e+")",e).map((function(t){return t.readIntBE(0,e)}))}function v(e){return m("intLE",e),f("intLE("+e+")",e).map((function(t){return t.readIntLE(0,e)}))}function b(e){return e instanceof r}function k(e){return"[object Array]"==={}.toString.call(e)}function y(e){return d()&&Buffer.isBuffer(e)}function w(e,t){return{status:!0,index:e,value:t,furthest:-1,expected:[]}}function _(e,t){return k(t)||(t=[t]),{status:!1,index:-1,value:null,furthest:e,expected:t}}function C(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var n=e.furthest===t.furthest?function(e,t){if(function(){if(void 0!==r._supportsSet)return r._supportsSet;var e="undefined"!=typeof Set;return r._supportsSet=e,e}()&&Array.from){for(var n=new Set(e),i=0;i<t.length;i++)n.add(t[i]);var o=Array.from(n);return o.sort(),o}for(var a={},s=0;s<e.length;s++)a[e[s]]=!0;for(var c=0;c<t.length;c++)a[t[c]]=!0;var d=[];for(var u in a)({}).hasOwnProperty.call(a,u)&&d.push(u);return d.sort(),d}(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:n}}var E={};function x(e,t){if(y(e))return{offset:t,line:-1,column:-1};e in E||(E[e]={});for(var n=E[e],r=0,i=0,o=0,a=t;a>=0;){if(a in n){r=n[a].line,0===o&&(o=n[a].lineStart);break}("\n"===e.charAt(a)||"\r"===e.charAt(a)&&"\n"!==e.charAt(a+1))&&(i++,0===o&&(o=a+1)),a--}var s=r+i,c=t-o;return n[t]={line:s,lineStart:o},{offset:t,line:s+1,column:c+1}}function I(e){if(!b(e))throw new Error("not a parser: "+e)}function M(e,t){return"string"==typeof e?e.charAt(t):e[t]}function N(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function S(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function A(e){if("string"!=typeof e)throw new Error("not a string: "+e)}var R=2,T=3,P=8,j=5*P,D=4*P,L="  ";function O(e,t){return new Array(t+1).join(e)}function U(e,t,n){var r=t-e.length;return r<=0?e:O(n,r)+e}function q(e,t,n,r){return{from:e-t>0?e-t:0,to:e+n>r?r:e+n}}function G(e,t){var n,r,i,o,c,d=t.index,u=d.offset,l=1;if(u===e.length)return"Got the end of the input";if(y(e)){var f=u-u%P,m=u-f,h=q(f,j,D+P,e.length),p=s((function(e){return s((function(e){return U(e.toString(16),2,"0")}),e)}),function(e,t){var n=e.length,r=[],i=0;if(n<=t)return[e.slice()];for(var o=0;o<n;o++)r[i]||r.push([]),r[i].push(e[o]),(o+1)%t==0&&i++;return r}(e.slice(h.from,h.to).toJSON().data,P));o=function(e){return 0===e.from&&1===e.to?{from:e.from,to:e.to}:{from:e.from/P,to:Math.floor(e.to/P)}}(h),r=f/P,n=3*m,m>=4&&(n+=1),l=2,i=s((function(e){return e.length<=4?e.join(" "):e.slice(0,4).join(" ")+"  "+e.slice(4).join(" ")}),p),(c=(8*(o.to>0?o.to-1:o.to)).toString(16).length)<2&&(c=2)}else{var g=e.split(/\r\n|[\n\r\u2028\u2029]/);n=d.column-1,r=d.line-1,o=q(r,R,T,g.length),i=g.slice(o.from,o.to),c=o.to.toString().length}var v=r-o.from;return y(e)&&(c=(8*(o.to>0?o.to-1:o.to)).toString(16).length)<2&&(c=2),a((function(t,r,i){var a,s=i===v,d=s?"> ":L;return a=y(e)?U((8*(o.from+i)).toString(16),c,"0"):U((o.from+i+1).toString(),c," "),[].concat(t,[d+a+" | "+r],s?[L+O(" ",c)+" | "+U("",n," ")+O("^",l)]:[])}),[],i).join("\n")}function B(e,t){return["\n","-- PARSING FAILED "+O("-",50),"\n\n",G(e,t),"\n\n",(n=t.expected,1===n.length?"Expected:\n\n"+n[0]:"Expected one of the following: \n\n"+n.join(", ")),"\n"].join("");var n}function F(e){return void 0!==e.flags?e.flags:[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.unicode?"u":"",e.sticky?"y":""].join("")}function $(){for(var e=[].slice.call(arguments),t=e.length,n=0;n<t;n+=1)I(e[n]);return r((function(n,r){for(var i,o=new Array(t),a=0;a<t;a+=1){if(!(i=C(e[a]._(n,r),i)).status)return i;o[a]=i.value,r=i.index}return C(w(r,o),i)}))}function z(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var t=e.pop();return S(t),$.apply(null,e).map((function(e){return t.apply(null,e)}))}function W(){var e=[].slice.call(arguments),t=e.length;if(0===t)return X("zero alternates");for(var n=0;n<t;n+=1)I(e[n]);return r((function(t,n){for(var r,i=0;i<e.length;i+=1)if((r=C(e[i]._(t,n),r)).status)return r;return r}))}function H(e,t){return V(e,t).or(Q([]))}function V(e,t){return I(e),I(t),z(e,t.then(e).many(),(function(e,t){return[e].concat(t)}))}function K(e){A(e);var t="'"+e+"'";return r((function(n,r){var i=r+e.length,o=n.slice(r,i);return o===e?w(i,o):_(r,t)}))}function Y(e,t){!function(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var t=F(e),n=0;n<t.length;n++){var r=t.charAt(n);if("i"!==r&&"m"!==r&&"u"!==r&&"s"!==r)throw new Error('unsupported regexp flag "'+r+'": '+e)}}(e),arguments.length>=2?N(t):t=0;var n=function(e){return RegExp("^(?:"+e.source+")",F(e))}(e),i=""+e;return r((function(e,r){var o=n.exec(e.slice(r));if(o){if(0<=t&&t<=o.length){var a=o[0],s=o[t];return w(r+a.length,s)}return _(r,"valid match group (0 to "+o.length+") in "+i)}return _(r,i)}))}function Q(e){return r((function(t,n){return w(n,e)}))}function X(e){return r((function(t,n){return _(n,e)}))}function J(e){if(b(e))return r((function(t,n){var r=e._(t,n);return r.index=n,r.value="",r}));if("string"==typeof e)return J(K(e));if(e instanceof RegExp)return J(Y(e));throw new Error("not a string, regexp, or parser: "+e)}function Z(e){return I(e),r((function(t,n){var r=e._(t,n),i=t.slice(n,r.index);return r.status?_(n,'not "'+i+'"'):w(n,null)}))}function ee(e){return S(e),r((function(t,n){var r=M(t,n);return n<t.length&&e(r)?w(n+1,r):_(n,"a character/byte matching "+e)}))}function te(e,t){arguments.length<2&&(t=e,e=void 0);var n=r((function(e,r){return n._=t()._,n._(e,r)}));return e?n.desc(e):n}function ne(){return X("fantasy-land/empty")}i.parse=function(e){if("string"!=typeof e&&!y(e))throw new Error(".parse must be called with a string or Buffer as its argument");var t,n=this.skip(ae)._(e,0);return t=n.status?{status:!0,value:n.value}:{status:!1,index:x(e,n.furthest),expected:n.expected},delete E[e],t},i.tryParse=function(e){var t=this.parse(e);if(t.status)return t.value;var n=B(e,t),r=new Error(n);throw r.type="ParsimmonError",r.result=t,r},i.assert=function(e,t){return this.chain((function(n){return e(n)?Q(n):X(t)}))},i.or=function(e){return W(this,e)},i.trim=function(e){return this.wrap(e,e)},i.wrap=function(e,t){return z(e,this,t,(function(e,t){return t}))},i.thru=function(e){return e(this)},i.then=function(e){return I(e),$(this,e).map((function(e){return e[1]}))},i.many=function(){var e=this;return r((function(t,n){for(var r=[],i=void 0;;){if(!(i=C(e._(t,n),i)).status)return C(w(n,r),i);if(n===i.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");n=i.index,r.push(i.value)}}))},i.tieWith=function(e){return A(e),this.map((function(t){if(function(e){if(!k(e))throw new Error("not an array: "+e)}(t),t.length){A(t[0]);for(var n=t[0],r=1;r<t.length;r++)A(t[r]),n+=e+t[r];return n}return""}))},i.tie=function(){return this.tieWith("")},i.times=function(e,t){var n=this;return arguments.length<2&&(t=e),N(e),N(t),r((function(r,i){for(var o=[],a=void 0,s=void 0,c=0;c<e;c+=1){if(s=C(a=n._(r,i),s),!a.status)return s;i=a.index,o.push(a.value)}for(;c<t&&(s=C(a=n._(r,i),s),a.status);c+=1)i=a.index,o.push(a.value);return C(w(i,o),s)}))},i.result=function(e){return this.map((function(){return e}))},i.atMost=function(e){return this.times(0,e)},i.atLeast=function(e){return z(this.times(e),this.many(),(function(e,t){return e.concat(t)}))},i.map=function(e){S(e);var t=this;return r((function(n,r){var i=t._(n,r);return i.status?C(w(i.index,e(i.value)),i):i}))},i.contramap=function(e){S(e);var t=this;return r((function(n,r){var i=t.parse(e(n.slice(r)));return i.status?w(r+n.length,i.value):i}))},i.promap=function(e,t){return S(e),S(t),this.contramap(e).map(t)},i.skip=function(e){return $(this,e).map((function(e){return e[0]}))},i.mark=function(){return z(re,this,re,(function(e,t,n){return{start:e,value:t,end:n}}))},i.node=function(e){return z(re,this,re,(function(t,n,r){return{name:e,value:n,start:t,end:r}}))},i.sepBy=function(e){return H(this,e)},i.sepBy1=function(e){return V(this,e)},i.lookahead=function(e){return this.skip(J(e))},i.notFollowedBy=function(e){return this.skip(Z(e))},i.desc=function(e){k(e)||(e=[e]);var t=this;return r((function(n,r){var i=t._(n,r);return i.status||(i.expected=e),i}))},i.fallback=function(e){return this.or(Q(e))},i.ap=function(e){return z(e,this,(function(e,t){return e(t)}))},i.chain=function(e){var t=this;return r((function(n,r){var i=t._(n,r);return i.status?C(e(i.value)._(n,i.index),i):i}))},i.concat=i.or,i.empty=ne,i.of=Q,i["fantasy-land/ap"]=i.ap,i["fantasy-land/chain"]=i.chain,i["fantasy-land/concat"]=i.concat,i["fantasy-land/empty"]=i.empty,i["fantasy-land/of"]=i.of,i["fantasy-land/map"]=i.map;var re=r((function(e,t){return w(t,x(e,t))})),ie=r((function(e,t){return t>=e.length?_(t,"any character/byte"):w(t+1,M(e,t))})),oe=r((function(e,t){return w(e.length,e.slice(t))})),ae=r((function(e,t){return t<e.length?_(t,"EOF"):w(t,null)})),se=Y(/[0-9]/).desc("a digit"),ce=Y(/[0-9]*/).desc("optional digits"),de=Y(/[a-z]/i).desc("a letter"),ue=Y(/[a-z]*/i).desc("optional letters"),le=Y(/\s*/).desc("optional whitespace"),fe=Y(/\s+/).desc("whitespace"),me=K("\r"),he=K("\n"),pe=K("\r\n"),ge=W(pe,he,me).desc("newline"),ve=W(ge,ae);r.all=oe,r.alt=W,r.any=ie,r.cr=me,r.createLanguage=function(e){var t={};for(var n in e)({}).hasOwnProperty.call(e,n)&&function(n){t[n]=te((function(){return e[n](t)}))}(n);return t},r.crlf=pe,r.custom=function(e){return r(e(w,_))},r.digit=se,r.digits=ce,r.empty=ne,r.end=ve,r.eof=ae,r.fail=X,r.formatError=B,r.index=re,r.isParser=b,r.lazy=te,r.letter=de,r.letters=ue,r.lf=he,r.lookahead=J,r.makeFailure=_,r.makeSuccess=w,r.newline=ge,r.noneOf=function(e){return ee((function(t){return e.indexOf(t)<0})).desc("none of '"+e+"'")},r.notFollowedBy=Z,r.of=Q,r.oneOf=function(e){for(var t=e.split(""),n=0;n<t.length;n++)t[n]="'"+t[n]+"'";return ee((function(t){return e.indexOf(t)>=0})).desc(t)},r.optWhitespace=le,r.Parser=r,r.range=function(e,t){return ee((function(n){return e<=n&&n<=t})).desc(e+"-"+t)},r.regex=Y,r.regexp=Y,r.sepBy=H,r.sepBy1=V,r.seq=$,r.seqMap=z,r.seqObj=function(){for(var e,t={},n=0,i=(e=arguments,Array.prototype.slice.call(e)),o=i.length,a=0;a<o;a+=1){var s=i[a];if(!b(s)){if(k(s)&&2===s.length&&"string"==typeof s[0]&&b(s[1])){var c=s[0];if(Object.prototype.hasOwnProperty.call(t,c))throw new Error("seqObj: duplicate key "+c);t[c]=!0,n++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===n)throw new Error("seqObj expects at least one named parser, found zero");return r((function(e,t){for(var n,r={},a=0;a<o;a+=1){var s,c;if(k(i[a])?(s=i[a][0],c=i[a][1]):(s=null,c=i[a]),!(n=C(c._(e,t),n)).status)return n;s&&(r[s]=n.value),t=n.index}return C(w(t,r),n)}))},r.string=K,r.succeed=Q,r.takeWhile=function(e){return S(e),r((function(t,n){for(var r=n;r<t.length&&e(M(t,r));)r++;return w(r,t.slice(n,r))}))},r.test=ee,r.whitespace=fe,r["fantasy-land/empty"]=ne,r["fantasy-land/of"]=Q,r.Binary={bitSeq:l,bitSeqObj:function(e){u();var t={},n=0,r=s((function(e){if(k(e)){var r=e;if(2!==r.length)throw new Error("["+r.join(", ")+"] should be length 2, got length "+r.length);if(A(r[0]),N(r[1]),Object.prototype.hasOwnProperty.call(t,r[0]))throw new Error("duplicate key in bitSeqObj: "+r[0]);return t[r[0]]=!0,n++,r}return N(e),[null,e]}),e);if(n<1)throw new Error("bitSeqObj expects at least one named pair, got ["+e.join(", ")+"]");var i=s((function(e){return e[0]}),r);return l(s((function(e){return e[1]}),r)).map((function(e){return a((function(e,t){return null!==t[0]&&(e[t[0]]=t[1]),e}),{},s((function(t,n){return[t,e[n]]}),i))}))},byte:function(e){if(u(),N(e),e>255)throw new Error("Value specified to byte constructor ("+e+"=0x"+e.toString(16)+") is larger in value than a single byte.");var t=(e>15?"0x":"0x0")+e.toString(16);return r((function(n,r){var i=M(n,r);return i===e?w(r+1,i):_(r,t)}))},buffer:function(e){return f("buffer",e).map((function(e){return Buffer.from(e)}))},encodedString:function(e,t){return f("string",t).map((function(t){return t.toString(e)}))},uintBE:h,uint8BE:h(1),uint16BE:h(2),uint32BE:h(4),uintLE:p,uint8LE:p(1),uint16LE:p(2),uint32LE:p(4),intBE:g,int8BE:g(1),int16BE:g(2),int32BE:g(4),intLE:v,int8LE:v(1),int16LE:v(2),int32LE:v(4),floatBE:f("floatBE",4).map((function(e){return e.readFloatBE(0)})),floatLE:f("floatLE",4).map((function(e){return e.readFloatLE(0)})),doubleBE:f("doubleBE",8).map((function(e){return e.readDoubleBE(0)})),doubleLE:f("doubleLE",8).map((function(e){return e.readDoubleLE(0)}))},e.exports=r}])},95154:(e,t,n)=>{"use strict";n.d(t,{API_DEFAULT_TIMEOUT:()=>o,API_GET_INFO_FIELDS:()=>m,API_GET_MULTI_FIELDS:()=>h,API_GROUP_FIELDS:()=>f,API_MAX_RETRY_TIMEOUT:()=>d,API_MIN_RETRY_TIMEOUT:()=>c,API_USER_FIELDS:()=>l,CALL_JOIN_LINK_URL_BASE:()=>G,CHANNELS_GLPH_TIMEOUT:()=>N,CHANNELS_PER_PAGE:()=>g,CHAT_INVITE_LINK_URL_BASE:()=>U,CLIENT_ID:()=>r,COMMENTS_PER_PAGE:()=>k,COMMENTS_REFRESH_INTERVAL:()=>s,CONVOS_PER_PAGE:()=>p,EMPLOYEE_CARD_MINI_APP_ID:()=>j,ENGINE_VERSION:()=>i,HELPDESK_MINIAPP_ID:()=>$,ID_VK_COM_BASE:()=>W,INVITE_TO_CHAT_VISIBLE_MESSAGES_COUNT:()=>O,ISOLATED_CALL_JOIN_LINK_URL_BASE:()=>F,LIKE_PEERS_FIRST_LOAD:()=>I,LIKE_PEERS_PER_PAGE:()=>x,MAX_COMMENT_SIZE:()=>te,MAX_INT32:()=>u,MAX_MESSAGES_FORWARD_LEVEL:()=>S,MAX_MESSAGE_ATTACHES:()=>L,MAX_MESSAGE_SIZE:()=>D,MAX_VIDEO_FORWARD_LEVEL:()=>A,MESSAGES_PER_PAGE:()=>v,POSTS_PER_PAGE:()=>b,REACTIONS_REFRESH_INTERVAL:()=>a,SEARCH_CONVOS_COUNT:()=>C,SEARCH_DEBOUNCE_MS:()=>E,SEARCH_MESSAGES_COUNT:()=>w,SEARCH_POSTS_COUNT:()=>_,SFERUM_DOMAIN:()=>Z,SFERUM_VERIFICATION_LINK:()=>ee,STICKER_IMAGE_EDITOR_MINI_APP_ID:()=>P,STORAGE_APP_UNAVAILABLE_KEY:()=>K,STORAGE_DB_NAME:()=>z,STORAGE_OWNER_ID_KEY:()=>H,STORAGE_VIEWER_ID_KEY:()=>V,THREAD_COMMENTS_COUNT:()=>y,TYPING_EXPIRATION_TIME:()=>M,UGC_STICKERS_APP_ID:()=>T,VKME_APP_INSTALL_LINK:()=>B,VKME_CHAT_INVITE_LINK_URL_BASE:()=>q,VK_DOMAINS:()=>X,VK_PAY_APP_ID:()=>R,VK_RELATED_DOMAINS:()=>J,VK_TERMS_URL:()=>Y,WEB_VK_ME_DOMAIN:()=>Q});const r=7694673,i=19,o=1e4,a=15e3,s=15e3,c=500,d=2e4,u=Math.pow(2,31)-1,l=["id","first_name","first_name_gen","first_name_acc","last_name","last_name_gen","last_name_acc","sex","has_photo","photo_id","photo_50","photo_100","photo_200","contact_name","occupation","bdate","city","screen_name","online_info","verified","blacklisted","blacklisted_by_me","can_call","can_write_private_message","can_send_friend_request","can_invite_to_chats","friend_status","followers_count","profile_type","contacts","employee_mark","is_service_account"],f=["id","name","screen_name","type","photo_id","photo_50","photo_100","members_count","member_status","verified","is_closed","can_message","deactivated","activity","ban_info","is_messages_blocked","can_post_donut","site","reposts_disabled","description","action_button","menu"],m=["messages_recommendation_list_hidden","show_only_not_muted_messages","messages_multiline_input","messages_auto_unarchive","messages_transcript_auto_show","business_notify","messages_show_banner_teacher_verification"],h=["profile_type","photo_100","is_service_account"],p=20,g=20,v=30,b=20,k=50,y=2,w=20,_=20,C=100,E=500,x=30,I=6,M=5e3,N=3e4,S=2,A=4,R=7131443,T=51538586,P=7754294,j=7631183,D=4096,L=10,O=250,U="https://vk.me/join/",q="https://web.vk.me/#/join/",G="https://vk.com/call/join/",B="https://vk.me/app",F="https://web.vk.me/#/call/join/",$=6126832,z="reforged-storage-db-v1",W="https://id.vk.com",H="reforged-owner-id",V="reforged-viewer-id",K="reforged-app-unavailable",Y="https://vk.com/terms",Q="web.vk.me",X=["vk.com","vk.ru"],J=[...X,"vk.me","vk.cc"],Z="sferum.ru",ee=`https://${Z}/?s=me`,te=280},197934:(e,t,n)=>{"use strict";n.d(t,{addAttach:()=>d,count:()=>g,generatePollBackgroundGradientStyle:()=>h,getPreparedDocUrl:()=>b,ids:()=>s,isCallJoinLink:()=>f,isChatInviteLink:()=>l,kindsCount:()=>p,last:()=>c,preview:()=>a,rearrangeAttaches:()=>m,removeAttach:()=>u,resolveMiniAppId:()=>o});var r=n(89131),i=n(95154);const o=e=>e;function a(e,t=0,n=0,r=!1){var i;const o=["o","p","q","r"];if("Story"===e.kind)if(e.photo)e=e.photo;else{if(!e.video)return null;e=e.video}if("Video"===e.kind||"Gift"===e.kind||"PollBackgroundPhoto"===e.kind||"VideoMessage"===e.kind||"Narrative"===e.kind||"MiniApp"===e.kind){const r="MiniApp"===e.kind?e.images:e.image;return r&&(r.find((({width:e,height:r})=>e>=t&&r>=n))||r.reduce(((e,t)=>!e||t.width*t.height>e.width*e.height?t:e)))||null}const a="Photo"===e.kind?e.sizes:e.image;return a?r?(null==(s=Array.from(a.entries()).find((([e,{width:r,height:i}])=>o.includes(e)&&r>=t&&i>=n)))?void 0:s[1])||a.get("r")||a.get("q")||a.get("p")||a.get("o")||null:(null==(i=Array.from(a.entries()).find((([e,{width:r,height:i}])=>!o.includes(e)&&r>=t&&i>=n)))?void 0:i[1])||a.get("w")||a.get("z")||a.get("y")||a.get("x")||a.get("m")||a.get("s")||null:null;var s}function s(e){const t=[];for(const n of e.photos||[])t.push(`photo${n.ownerId}_${n.id}`);for(const n of e.videos||[])t.push(`video${n.ownerId}_${n.id}`);for(const n of e.audios||[])t.push(`audio${n.ownerId}_${n.id}`);for(const n of e.audioPlaylists||[])t.push(`audio_playlist${n.ownerId}_${n.id}`);e.artist&&t.push(`artist${e.artist.id}`),e.podcast&&t.push(`podcast${e.podcast.ownerId}_${e.podcast.id}`),e.market&&t.push(`market${e.market.ownerId}_${e.market.id}`);for(const n of e.docs||[])t.push(`doc${n.ownerId}_${n.id}`);e.voice&&t.push(`doc${e.voice.ownerId}_${e.voice.id}`),e.event&&t.push(`event${e.event.id}`),e.wall&&t.push(`wall${e.wall.ownerId}_${e.wall.id}`);for(const n of e.narratives||[])t.push(`narrative${n.ownerId}_${n.id}`);return e.wallReply&&t.push(`wall_reply${e.wallReply.ownerId}_${e.wallReply.id}`),e.poll&&t.push(`poll${e.poll.ownerId}_${e.poll.id}`),e.story&&t.push(`story${e.story.ownerId}_${e.story.id}`),e.donutLink&&t.push(`donut_link${e.donutLink.ownerId}`),e.widget&&t.push(`widget${e.widget.id}`),e.ugcSticker&&t.push(`ugc_sticker${e.ugcSticker.item.owner_id}_${e.ugcSticker.id}`),t}function c(e){var t,n,r,i,o,a,s;return 0===Object.keys(e).length?null:e.widget||e.wallReply||e.wall||e.poll||e.donutLink||e.moneyTransfer||e.moneyRequest||(null==(t=e.miniApps)?void 0:t.at(-1))||e.article||e.artist||(null==(n=e.audioPlaylists)?void 0:n.at(-1))||e.podcast||(null==(r=e.audios)?void 0:r.at(-1))||e.voice||(null==(i=e.docs)?void 0:i.at(-1))||(null==(o=e.narratives)?void 0:o.at(-1))||e.event||e.geo||e.story||e.market||e.inviteLink||e.link||e.graffiti||e.videoMessage||e.ugcSticker||e.sticker||e.finishedCall||e.activeCall||e.gift||(null==(a=e.videos)?void 0:a.at(-1))||(null==(s=e.photos)?void 0:s.at(-1))||null}function d(e,t){t.photos&&(e.photos=[...e.photos||[],...t.photos]),t.videos&&(e.videos=[...e.videos||[],...t.videos]),t.audios&&(e.audios=[...e.audios||[],...t.audios]),t.docs&&(e.docs=[...e.docs||[],...t.docs]),t.voice&&(e.voice=t.voice),t.poll&&(e.poll=t.poll)}function u(e,t){switch(t.kind){case"Audio":if(!e.audios)break;const n=(0,r.toNonEmpty)(e.audios.filter((e=>e.id!==t.id)));n?e.audios=n:delete e.audios;break;case"AudioPlaylist":if(!e.audioPlaylists)break;const i=(0,r.toNonEmpty)(e.audioPlaylists.filter((e=>e.id!==t.id)));i?e.audioPlaylists=i:delete e.audioPlaylists;break;case"Podcast":e.podcast&&delete e.podcast;break;case"Doc":if(!e.docs)break;const o=(0,r.toNonEmpty)(e.docs.filter((e=>e.id!==t.id)));o?e.docs=o:delete e.docs;break;case"Photo":if(!e.photos)break;const a=(0,r.toNonEmpty)(e.photos.filter((e=>e.id!==t.id)));a?e.photos=a:delete e.photos;break;case"Video":if(!e.videos)break;const s=(0,r.toNonEmpty)(e.videos.filter((e=>e.id!==t.id)));s?e.videos=s:delete e.videos;break;case"Voice":e.voice&&delete e.voice;break;case"Poll":e.poll&&delete e.poll;break;case"Wall":e.wall&&delete e.wall;break;case"WallReply":e.wallReply&&delete e.wallReply;break;case"Article":e.article&&delete e.article;break;case"Link":e.link&&delete e.link;break;case"InviteLink":e.inviteLink&&delete e.inviteLink;break;case"Geo":e.geo&&delete e.geo;break;case"MiniApp":if(!e.miniApps)break;const c=(0,r.toNonEmpty)(e.miniApps.filter((e=>e.id!==t.id)));c?e.miniApps=c:delete e.miniApps;break;case"MiniAppWidget":if(!e.miniAppWidgets)break;const d=(0,r.toNonEmpty)(e.miniAppWidgets.filter((e=>e.cmid!==t.cmid)));d?e.miniAppWidgets=d:delete e.miniAppWidgets;break;case"Story":e.story&&delete e.story;break;case"Market":e.market&&delete e.market;break;case"DonutLink":e.donutLink&&delete e.donutLink;break;case"Artist":e.artist&&delete e.artist;break;default:(0,r.exhaustivenessCheck)(t)}}function l(e){return e.startsWith(i.CHAT_INVITE_LINK_URL_BASE)||e.startsWith(i.VKME_CHAT_INVITE_LINK_URL_BASE)}function f(e){return e.startsWith(i.CALL_JOIN_LINK_URL_BASE)}function m(e,{currentPosition:t,newPosition:n},i){switch(i){case"photos":const o=e[i];if(!o)return;const a=o[t];if(!a)return;o.splice(t,1),o.splice(n,0,a),e[i]=o;break;case"videos":const s=e[i];if(!s)return;const c=s[t];if(!c)return;s.splice(t,1),s.splice(n,0,c),e[i]=s;break;case"audios":const d=e[i];if(!d)return;const u=d[t];if(!u)return;d.splice(t,1),d.splice(n,0,u),e[i]=d;break;case"audioPlaylists":const l=e[i];if(!l)return;const f=l[t];if(!f)return;l.splice(t,1),l.splice(n,0,f),e[i]=l;break;case"docs":const m=e[i];if(!m)return;const h=m[t];if(!h)return;m.splice(t,1),m.splice(n,0,h),e[i]=m;break;default:(0,r.exhaustivenessCheck)(i)}}function h(e){const t=e.angle-90,{points:n}=e,r=[];for(let e=0;e<n.length;e++){const t=n[e],i=100*e/(n.length-1);r.push(`${t} ${i}%`)}return`linear-gradient(${t}deg, ${r.join(", ")})`}function p(e){return Object.keys(e).length}function g(e){return Object.values(e).reduce(((e,t)=>e+(Array.isArray(t)?t.length:1)),0)}const v=["7z","bmp","csv","doc","docx","dotx","jpg","odp","ods","odt","ots","ott","pdf","png","pptx","rar","rtf","webp","xls","xlsx","xltx","zip"];function b(e){const t=new URL(e.url);return v.includes(e.ext)&&t.searchParams.has("no_preview")?(t.searchParams.delete("no_preview"),t.searchParams.set("api_preview","1"),t.toString()):e.url}},839963:(e,t,n)=>{"use strict";n.d(t,{CHANNELS_BASE_PATH:()=>d,appendPost:()=>y,cleanup:()=>x,deletePost:()=>_,findPostByCmid:()=>k,historyAround:()=>b,insertPosts:()=>E,isChannelId:()=>u,isEmpty:()=>h,isHidden:()=>g,isUnread:()=>p,lastPost:()=>v,merge:()=>m,readUntil:()=>I,replacePost:()=>w,resolveId:()=>l,restorePost:()=>C,safeGet:()=>j,setAdminLevel:()=>T,setArchived:()=>M,setMembership:()=>S,setMuted:()=>N,setPhotos:()=>R,setRights:()=>P,setSortId:()=>A,toRealGroupId:()=>f});var r=n(434788),i=n(723062),o=n(89131),a=n(96190),s=n(168465),c=n(95154);const d="/channels";function u(e){return i.Ranges.isGroupId(e)}function l(e){return u(e)||(e=0),e}function f(e){return a.toRealId(a.resolveId(e))}function m(e,t){if(e.id!==t.id)throw new Error("Channel.merge вызван на 2 разных каналах");const n=t.history;return t.history=e.history,E(t,n.confirmed),t}function h(e){return s.isEmpty(e.history)}function p(e){return e.unreadCount>0}function g(e){return e.majorSortId<=0&&e.minorSortId<=0}function v({channel:e,withPending:t}){var n;return null==(n=s.lastNode({history:e.history,withPending:t,withDeleted:!1}))?void 0:n.item}function b(e,t){return s.around(e.history,t)}function k(e,t){var n,r;const i=s.findNodeByCmid(e.history,t);if("Node"===(null==(n=i.node)?void 0:n.kind)||"DeletedNode"===(null==(r=i.node)?void 0:r.kind))return i.node}function y(e,t,n){const r=s.findNodeByCmid(e.history,t.cmid),i=s.lastCmid(e.history);void 0!==i&&i>=t.cmid&&"Deleted"===r.status&&"Normal"===t.kind?C(e,t.cmid,t):(!function(e,t){const n=e.history.pending.find((e=>e.item.cmid===t));void 0!==n&&s.removePending(e.history,n.item.randomId)}(e,t.cmid),s.append(e.history,t,n))}function w(e,t){s.replace(e.history,t)}function _(e,t,n){s.remove(e.history,t,n)}function C(e,t,n){s.restore(e.history,t,n)}function E(e,t){s.insert(e.history,t)}function x(e){const t=e.unreadCount>0?e.inReadCmid:void 0;s.cleanup(e.history,1.5*c.POSTS_PER_PAGE,t)}function I(e,t,n){if(void 0===n){const r=e.history.confirmed.filter((n=>"Node"===n.kind&&function(e,t){return t.cmid>e.inReadCmid}(e,n.item)&&n.item.cmid<=t)).length;n=Math.max(0,e.unreadCount-r)}e.inReadCmid=t,e.unreadCount=n}function M(e,t){e.isArchived=t,t&&(e.unreadCount=0)}function N(e,t){e.isMuted=t}function S(e,t){e.isMember=t}function A(e,t){void 0!==t.majorSortId&&(e.majorSortId=t.majorSortId),void 0!==t.minorSortId&&(e.minorSortId=t.minorSortId)}function R(e,t){e.photos.photo50=t.photo50,e.photos.photo100=t.photo100}function T(e,t){0!==t&&1!==t&&2!==t&&3!==t||(e.adminLevel=t)}function P(e,t){e.rights=(0,r._)({},e.rights,t)}function j(e,t){const n=e.get(t);if(n)return n;if(o.isDev)throw new Error(`Канал ${t} не найден в кэше! Обрати внимание на то как загружаются недостающие данные в сторе.`);return e.get(l(0))}},185327:(e,t,n)=>{"use strict";n.d(t,{CASPER_MESSAGE_DELETE_TTL:()=>u,DEFAULT_CHAT_PERMISSIONS:()=>m,MAX_PINNED:()=>l,addAdmin:()=>qe,addFolder:()=>tt,addIncognitoMembers:()=>Le,addMembers:()=>Ae,allConfirmedHistoryNodes:()=>h,allHistoryNodes:()=>g,allQueuedMessages:()=>z,allowMemberToWrite:()=>Te,allowWrite:()=>Ze,appendMessage:()=>ie,appendQueuedMessage:()=>oe,canAddToFolder:()=>P,canCreateChatBasedOnCurrent:()=>_,canDeleteMessageForAll:()=>L,canFinishCall:()=>T,canForwardFrom:()=>N,canForwardTo:()=>S,canInviteTo:()=>A,canPin:()=>D,canReadMembers:()=>Q,canSendReactions:()=>Z,canUseMassMentions:()=>R,changeQueuedMessageEntrypoint:()=>_e,changeUserState:()=>et,cleanup:()=>me,clearChatDataOnLeave:()=>Me,deleteMessage:()=>de,description:()=>ot,findHistoryNodeByCmid:()=>b,findMediaViewerCache:()=>at,findMessageByCmid:()=>k,firstUnreadReactionCmid:()=>K,flowHistory:()=>v,fromAcceptedMessageRequest:()=>Ye,fromCancelledMessageRequest:()=>Xe,fromRejectedMessageRequest:()=>Qe,getConvoFailedMessagesCount:()=>W,getFirstUnreadMentionCmid:()=>V,getIncognitoMember:()=>De,getIncognitoMembersCount:()=>dt,getMRSenderPeerId:()=>M,getPinnedMessage:()=>H,hasUnreadExpireables:()=>q,hasUnreadMentions:()=>B,hasUnreadReactions:()=>G,insertMessages:()=>le,isAdmin:()=>st,isBusinessNotify:()=>I,isCasper:()=>w,isEmpty:()=>F,isForbidedWritingForAll:()=>ct,isHidden:()=>X,isInFolder:()=>J,isIncognitoChat:()=>Ue,isMR:()=>C,isMemberRestrictedToWrite:()=>Pe,isMessageUnread:()=>Y,isMuted:()=>y,isNew:()=>$,isPendingMR:()=>E,isPinned:()=>j,isRejectedMR:()=>x,isUnread:()=>O,isUnreadOut:()=>U,lastEditableMessage:()=>p,markRead:()=>he,merge:()=>te,pinMessage:()=>We,readInUntil:()=>pe,readOutUntil:()=>ge,readReactions:()=>ke,removeAdmin:()=>Ge,removeFolder:()=>nt,removeIncognitoMember:()=>Oe,removeMember:()=>je,removePending:()=>re,replaceExpiredReplies:()=>ce,replaceInviteLinks:()=>ze,replaceMessage:()=>se,replaceUnreadReactions:()=>ve,resolveIncognitoMemberId:()=>f,restoreMessage:()=>ue,restrictMemberToWrite:()=>Re,restrictWrite:()=>Je,safeGet:()=>rt,setChatPermissions:()=>Fe,setConvoState:()=>Ke,setDescription:()=>$e,setOwner:()=>Be,setUnreadReaction:()=>be,shouldShortPollReactions:()=>ee,unpinMessage:()=>He,updateAcl:()=>Ne,updateActiveCall:()=>Ve,updateFlags:()=>xe,updateIsNew:()=>Ee,updateMembersCount:()=>Se,updateMessageFlags:()=>Ie,updatePush:()=>ne,updateSendingFail:()=>we,updateSortId:()=>Ce});var r=n(434788),i=n(820224),o=n(96190),a=n(777634),s=n(89131),c=n(95154),d=n(168465);const u=144e5,l=5,f=e=>e,m={invite:"all",change_info:"all",change_pin:"all",use_mass_mentions:"all",see_invite_link:"all",call:"all",change_style:"all",change_admins:"owner"};function h(e){return e.history.confirmed.reduce(((e,t)=>("Node"===t.kind&&e.push(t),e)),[])}function p(e){const t=h(e);for(let i=t.length-1;i>=0;i--){var n,r;const o=null==(n=t[i])?void 0:n.item;if("Normal"===(null==(r=o)?void 0:r.kind)&&a.isEditable(o,Date.now(),H(e)))return o}}function g(e){return[...h(e),...e.history.pending]}function v(e,t,n,r=!1){let i=!1;return e.map(((o,a)=>{const c=e[a-1],d="DeletedNode"===o.kind?o.restorable:o.item;if(!c){const e="DeletedNode"!==o.kind&&"Normal"===d.kind&&t<d.cmid;return e&&!i&&(i=!0),{kind:"split",atUnread:e&&n,atDate:!0}}const u="DeletedNode"===c.kind?c.restorable:c.item,l=["gift","graffiti","finishedCall"],f=!(0,s.isSameDate)(u.sentAt,d.sentAt),m="Queued"!==u.kind&&"Queued"!==d.kind&&!d.isOut&&d.cmid>t&&!i;m&&!i&&(i=!0);const h=("Normal"===u.kind||r&&"Queued"===u.kind)&&("Normal"===d.kind||r&&"Queued"===d.kind)&&u.authorId===d.authorId&&!u.expireTTL&&!d.expireTTL&&!d.replyMessage&&!l.some((e=>void 0!==u.attaches[e]))&&!l.some((e=>void 0!==d.attaches[e]))&&!u.attaches.sticker,p="Expired"===u.kind&&"Expired"===d.kind;return!f&&!m&&d.sentAt-u.sentAt<=3e5&&(h||p)?{kind:"continue"}:{kind:"split",atUnread:m,atDate:f}}))}function b(e,t){return d.findNodeByCmid(e.history,t)}function k(e,t){var n;const{node:r}=b(e,t);return"Node"===(null==(n=r)?void 0:n.kind)?r.item:void 0}function y(e){return"everything"!==e.push.mode}function w(e){return("ChatConvo"===e.kind||"MessageRequestChatConvo"===e.kind)&&e.isCasper}function _(e,t){if("ChatConvo"!==e.kind)return!1;const n=e.adminIds.has(t),r=e.ownerId===t,i=e.membersCount>0;return!o.isFavorites(e.peerId,t)&&i&&(n||r)}function C(e){return"MessageRequestChatConvo"===e.kind||"MessageRequestUserConvo"===e.kind}function E(e){return("MessageRequestChatConvo"===e.kind||"MessageRequestUserConvo"===e.kind)&&"pending"===e.MRStatus}function x(e){return("MessageRequestChatConvo"===e.kind||"MessageRequestUserConvo"===e.kind)&&"rejected"===e.MRStatus}function I(e){return"BusinessNotify"===e.kind}function M(e){return"MessageRequestUserConvo"===e.kind?e.peerId:e.inviterPeerId}function N(e){return!w(e)}function S(e){return e.canWrite.allowed&&"MessageRequestChatConvo"!==e.kind&&!I(e)}function A(e){return"ChatConvo"===e.kind&&e.acl.canInvite}function R(e){return"ChatConvo"===e.kind&&e.acl.canUseMassMentions}function T(e){var t;return Boolean("ChatConvo"===e.kind&&(null==(t=e.activeCall)?void 0:t.canFinishCall)&&e.activeCall.id)}function P(e){return!C(e)&&!I(e)}function j(e){return[4,5,6].some((t=>(e.majorSortId&1<<t)>0))}function D(e){return!(e.isArchived||F(e)||C(e)||w(e))}function L(e,t,n){const r=o.isUserPeerId(t.authorId)||o.isGroupPeerId(t.authorId),i="ChatConvo"===e.kind&&e.adminIds.has(n),s=t.authorId===n,c=!(!r||"ChatConvo"!==e.kind)&&e.adminIds.has(t.authorId),d="ChatConvo"!==e.kind||"in"===e.state;switch(!0){case Date.now()-t.sentAt>864e5:case!e.canWrite.allowed:case!d:case a.isCall(t):case o.isFavorites(e.peerId,n):return!1;case i&&!c:case s:return!0;default:return!1}}function O(e){return e.unreadCount>0||e.isMarkedUnread}function U(e){var t,n;if("MessageRequestChatConvo"===e.kind)return!1;const r=d.lastNode({history:e.history,withDeleted:!0,withPending:!0}),i="DeletedNode"===(null==(t=r)?void 0:t.kind)?r.restorable:null==(n=r)?void 0:n.item;return void 0!==i&&(i.isOut&&Y(e,i))}function q(e){return e.unreadExpireables.size>0}function G(e){return e.unreadReactions.size>0}function B(e){switch(e.kind){case"UserConvo":case"GroupConvo":case"ContactConvo":case"MessageRequestChatConvo":case"MessageRequestUserConvo":case"BusinessNotify":return!1;case"ChatConvo":return e.unreadMentions.size>0;default:return(0,s.exhaustivenessCheck)(e)}}function F(e){return d.isEmpty(e.history)}function $(e){return e.isNew}function z(e){return e.history.pending.map((e=>e.item))}function W(e){return z(e).filter((e=>e.hasFailed)).length}function H(e){return"ChatConvo"===e.kind?e.pinnedMessage:void 0}function V(e){const t=Math.min(...e.unreadMentions.values());return t===1/0?void 0:a.resolveCmid(t)}function K(e){const t=Math.min(...e.unreadReactions.keys());return t===1/0?void 0:a.resolveCmid(t)}function Y(e,t){if(t.peerId!==e.peerId)throw new Error("Передано сообщение не принадлежащее беседе");return"Queued"===t.kind||(t.isOut?t.cmid>e.outReadBy:t.cmid>e.inReadBy)}function Q(e){return e.canWrite.allowed||!e.canWrite.allowed&&"no_access"!==e.canWrite.reason}function X(e){return e.majorSortId<=0&&e.minorSortId<=0&&F(e)}function J(e,t){return e.folderIds.has(t)}function Z(e){var t;if(w(e)||"message_request_banner"===(null==(t=e.convoBanner)?void 0:t.name))return!1;switch(e.kind){case"UserConvo":case"GroupConvo":return e.canWrite.allowed;case"ChatConvo":return"in"===e.state&&e.acl.canSendReactions&&(e.canWrite.allowed||"forbid_writing_for_all"===e.canWrite.reason)&&!e.isGroupChannel;case"BusinessNotify":case"MessageRequestChatConvo":case"MessageRequestUserConvo":case"ContactConvo":return!1;default:(0,s.exhaustivenessCheck)(e)}}function ee(e){return!("ChatConvo"!==e.kind||!e.shouldShortPollReactions)}function te(e,t){var n;if(void 0===t)return e;if((null==(n=t)?void 0:n.peerId)!==e.peerId)throw new Error("Convo.merge вызван на 2 разных чатах");const r=e.history;return e.history=t.history,fe(e,r.confirmed),d.insert(e.history,r.confirmed),0===e.majorSortId&&(e.majorSortId=t.majorSortId),"ChatConvo"===e.kind&&"ChatConvo"===t.kind&&(e.memberIds=t.memberIds,e.members=t.members,e.membersCount=t.membersCount,e.invitedIds=t.invitedIds,e.incognitoMembers=t.incognitoMembers),e}function ne(e,t){e.push=t}function re(e,t){d.removePending(e.history,t)}function ie(e,t,n,r,i){if(t.peerId!==e.peerId)throw new Error("Передано сообщение не принадлежащее беседе");e.minorSortId<n&&(e.minorSortId=n);const o=d.lastCmid(e.history),a=void 0===o||o<t.cmid;if(!t.isOut&&a&&Y(e,t)&&e.unreadCount++,ye(t.isOut,e),i){switch(i.kind){case"InputKeyboardUpsertEvent":e.currentKeyboard=i.keyboard;break;case"InputKeyboardDeleteEvent":delete e.currentKeyboard;break;default:return(0,s.exhaustivenessCheck)(i)}e.currentKeyboard="InputKeyboardUpsertEvent"===i.kind?i.keyboard:void 0}"ChatConvo"===e.kind&&r&&e.unreadMentions.add(t.cmid),"Normal"===t.kind&&t.expireTTL&&e.unreadExpireables.add(t.cmid),e.mediaViewerCacheHasNext=!0,d.append(e.history,t,"randomId"in t?t.randomId:void 0)}function oe(e,t){d.appendPending(e.history,t),ye(t.isOut,e)}function ae(e,t){var n;(null==(n=e.mediaViewerCache)?void 0:n.find((({cmid:e})=>e===t.cmid)))&&(e.mediaViewerCache=void 0)}function se(e,t,n){"ChatConvo"===e.kind&&(e.unreadMentions.delete(t.cmid),n&&Y(e,t)&&e.unreadMentions.add(t.cmid)),e.unreadExpireables.delete(t.cmid),("Normal"===t.kind&&t.expireTTL||"Expired"===t.kind)&&Y(e,t)&&e.unreadExpireables.add(t.cmid),ae(e,t),d.replace(e.history,t)}function ce(e,t){e.history.confirmed.forEach((e=>{if("Node"!==e.kind||"Normal"!==e.item.kind)return;const{replyMessage:n}=e.item;void 0!==n&&"ForeignExpired"!==n.kind&&n.cmid===t&&(e.item.replyMessage=a.expireForeign(n))}))}function de(e,t,n){if(!t.isOut&&Y(e,t)&&(e.unreadCount=Math.max(0,e.unreadCount-1)),"ChatConvo"===e.kind&&e.unreadMentions.delete(t.cmid),e.unreadExpireables.delete(t.cmid),e.unreadReactions.delete(t.cmid),e.inReadBy===t.cmid){const n=d.findNodeByCmid(e.history,t.cmid);if("Node"===n.status){const t=e.history.confirmed[n.index-1];void 0!==t&&"GapNode"!==t.kind&&(e.inReadBy=d.nodeCmid(t))}}ae(e,t),d.remove(e.history,t.cmid,n)}function ue(e,t,n){d.restore(e.history,t.cmid,t),"ChatConvo"===e.kind&&n&&e.unreadMentions.add(t.cmid)}function le(e,t,n){const r=[];t.reverse().forEach(((t,i,o)=>{if(0===i&&t.cmid>1&&n.backward&&r.push({kind:"GapNode",fromCmid:a.resolveCmid(1),toCmid:a.resolveCmid(t.cmid-1)}),r.push({kind:"Node",item:t}),i===o.length-1&&n.forward){const n=d.lastCmid(e.history);void 0!==n&&t.cmid<n&&r.push({kind:"GapNode",fromCmid:a.resolveCmid(t.cmid+1),toCmid:a.resolveCmid(n)})}})),fe(e,r),d.insert(e.history,r)}function fe(e,t){t.forEach((t=>{const n="Node"===t.kind&&"randomId"in t.item?t.item.randomId:void 0;n&&re(e,n)}))}function me(e){const t=e.unreadCount>0?e.inReadBy:void 0;d.cleanup(e.history,1.5*c.MESSAGES_PER_PAGE,t)}function he(e){e.isMarkedUnread=!1}function pe(e,t,n){if(!(e.inReadBy>t)){if(void 0===n){const r=d.lastCmid(e.history);if(r&&t>=r)n=0;else{const r=e.history.confirmed.filter((n=>{if("Node"!==n.kind)return!1;const r=n.item;return!r.isOut&&Y(e,r)&&r.cmid<=t})).length;n=Math.max(0,e.unreadCount-r)}}switch(e.inReadBy=t,e.unreadCount=n,0===n&&(e.isMarkedUnread=!1),e.kind){case"UserConvo":case"GroupConvo":case"ContactConvo":case"MessageRequestUserConvo":case"MessageRequestChatConvo":case"BusinessNotify":break;case"ChatConvo":for(const n of e.unreadMentions)n<=t&&e.unreadMentions.delete(n);break;default:(0,s.exhaustivenessCheck)(e)}for(const n of e.unreadExpireables)n<=t&&e.unreadExpireables.delete(n)}}function ge(e,t){e.outReadBy>=t||(e.outReadBy=t)}function ve(e,t){e.unreadReactions=t.reduce(((t,n)=>(t.set(n,e.unreadReactions.get(n)),t)),new Map)}function be(e,t,n){e.unreadReactions.has(t)&&e.unreadReactions.set(t,n)}function ke(e,t){e.unreadReactions.delete(t)}function ye(e,t){var n;e&&(null==(n=t.currentKeyboard)?void 0:n.oneTime)&&delete t.currentKeyboard}function we(e,t,n){const r=d.findPendingNode(e.history,t);void 0!==r&&a.updateFail(r.item,n)}function _e(e,t,n){const r=d.findPendingNode(e.history,t);void 0!==r&&a.updateEntrypoint(r.item,n)}function Ce(e,t){"majorSortId"in t?e.majorSortId=t.majorSortId:e.minorSortId=t.minorSortId}function Ee(e,t){e.isNew=t}function xe(e,t,n){const r=it({isMarkedUnread:e.isMarkedUnread,isArchived:e.isArchived});let o;switch(t){case"unset":o=it(r&~n);break;case"replace":o=it(n);break;case"set":o=it(r|n);break;default:(0,s.exhaustivenessCheck)(t)}const{isMarkedUnread:a,isArchived:c,DONT_USE_isMuted:d}=o;(0,i._)(o,["isMarkedUnread","isArchived","DONT_USE_isMuted"]);e.isMarkedUnread=a,e.isArchived=c}function Ie(e,t,n,r){var i;const o=d.findNodeByCmid(e.history,t).node;if(void 0===o||"GapNode"===o.kind)return;const{isDeleted:s,isDeletedForAll:c,isSpam:u}=a.updateFlags(o,n,r);if((s||u)&&"DeletedNode"!==(null==(i=o)?void 0:i.kind)||c){de(e,"DeletedNode"===o.kind?o.restorable:o.item,{isRestorable:!1})}}function Me(e){e.membersCount=0,e.state="left",e.acl={canChangeInfo:!1,canChangeInviteLink:!1,canChangePin:!1,canInvite:!1,canPromoteUsers:!1,canSeeInviteLink:!1,canModerate:!1,canCopyChat:!1,canCall:!1,canUseMassMentions:!1,canChangeServiceType:!1,canChangeStyle:!1,canSendReactions:!1},e.adminIds=new Set,delete e.members,delete e.inviteLinks}function Ne(e,t){e.acl=t}function Se(e,t){e.membersCount=t}function Ae(e,t,n){e.members||(e.members=new Map);for(const n of t){const{peerId:t,isMessageRequest:r}=n;e.members.set(t,n),r?e.invitedIds.add(t):e.memberIds.add(t)}e.membersCount=n||e.memberIds.size+dt(e)}function Re(e,t){if(!o.isChatPeerId(t)){var n;const r=null==(n=e.members)?void 0:n.get(t);r&&(r.isRestrictedToWrite=!0)}}function Te(e,t){if(!o.isChatPeerId(t)){var n;const r=null==(n=e.members)?void 0:n.get(t);r&&(r.isRestrictedToWrite=!1)}}function Pe(e,t){var n,r;return"ChatConvo"!==e.kind||Boolean(null==(r=e.members)||null==(n=r.get(t))?void 0:n.isRestrictedToWrite)}function je(e,t){var n,r;const i=null==(n=e.members)?void 0:n.get(t);i&&((null==(r=e.members)?void 0:r.delete(t))&&(e.membersCount=e.membersCount-1),i.isMessageRequest?e.invitedIds.delete(t):e.memberIds.delete(t))}function De(e,t){var n;return null==(n=e.incognitoMembers)?void 0:n.get(t)}function Le(e,t){e.incognitoMembers||(e.incognitoMembers=new Map),t.forEach((t=>{var n;null==(n=e.incognitoMembers)||n.set(t.id,t)})),e.membersCount=e.membersCount+dt(e)}function Oe(e,t){var n,r,i;const o=null==(n=e.incognitoMembers)?void 0:n.get(t);(null==(r=e.incognitoMembers)?void 0:r.delete(t))&&!(null==(i=o)?void 0:i.memberId)&&(e.membersCount=e.membersCount-1)}function Ue(e){return Boolean(e.isIncognito)}function qe(e,t){var n;e.adminIds.add(t);const r=null==(n=e.members)?void 0:n.get(t);r&&(r.isAdmin=!0)}function Ge(e,t){var n;e.adminIds.delete(t);const r=null==(n=e.members)?void 0:n.get(t);r&&(r.isAdmin=!1)}function Be(e,t){e.ownerId=t}function Fe(e,t,n){e.permissions=t,e.isService=n}function $e(e,t){e.description=t}function ze(e,t){e.inviteLinks=t}function We(e,t){e.pinnedMessage=t}function He(e){const t=e.pinnedMessage;return delete e.pinnedMessage,t}function Ve(e,t){e.activeCall=t}function Ke(e,t){e.state=t}function Ye(e,t){if("MessageRequestUserConvo"===e.kind){const{MRStatus:t}=e,n=(0,i._)(e,["MRStatus"]);return(0,r._)({},n,{kind:"UserConvo"})}const{inviterPeerId:n,MRStatus:o,canWrite:a}=e,s=(0,i._)(e,["inviterPeerId","MRStatus","canWrite"]);return(0,r._)({},s,{kind:"ChatConvo",canWrite:t?t.canWrite:!1===a.allowed&&"kicked"===a.reason?{allowed:!0}:a})}function Qe(e){return"UserConvo"===e.kind?(0,r._)({},e,{kind:"MessageRequestUserConvo",MRStatus:"rejected",canWrite:{allowed:!1,reason:"mr_rejected"}}):(0,r._)({},e,{MRStatus:"rejected",canWrite:{allowed:!1,reason:"mr_rejected"}})}function Xe(e){return"UserConvo"===e.kind?(0,r._)({},e,{kind:"MessageRequestUserConvo",MRStatus:"cancelled"}):(0,r._)({},e,{MRStatus:"cancelled"})}function Je(e,t){e.canWrite={allowed:!1,reason:t}}function Ze(e){e.canWrite={allowed:!0}}function et(e,t){e.state=t}function tt(e,t){e.folderIds.add(t)}function nt(e,t){e.folderIds.delete(t)}function rt(e,t){const n=e.get(t);if(n)return n;if(s.isDev)throw new Error(`Беседа ${t} не найдена в кэше! Обрати внимание на то как загружаются недостающие данные в сторе.`);return e.get(o.resolveId())}function it(e){const t={DONT_USE_isMuted:4,isMarkedUnread:20,isArchived:23};if("number"==typeof e){const n={};for(const r of Object.keys(t))n[r]=(e&1<<t[r])>0;return n}let n=0;for(const r of Object.keys(e))e[r]&&(n|=1<<t[r]);return n}function ot(e){switch(e.kind){case"ChatConvo":case"GroupConvo":return e.description;default:return}}function at(e,t,n,r){var i,o;return null==(o=r)||null==(i=o.mediaViewerCache)?void 0:i.find((({cmid:r,id:i,position:o})=>`${r}-${i}-${o}`==`${e}-${t}-${n}`))}function st(e,t){return"ChatConvo"===e.kind&&!o.isContactPeerId(t)&&!o.isChatPeerId(t)&&e.adminIds.has(t)}function ct(e){return"ChatConvo"===e.kind&&!!e.forbidedWritingForAll&&e.forbidedWritingForAll.value}function dt(e){var t;return e.incognitoMembers?[...null==(t=e.incognitoMembers)?void 0:t.values()].filter((e=>!e.memberId)).length:0}},999504:(e,t,n)=>{"use strict";n.d(t,{FOLDER_NAME_LIMIT:()=>s,convertFlags:()=>C,deleteFolder:()=>p,empty:()=>u,getLockId:()=>l,isLoaded:()=>d,push:()=>m,refresh:()=>h,reorderFolders:()=>y,replaceFolder:()=>k,resolveId:()=>c,setHasMore:()=>v,setName:()=>b,setUnreadCounters:()=>g,sorter:()=>f,updateFlags:()=>E});var r=n(434788),i=n(185327),o=n(168465),a=n(89131);const s=16;function c(e){return e}function d(e,t){return e[t].boundaryMinorId!==1/0}function u(){return[]}function l(e,t){return`folder_${e}_${t}`}function f(e,t){var n,r,i,a;const s=null==(n=o.lastNode({history:e.history,withDeleted:!1,withPending:!0}))?void 0:n.item,c=null==(r=o.lastNode({history:t.history,withDeleted:!1,withPending:!0}))?void 0:r.item;var d,u,l,f;return"Queued"===(null==(i=s)?void 0:i.kind)||"Queued"===(null==(a=c)?void 0:a.kind)?(null!=(l=null==(d=c)?void 0:d.sentAt)?l:0)-(null!=(f=null==(u=s)?void 0:u.sentAt)?f:0):t.minorSortId-e.minorSortId}function m(e,t,n,r,o){const a=e.find((e=>e.id===t));if(a){for(const o of r)i.isInFolder(o,t)&&(x(a,n,o),h(e,o));a[n].hasMore=o,a[n].hasMore||(a[n].boundaryMinorId=0)}}function h(e,t){for(const n of e)n.all.peerIds.delete(t.peerId),n.unread.peerIds.delete(t.peerId),i.isInFolder(t,n.id)&&(t.minorSortId>=n.all.boundaryMinorId&&n.all.peerIds.add(t.peerId),i.isUnread(t)&&t.minorSortId>=n.unread.boundaryMinorId&&n.unread.peerIds.add(t.peerId))}function p(e,t){const n=e.findIndex((e=>e.id===t));-1!==n&&e.splice(n,1)}function g(e,t,n,r){const i=e.find((e=>e.id===t));i&&(i.unreadCount=n,i.unreadUnmutedCount=r)}function v(e,t,n){e[t].hasMore=n}function b(e,t){e.name=t}function k(e,t){const n=e.findIndex((e=>e.id===t.id));-1!==n&&e.splice(n,1,t)}function y(e,t){e.sort(((e,n)=>t.indexOf(e.id)-t.indexOf(n.id)))}const w={default:-1,business:1},_={hasSublist:0};function C(e){if("number"==typeof e){const t={};for(const n of Object.keys(_))t[n]=(e&1<<_[n])>0;const n=(14&e)>>1;let i="default";for(const e of Object.keys(w))switch(e){case"default":case"business":w[e]===n&&(i=e);break;default:(0,a.exhaustivenessCheck)(e)}return(0,r._)({},t,{type:i})}let t=0;for(const n of Object.keys(e))switch(n){case"type":w[e.type]>0&&(t|=1<<w[e.type]);break;case"hasSublist":e[n]&&(t|=1<<_[n]);break;default:(0,a.exhaustivenessCheck)(n)}return t}function E(e,t){const n=C(t);for(const t of Object.keys(n))switch(t){case"type":case"hasSublist":e[t]=n[t];break;default:(0,a.exhaustivenessCheck)(t)}}function x(e,t,n){e[t].boundaryMinorId>n.minorSortId&&(e[t].boundaryMinorId=n.minorSortId),"all"===t&&x(e,"unread",n)}},168465:(e,t,n)=>{"use strict";n.d(t,{append:()=>m,appendPending:()=>g,around:()=>u,cleanup:()=>_,findClosestNodeInSlice:()=>f,findNodeByCmid:()=>d,findPendingNode:()=>l,insert:()=>C,isEmpty:()=>o,lastCmid:()=>s,lastConfirmedNode:()=>c,lastNode:()=>a,nodeCmid:()=>I,nodeSentAt:()=>M,remove:()=>p,removePending:()=>v,replace:()=>h,restore:()=>b});var r=n(89131),i=n(453934);function o(e){const{confirmed:t,pending:n}=e;return 0===t.length&&0===n.length}function a({history:e,withPending:t,withDeleted:n}){const{confirmed:i,pending:o}=e;if(t){const e=o[o.length-1];if(void 0!==e)return e}for(let e=i.length-1;e>=0;e--){const t=i[e];if(!t)throw new Error("item по индексу не существует");switch(t.kind){case"Node":return t;case"DeletedNode":if(n)return t;continue;case"GapNode":return;default:return(0,r.exhaustivenessCheck)(t)}}}function s(e){const t=c(e);if(void 0!==t)switch(t.kind){case"GapNode":return t.toCmid;case"Node":case"DeletedNode":return I(t);default:return(0,r.exhaustivenessCheck)(t)}}function c(e){const{confirmed:t}=e;return t[t.length-1]}function d(e,t){var n;const{confirmed:i}=e,o=i.findIndex((e=>{switch(e.kind){case"GapNode":return e.fromCmid<=t&&e.toCmid>=t;case"Node":case"DeletedNode":return I(e)===t;default:return(0,r.exhaustivenessCheck)(e)}})),a=i[o];return"Node"===(null==(n=a)?void 0:n.kind)?{status:"Node",node:a,index:o}:void 0===a||"DeletedNode"===a.kind?void 0!==a&&void 0!==o?{status:"Deleted",node:a,index:o}:{status:"Deleted"}:{status:"NotLoaded",node:a,index:o}}function u(e,t){const{confirmed:n,pending:r}=e,i=n[0];if(!i)return{nodes:[],pendingNodes:r.length>0?r:void 0};if("GapNode"===i.kind&&i.toCmid>=t)return;let o,a=!1,s=0,c="GapNode"===i.kind?i:{kind:"GapNode",fromCmid:Math.min(t-1,0),toCmid:Math.min(t-1,0)};for(o=s;o<n.length;o++){const e=n[o];if(!e)throw new Error("item по индексу не существует");if("GapNode"===e.kind){if(c.toCmid<t&&e.fromCmid>t){a=!0;break}s=o,c=e}else if(o===n.length-1&&c.toCmid<t){a=!0;break}}return a?n.slice(s,o+1).reduce(((e,t,n,i)=>{if("GapNode"===t.kind){if(0===n)e.topGap=t;else{if(n!==i.length-1)throw new Error("В середине результата History.around не может быть гэпов");e.bottomGap=t}return e}return e.nodes.push(t),n===i.length-1&&void 0===e.bottomGap&&r.length>0&&(e.pendingNodes=r),e}),{nodes:[]}):void 0}function l(e,t){const{pending:n}=e;return n.find((e=>e.item.randomId===t))}function f(e,t,n=!1){for(let r=0;r<e.nodes.length;r++){const i=e.nodes[r];if(!i)continue;const o=I(i),a=e.nodes[r+1],s=a&&I(a);if(0===r&&t<o||r===e.nodes.length-1&&t>o||t===o)return i;if(s&&o<t&&t<s)return n?a:i}}function m(e,t,n){const r=(0,i.castDraft)(t);void 0!==n&&v(e,n),E(e,k([{kind:"Node",item:r}],s(e)))}function h(e,t){const{confirmed:n}=e,o=(0,i.castDraft)(t),{status:a,node:s,index:c}=d(e,o.cmid);if("NotLoaded"!==a){if("Deleted"!==a)return n[c]={kind:"Node",item:o},s.item;if(r.isDev)throw new Error("Попытка заменить удаленный узел истории")}}function p(e,t,n){const{confirmed:r}=e,{status:i,node:o,index:a}=d(e,t);"NotLoaded"!==i&&"Deleted"!==i&&(n.isRestorable?"Node"===o.kind&&(r[a]={kind:"DeletedNode",isSpam:n.isSpam,restorable:o.item}):r.splice(a,1))}function g(e,t){const{pending:n}=e;n.push({kind:"PendingNode",item:(0,i.castDraft)(t)})}function v(e,t){const{pending:n}=e,r=n.findIndex((e=>e.item.randomId===t));-1!==r&&n.splice(r,1)}function b(e,t,n){const{confirmed:r}=e,{status:i,node:o,index:a}=d(e,t);if("NotLoaded"!==i&&"Node"!==i)if(void 0===n)void 0!==o&&(r[a]={kind:"Node",item:o.restorable});else{E(e,k([{kind:"Node",item:n}],s(e)))}}function k(e,t){const n=e[0],r=n&&I(n),i=e[e.length-1],o=i&&I(i);return{topGap:void 0!==r&&r>1?{kind:"GapNode",fromCmid:1,toCmid:r-1}:void 0,nodes:e,bottomGap:void 0!==t&&void 0!==o&&o<t?{kind:"GapNode",fromCmid:o+1,toCmid:t}:void 0}}const y=.2,w=.2;function _(e,t,n){const{confirmed:r}=e;if(r.length<t)return;const i=s(e);if(void 0===i)return;const o=Math.floor(t/1.5),a={confirmed:[{kind:"GapNode",fromCmid:1,toCmid:i}],pending:[]},c=void 0===i?void 0:u(e,i),d=void 0===n?void 0:u(e,n);if(void 0!==c){E(a,k(void 0===d?c.nodes.slice(-o):c.nodes.slice(-Math.floor(o*y)),i))}if(void 0!==d){const e=d.nodes.findIndex((e=>I(e)===n));if(-1!==e){const t=Math.max(e-Math.floor(o*w),0);E(a,k(d.nodes.slice(t,e+Math.floor(o*(1-w-(void 0===c?0:y)))),i))}}e.confirmed=a.confirmed}function C(e,t){if(0===t.length)return void(e.confirmed=[]);if(0===e.confirmed.length)return void(e.confirmed=(0,i.castDraft)(t));!function(e,t){const{confirmed:n}=e,r=n[n.length-1],i=t[t.length-1];if(void 0===r||void 0===i)return;const o="GapNode"===i.kind?i.toCmid:I(i),a="GapNode"===r.kind?r.toCmid:I(r);"GapNode"!==r.kind&&a>o&&("GapNode"===i.kind?i.toCmid=a:t.push({kind:"GapNode",fromCmid:o+1,toCmid:a}));o>a&&("GapNode"===r.kind?r.toCmid=o:n.push({kind:"GapNode",fromCmid:a+1,toCmid:o}))}(e,t);t.reduce(((e,n,r)=>(0===r&&"GapNode"!==n.kind&&e.push(-1),r===t.length-1&&"GapNode"!==n.kind&&e.push(t.length),"GapNode"===n.kind&&e.push(r),e)),[]).forEach(((n,r,i)=>{const o=i[r+1];if(void 0!==o){const r=t[n],i=t[o],a=t.slice(n+1,o).reduce(((e,t)=>{if("GapNode"===t.kind)throw new Error("Не может быть гэп узлов между гэпами");return e.push(t),e}),[]);if(void 0!==r&&"GapNode"!==r.kind)throw new Error("Не гэп используется как гэп");if(void 0!==i&&"GapNode"!==i.kind)throw new Error("Не гэп используется как гэп");E(e,{topGap:r,bottomGap:i,nodes:a})}}))}function E(e,t){const{confirmed:n}=e;let r,o=-1;if(void 0!==t.topGap){var a;o=x(e,t.topGap.toCmid);const r=n[o];if(void 0!==r){("GapNode"===r.kind?r.fromCmid:I(r))>t.topGap.toCmid&&o--}"GapNode"===(null==(a=r)?void 0:a.kind)&&r.fromCmid<=t.topGap.toCmid&&r.toCmid>t.topGap.toCmid&&(n.splice(o,0,{kind:"GapNode",fromCmid:r.fromCmid,toCmid:t.topGap.toCmid}),r.fromCmid=t.topGap.toCmid+1)}if(void 0!==t.bottomGap){var s;r=x(e,t.bottomGap.fromCmid);const i=n[r];"GapNode"===(null==(s=i)?void 0:s.kind)&&i.fromCmid<t.bottomGap.fromCmid&&(i.fromCmid=t.bottomGap.fromCmid)}const c=[...n.slice(0,o+1),...(0,i.castDraft)(t.nodes),...void 0!==r?n.slice(r):[]];e.confirmed=c}function x(e,t){const{confirmed:n}=e;for(let e=0;e<n.length;e++){const r=n[e],i=n[e-1];if(!r)return-1;if(0===e){if("GapNode"===r.kind?r.fromCmid>t:I(r)>t)return-1}if("GapNode"===r.kind&&t>=r.fromCmid&&t<=r.toCmid)return e;const o="GapNode"===r.kind?r.fromCmid:I(r);if(o===t)return e;if(void 0===i)continue;const a="GapNode"===i.kind?i.toCmid:I(i);if(o>t&&a<t)return e}return n.length}function I(e){switch(e.kind){case"Node":return e.item.cmid;case"DeletedNode":return e.restorable.cmid;default:(0,r.exhaustivenessCheck)(e)}}function M(e){switch(e.kind){case"Node":case"PendingNode":return e.item.sentAt;case"DeletedNode":return e.restorable.sentAt;default:(0,r.exhaustivenessCheck)(e)}}},777634:(e,t,n)=>{"use strict";n.d(t,{canChangeMessagePlayedStatus:()=>I,convertFlags:()=>x,expireForeign:()=>b,getCmid:()=>u,getMessageAttachmentsCount:()=>A,hasText:()=>R,isCall:()=>h,isEditable:()=>m,isMessageEdited:()=>N,isReactionsAvailable:()=>p,newQueued:()=>E,resolveCmid:()=>c,resolveRandomId:()=>d,setCurrentUserReaction:()=>M,setReactions:()=>S,toForeign:()=>v,toPinned:()=>g,toPlainText:()=>l,toRawText:()=>f,unpinMessage:()=>_,updateCmid:()=>y,updateEntrypoint:()=>w,updateFail:()=>k,updateFlags:()=>C});var r=n(434788),i=n(820224),o=n(197934),a=n(504698),s=n(89131);function c(e){return Number.isNaN(e)&&(e=0),!e||e<0?0:e}function d(e){return!e||e>0?0:e}function u(e){return"Normal"===e.kind?e.cmid:"Foreign"===e.kind&&"rootCmid"in e?e.rootCmid:void 0}function l(e,t){return a.toPlainText(e.chunks,t)}function f(e){return a.toRawText(e.chunks)}function m(e,t,n){const r=t-e.sentAt<864e5,i=!!n&&n.cmid===e.cmid,o=e.isOut&&e.authorId===e.peerId;return(r||i||o)&&e.isOut&&!h(e)&&!e.attaches.voice&&!e.attaches.sticker&&!e.attaches.ugcSticker&&!e.attaches.gift&&!e.attaches.graffiti&&!e.attaches.moneyTransfer&&!e.attaches.moneyRequest&&!e.attaches.videoMessage&&!e.attaches.miniAppWidgets}function h(e){return!!e.attaches.activeCall||!!e.attaches.finishedCall}function p(e){return!e.expireTTL&&!e.deleteTTL&&!(e.attaches.gift||e.attaches.activeCall||e.attaches.finishedCall)}function g(e){const{cmid:t,peerId:n,authorId:r,chunks:i,sentAt:o,forwardedMessages:a,replyMessage:s,attaches:c}=e;return{kind:"Pinned",cmid:t,peerId:n,authorId:r,chunks:i,sentAt:o,forwardedMessages:a,replyMessage:s,attaches:c,isUnavailable:!1}}function v(e){const{message:t}=e,n=(0,i._)(e,["message"]),{kind:o,randomId:a,isOut:s,isImportant:c,replyMessage:d}=t,u=(0,i._)(t,["kind","randomId","isOut","isImportant","replyMessage"]);return(0,r._)({kind:"Foreign"},u,n)}function b(e){const{kind:t,replyMessage:n,forwardedMessages:o,chunks:a,attaches:s,updatedAt:c,expireTTL:d,deleteTTL:u}=e,l=(0,i._)(e,["kind","replyMessage","forwardedMessages","chunks","attaches","updatedAt","expireTTL","deleteTTL"]);return(0,r._)({kind:"ForeignExpired"},l)}function k(e,t){e.hasFailed=t}function y(e,t){e.cmid=t}function w(e,t){e.entrypoint=t}function _(e){e.pinnedAt=void 0}function C(e,t,n){const o="DeletedNode"===e.kind?e.restorable:e.item,a={isOut:o.isOut,isSpam:!1,isDeleted:!1,isDeletedForAll:!1,noPush:!1};let c,d;switch(o.kind){case"Normal":c=x((0,r._)({},a,{isImportant:o.isImportant,isPlayed:!!o.isPlayed,hasReactions:"Node"===e.kind&&o.reactions.size>0}));break;case"Service":case"Expired":c=x((0,r._)({},a,{isImportant:!1,isPlayed:!1,hasReactions:!1}));break;default:(0,s.exhaustivenessCheck)(o)}switch(t){case"unset":d=x(c&~n);break;case"replace":d=x(n);break;case"set":d=x(c|n);break;default:(0,s.exhaustivenessCheck)(t)}const{isImportant:u,isSpam:l,isDeleted:f,isDeletedForAll:m,isPlayed:h,isOut:p,hasReactions:g,noPush:v,DONT_USE_ME_isStealth:b,DONT_USE_ME_isUnread:k,DONT_USE_ME_skipUnread:y}=d;(0,i._)(d,["isImportant","isSpam","isDeleted","isDeletedForAll","isPlayed","isOut","hasReactions","noPush","DONT_USE_ME_isStealth","DONT_USE_ME_isUnread","DONT_USE_ME_skipUnread"]);switch(o.kind){case"Normal":o.isImportant=u,o.isOut=p,o.isPlayed=h;break;case"Service":case"Expired":break;default:(0,s.exhaustivenessCheck)(o)}return{isDeleted:f,isDeletedForAll:m,isSpam:l}}function E(e,t,n){var i;const o=-Math.pow(2,31),c=d(-e.sentAt%Math.abs(o)),u=void 0!==t?v({message:t,rootPeerId:e.peerId,rootRandomId:c}):void 0,l=null==(i=n)?void 0:i.map((t=>v({message:t,rootPeerId:e.peerId,rootRandomId:c})));return(0,r._)({},e,{kind:"Queued",text:e.text,chunks:a.fromClientText(e.text),hasFailed:!1,randomId:c,replyMessage:u,forwardedMessages:l&&(0,s.isNonEmptyArray)(l)?l:void 0})}function x(e){const t={DONT_USE_ME_isUnread:0,isOut:1,isImportant:3,isSpam:6,isDeleted:7,isPlayed:12,DONT_USE_ME_isStealth:16,isDeletedForAll:17,noPush:20,DONT_USE_ME_skipUnread:23,hasReactions:24};if("number"==typeof e){const n={};for(const r of Object.keys(t))n[r]=(e&1<<t[r])>0;return n}let n=0;for(const r of Object.keys(e))e[r]&&(n|=1<<t[r]);return n}function I(e){if(e.isOut)return!1;return!(!e.attaches.voice&&!e.attaches.videoMessage)&&!e.isPlayed}function M(e,t){e.reactionId=t}function N(e){return!!(e.updatedAt&&!e.attaches.voice)}function S(e,t){const n=new Set(t.map((e=>e.reactionId)));Array.from(e.reactions.keys()).filter((e=>!n.has(e))).forEach((t=>e.reactions.delete(t))),t.forEach((t=>{e.reactions.set(t.reactionId,t)}))}function A(e){var t;let n=0;var r;return n+=o.count(e.attaches),e.replyMessage&&"ForeignExpired"!==e.replyMessage.kind&&(n+=A(e.replyMessage)),n+=null!=(r=null==(t=e.forwardedMessages)?void 0:t.reduce(((e,t)=>e+A(t)),0))?r:0,n}function R(e){return 0!==e.chunks.length}},96190:(e,t,n)=>{"use strict";n.d(t,{DEACTIVATED_REASON_BANNED:()=>k,DEACTIVATED_REASON_DELETED:()=>b,MARUSIA_PEER_ID:()=>v,clearChatDataOnLeave:()=>P,convertContact:()=>D,firstName:()=>N,hasPhoto:()=>f,initials:()=>A,isAnonymPeerId:()=>l,isChatPeerId:()=>d,isContactPeerId:()=>c,isEmployee:()=>w,isFavorites:()=>p,isGroupPeerId:()=>u,isMarusia:()=>y,isOnVacation:()=>_,isUserPeerId:()=>s,isVkAdministration:()=>g,maxPhotoSizeUrl:()=>S,name:()=>C,phone:()=>x,resolveAnyId:()=>a,resolveId:()=>o,resolveRealId:()=>h,safeGet:()=>q,screenName:()=>E,sex:()=>I,shortName:()=>M,toKind:()=>R,toRealId:()=>m,updateChatInfo:()=>T,updateFriendship:()=>L,updateIsPeerBlacklistedByMe:()=>U,updateMembership:()=>O,updateMutualFriends:()=>j});var r=n(723062),i=n(89131);function o(e){if(Number.isNaN(e)&&(e=0),i.isDev&&0===e)throw new Error("Айди беседы никогда не должно быть равно 0! Читай комментарий к ошибке.");if(!e||!Number.isInteger(e))return 0;const t=e;return s(t)||u(t)||d(t)||c(t)?t:0}function a(e){if(!e||!Number.isInteger(e))return 0;const t=e;return s(t)||u(t)||d(t)||l(t)?t:0}function s(e){return r.Ranges.isUserId(e)||0===e}function c(e){return r.Ranges.isContactId(e)}function d(e){return r.Ranges.isChatOrChannelPeer(e)}function u(e){return r.Ranges.isGroupId(e)}function l(e){return r.Ranges.isAnonymousCallPeerId(e)}function f(e){return!!e.photo50}function m(e){return c(e)?r.Ranges.convertPeerIdToContactId(e):d(e)?r.Ranges.convertChatPeerIdToChatId(e):u(e)?-e:s(e)?e:void(0,i.exhaustivenessCheck)(e)}function h(e,t){switch(e){case"User":return o(t);case"Contact":return o(r.Ranges.convertContactIdToPeerId(t));case"Group":return o(-t);case"Chat":return o(r.Ranges.convertChatIdToChatPeerId(t));default:(0,i.exhaustivenessCheck)(e)}}function p(e,t){return e===t}function g(e){return 100===e}const v=-194070336,b="deleted",k="banned";function y(e){return e===v}function w(e){return"mrg_unit"===e.employeeMark||"normal"===e.employeeMark||"vacation"===e.employeeMark}function _(e){return"vacation"===e.employeeMark}function C(e,t="nom"){switch(e.kind){case"User":switch(t){case"nom":return e.firstName+" "+e.lastName;case"gen":return e.firstNameGen+" "+e.lastNameGen;case"acc":return e.firstNameAcc+" "+e.lastNameAcc;default:return(0,i.exhaustivenessCheck)(t)}case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,i.exhaustivenessCheck)(e)}}function E(e){switch(e.kind){case"User":return e.screenName||`id${e.id}`;case"Group":return e.screenName;default:return}}function x(e){switch(e.kind){case"User":case"Contact":return e.phone;default:return}}function I(e){switch(e.kind){case"User":return e.sex;case"Contact":case"Group":case"Chat":return"unknown";default:return(0,i.exhaustivenessCheck)(e)}}function M(e,t="nom"){switch(e.kind){case"User":const n=e.lastName.charAt(0)+(e.lastName.length>1?".":"");switch(t){case"nom":return e.firstName+" "+n;case"gen":return e.firstNameGen+" "+n;case"acc":return e.firstNameAcc+" "+n;default:return(0,i.exhaustivenessCheck)(t)}case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,i.exhaustivenessCheck)(e)}}function N(e,t="nom"){switch(e.kind){case"User":switch(t){case"nom":return e.firstName;case"gen":return e.firstNameGen;case"acc":return e.firstNameAcc;default:return(0,i.exhaustivenessCheck)(t)}case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,i.exhaustivenessCheck)(e)}}function S(e){var t,n;return"Contact"!==e.kind&&null!=(n=null!=(t=e.photo200)?t:e.photo100)?n:e.photo50}function A(e){let t="";switch(e.kind){case"User":t=[e.firstName,e.lastName].filter(Boolean).map(i.getFirstLetter).join("");break;case"Group":t=(0,i.getFirstLetter)(e.name);break;case"Chat":t=(0,i.getFirstLetter)(e.title);break;case"Contact":t=(0,i.getInitials)(e.name);break;default:(0,i.exhaustivenessCheck)(e)}return t}function R(e){return s(e)?"User":d(e)?"Chat":u(e)?"Group":c(e)?"Contact":void(0,i.exhaustivenessCheck)(e)}function T(e,t){"title"in t?e.title=t.title:(e.photo50=t.photo50,e.photo100=t.photo100,e.photo200=t.photo200)}function P(e){delete e.photo50,delete e.photo100,delete e.photo200,delete e.hasDefaultPhoto,e.canCall=!1}function j(e,t,n){"Contact"!==e.kind&&(e.mutualFriends={hint:t,count:n})}function D(e,t){e.userId=t}function L(e,t){switch(t){case"add":{if(!e.canChangeFriendship)break;const t={unfamiliar:"outgoingRequest",outgoingRequest:"outgoingRequest",incomingRequest:"friends",friends:"friends"};e.friendship=t[e.friendship];break}case"delete":{const t={unfamiliar:"unfamiliar",outgoingRequest:"unfamiliar",incomingRequest:"incomingRequest",friends:"incomingRequest"};e.friendship=t[e.friendship];break}default:(0,i.exhaustivenessCheck)(t)}}function O(e,t){switch(t){case"join":{const t={notMember:e.isClosed?"outgoingRequest":"member",member:"member",unsure:"member",declined:"member",outgoingRequest:"outgoingRequest",incomingRequest:"member"}[e.membership];e.membership!==t&&"member"===t&&e.memberCount++,e.membership=t;break}case"leave":{const t={notMember:"notMember",member:"notMember",unsure:"notMember",declined:"notMember",outgoingRequest:"notMember",incomingRequest:"declined"}[e.membership];e.membership!==t&&e.memberCount--,e.membership=t;break}default:(0,i.exhaustivenessCheck)(t)}}function U(e,t){e.isBlacklistedByMe=t}function q(e,t){const n=e.get(t);if(n)return n;if(i.isDev)throw new Error(`Пир ${t} не найден в кэше! Обрати внимание на то, как загружаются недостающие данные в сторе.`);return e.get(o())}},86144:(e,t,n)=>{"use strict";n.d(t,{DONUT_DURATION:()=>c,changeCommentsOrder:()=>y,deleteComment:()=>k,findCommentByCmid:()=>v,isDonut:()=>h,isDonutPlaceholder:()=>m,isEmpty:()=>f,link:()=>p,merge:()=>l,newPending:()=>w,replaceComment:()=>b,resolveCmid:()=>s,toRawText:()=>d,toWallAttach:()=>u});var r=n(434788),i=n(89131),o=n(504698),a=n(96190);function s(e){return Number.isNaN(e)&&(e=0),!e||e<0?0:e}const c=[-1,1,2,3,4,5,6,7];function d(e){return o.toRawText(e.chunks)}function u(e){return{id:e.cmid,kind:"Wall",date:e.sentAt,authorId:a.resolveId(e.channelId),ownerId:a.resolveId(e.channelId),attaches:e.attaches,chunks:e.chunks,isAds:!1,isDeleted:!1,isVisibleFor:"all"}}function l(e,t){return void 0!==t&&"Normal"===e.kind&&(e.comments=(0,r._)({},e.comments,{history:t.comments.history,oneLevelCount:t.comments.oneLevelCount,order:t.comments.order})),e}function f(e){var t,n;return!(0!==e.chunks.length||Object.keys(e.attaches).find((e=>"unknown"!==e))||"Normal"===e.kind&&(null==(n=e.donut)||null==(t=n.placeholder)?void 0:t.text))}function m(e){var t;return Boolean(null==(t=e.donut)?void 0:t.placeholder)}function h(e){var t;return Boolean(null==(t=e.donut)?void 0:t.isDonut)}function p(e,t=!1){return t?`/?p=channel&channelId=${e.channelId}&postId=${e.cmid}`:`/channels/${e.channelId}?cmid=${e.cmid}`}function g(e,t){const n=e.comments.history.map(((t,n)=>({kind:"Post",comment:t,source:e,onLevelindex:n})));for(;0!==n.length;){const e=n.shift();if(e){if(!t(e))return;n.push(...e.comment.replies.history.map(((t,n)=>({kind:"Comment",comment:t,source:e.comment,onLevelindex:n}))))}}}function v(e,t){let n;return g(e,(e=>e.comment.cmid!==t||(n=e.comment,!1))),n}function b(e,t){g(e,(e=>e.comment.cmid!==t.cmid||("Post"===e.kind&&(e.source.comments.history[e.onLevelindex]=t),"Comment"===e.kind&&(e.source.replies.history[e.onLevelindex]=t),!1)))}function k(e,t){g(e,(e=>e.comment.cmid!==t||("Post"===e.kind&&(e.source.comments.history.splice(e.onLevelindex,1),e.source.comments.count-=1,e.source.comments.oneLevelCount-=1),"Comment"===e.kind&&(e.source.replies.history.splice(e.onLevelindex,1),e.source.replies.count-=1),!1)))}function y(e,t){e.comments.history=[],e.comments.order=t,e.comments.nextFrom=void 0,e.comments.prevFrom=void 0}function w(e,t){const n=function(e){if(e>=0){if(i.isDev)throw new Error("Рандом айди поста должен быть меньше 0!");return 0}return e%Math.pow(2,31)}(-e.sentAt);return(0,r._)({},e,{kind:"Pending",randomId:n,chunks:o.fromClientText(t),hasFailed:!1})}},504698:(e,t,n)=>{"use strict";n.d(t,{MASS_MENTIONS:()=>d,dontUse__enableNewParser__hack:()=>u,fromClientText:()=>f,fromServerText:()=>l,toPlainText:()=>g,toRawText:()=>v});var r=n(96190),i=n(997864),o=n(474582),a=n(659397),s=n(89131);let c=!1;const d=[{variant:"all",mentions:["all","everyone","все"]},{variant:"online",mentions:["online","here","тут","здесь"]}];function u(){c=!0}function l(e,t=c){return t?(0,o.from_server_text)(e).reduce(((e,t)=>p(e,h(t))),[]):m(b.ServerChunks,e)}function f(e,t=c){return t?(0,o.from_client_text)((0,a.decodeHTMLEntities)(e,{})).reduce(((e,t)=>p(e,h(t))),[]):m(b.ClientChunks,(0,a.decodeHTMLEntities)(e,{}))}function m(e,t){if(0===t.length)return[];try{return e.tryParse(t).reduce(p,[])}catch(e){return console.error(e),[]}}function h(e){switch(e.kind){case"LineBreak":case"Text":case"Emoji":return e;case"Code":return{kind:"Text",text:e.text};case"PossibleMention":return{kind:"ScreenNameMention",screenName:e.screen_name,displayName:e.screen_name===e.display_name.slice(1)?void 0:e.display_name};case"AllMention":case"OnlineMention":return{kind:"MassMention",displayName:e.text};case"UserMention":return{kind:"Mention",type:"id",peerId:r.resolveId(e.user_peer_id),displayName:e.display_name};case"GroupMention":return{kind:"Mention",type:"club",peerId:r.resolveId(e.group_peer_id),displayName:e.display_name};case"Url":return{kind:"Url",href:e.url,caption:e.caption,text:e.text};case"Hashtag":return e.screen_name?{kind:"HashtagMention",tag:e.tag,screenName:e.screen_name}:{kind:"Hashtag",tag:e.tag};default:return(0,s.exhaustivenessCheck)(e)}}function p(e,t){if("Text"===t.kind){var n;const r=e[e.length-1];"Text"===(null==(n=r)?void 0:n.kind)?r.text+=t.text:e.push({kind:"Text",text:t.text})}else e.push(t);return e}function g(e,t){return e.reduce(((e,n)=>{switch(n.kind){case"Text":case"Emoji":return e+n.text;case"Mention":case"MassMention":return e+n.displayName;case"ScreenNameMention":return e+(n.displayName||`@${n.screenName}`);case"Email":return e+n.email;case"Url":return e+n.caption;case"Hashtag":return e+n.tag;case"HashtagMention":return e+n.tag+`@${n.screenName}`;case"LineBreak":return e+(t.multiline?"\n":" ");default:return(0,s.exhaustivenessCheck)(n)}}),"")}function v(e){return e.reduce(((e,t)=>{switch(t.kind){case"Text":case"Emoji":case"Url":return e+t.text;case"Mention":{const n=r.toRealId(t.peerId);return e+`[${t.type}${n}|${t.displayName}]`}case"MassMention":return e+t.displayName;case"ScreenNameMention":return e+(t.displayName?`@${t.screenName} (${t.displayName})`:`@${t.screenName}`);case"Email":return e+t.email;case"Hashtag":return e+t.tag;case"HashtagMention":return e+t.tag+`@${t.screenName}`;case"LineBreak":return e+"\n";default:return(0,s.exhaustivenessCheck)(t)}}),"")}const b=i.createLanguage({ClientChunks:e=>i.alt(e.LineBreak,e.Email,e.Url,e.HashtagMention,e.Hashtag,e.MassMention,e.Mention,e.ScreenNameMention,e.Text).many(),ServerChunks:e=>i.alt(e.LineBreak,e.Email,e.Url,e.HashtagMention,e.Hashtag,e.MassMention,e.Mention,e.Text).many(),LineBreak:()=>i.regexp(/\n|<br ?\/?>/).map((()=>({kind:"LineBreak"}))),ScreenName:()=>i.seqObj(["prefix",i.oneOf("@*")],["handle",i.alt(i.digit,i.letter,i.string("_")).atLeast(2).map((e=>e.join("")))]),MassMention:()=>i.regexp(/(?!,|;|:|\.|\s|\n|"|\(|\)|\[|\]|!|\?)([*@](all|everyone|все|online|here|здесь|тут))(?=$|,|;|:|<br ?\/?>|\.(?![a-z0-9_-])|\s|\n|"|\(|\)|\[|\]|!|\?)/i,1).map((e=>({kind:"MassMention",displayName:e}))),Mention:()=>i.seqObj(i.string("["),["type",i.alt(i.string("id"),i.string("club"))],["peerId",i.digit.atLeast(1).map((e=>+e.join("")))],["displayName",i.regexp(/\|(.+?)]/,1)]).map((e=>{let t;return t="club"===e.type?r.resolveId(-e.peerId):0===e.peerId?r.resolveId():r.resolveId(e.peerId),{kind:"Mention",type:e.type,peerId:t,displayName:e.displayName}})),ScreenNameMention:e=>i.seqObj(["screenName",e.ScreenName],["displayName",i.alt(i.seq(i.whitespace,i.regexp(/\((.+?)\)/,1)).map((([,e])=>e)),i.succeed(void 0))]).map((e=>({kind:"ScreenNameMention",screenName:e.screenName.handle,displayName:e.displayName}))),Url:()=>{const e=i.seqObj(i.string("["),["protocol",i.regexp(new RegExp(y,"i"))],["fullDomain",i.regexp(new RegExp("vk\\.com|vk\\.ru|vk\\.me|web\\.vk\\.me","i"))],i.regexp(new RegExp("(?!/away\\.php)","i")),["query",i.regexp(new RegExp(I))],["displayName",i.regexp(/\|(.+?)]/,1)]).map((e=>{const{protocol:t,fullDomain:n,query:r,displayName:i}=e;return{kind:"Url",caption:i,href:`${t||"https://"}${n}${r}`,text:`[${t}${n}${r}|${i}]`}})),t=i.seq(i.regexp(new RegExp(y,"i")),i.regexp(new RegExp(w)),i.regexp(new RegExp(_)),i.regexp(new RegExp(C)),i.regexp(new RegExp(I))).map((e=>{const[t,n,r,i,o]=e,a=`${t||"https://"}${n}${r}${i}${o}`,c=e.join("");return r.length<=N&&M.has(r.toLowerCase())?{kind:"Url",caption:(0,s.safeDecodeURI)(c),href:a,text:c}:{kind:"Text",text:c}}));return i.alt(e,t)},Hashtag:()=>i.regexp(new RegExp(`#${T}{0,100}${R}${T}{0,100}`,"u")).map((e=>({kind:"Hashtag",tag:e}))),HashtagMention:e=>i.seqObj(["tag",i.regexp(new RegExp(`#${T}{0,100}${R}${T}{0,100}`))],["screenName",e.ScreenName]).map((e=>({kind:"HashtagMention",tag:e.tag,screenName:e.screenName.handle}))),Email:()=>i.regexp(new RegExp("([a-zA-Zа-яА-Я\\-_\\.0-9\\+]+@("+w+_+"))","i")).map((e=>({kind:"Email",email:e}))),Text:()=>i.any.map((e=>({kind:"Text",text:e})))}),k="\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј%",y="(https?:\\/\\/)?",w="((?:["+k+"\\—\\-\\_]+\\.){1,5})",_="([A-Za-zа-яА-Я\\-\\d]{2,22})",C="(?:\\:(\\d{2,5}))?",E="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",x="\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$~=;:'*"+E+"　-〿＀-￯",I="(([\\/?#])(?:\\&amp;|\\&|\\&#\\d{2,6};|,[_%]|!|,*"+("(?:["+x+"]|[.](?!\\s|$|[^."+x+"]))")+"+|"+("(?:\\(|\\[)["+k+"\\d&#%;,]+(?:\\)|\\])")+"){0,200})?",M=new Set([..."aaa,aarp,abarth,abb,abbott,abbvie,abc,able,abogado,abudhabi,ac,academy,accenture,accountant,accountants,aco,active,actor,ad,adac,ads,adult,ae,aeg,aero,aetna,af,afamilycompany,afl,africa,ag,agakhan,agency,ai,aig,aigo,airbus,airforce,airtel,akdn,al,alfaromeo,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,am,americanexpress,americanfamily,amex,amfam,amica,amsterdam,an,analytics,android,anquan,anz,ao,aol,apartments,app,apple,aq,aquarelle,ar,aramco,archi,army,arpa,art,arte,as,asda,asia,associates,at,athleta,attorney,au,auction,audi,audible,audio,auspost,author,auto,autos,avianca,aw,aws,ax,axa,az,azure,ba,baby,baidu,banamex,bananarepublic,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bb,bbc,bbt,bbva,bcg,bcn,bd,be,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,bl,black,blackfriday,blanco,blockbuster,blog,bloomberg,blue,bm,bms,bmw,bn,bnl,bnpparibas,bo,boats,boehringer,bofa,bom,bond,boo,book,booking,boots,bosch,bostik,boston,bot,boutique,box,bq,br,bradesco,bridgestone,broadway,broker,brother,brussels,bs,bt,budapest,bugatti,build,builders,business,buy,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,call,calvinklein,cam,camera,camp,cancerresearch,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,cartier,casa,case,caseih,cash,casino,cat,catering,catholic,cba,cbn,cbre,cbs,cc,cd,ceb,center,ceo,cern,cf,cfa,cfd,cg,ch,chanel,channel,chase,chat,cheap,chintai,chloe,christmas,chrome,chrysler,church,ci,cipriani,circle,cisco,citadel,citi,citic,city,cityeats,ck,cl,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,cm,cn,co,coach,codes,coffee,college,cologne,com,comcast,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cookingchannel,cool,coop,corsica,country,coupon,coupons,courses,cr,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,csc,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,de,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dj,dk,dm,dnp,do,docs,doctor,dodge,dog,doha,domains,dot,download,drive,dtv,dubai,duck,dunlop,duns,dupont,durban,dvag,dvr,dz,earth,eat,ec,eco,edeka,edu,education,ee,eg,eh,email,emerck,energy,engineer,engineering,enterprises,epost,epson,equipment,er,ericsson,erni,es,esq,estate,esurance,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fi,fiat,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,fj,fk,flickr,flights,flir,florist,flowers,fly,fm,fo,foo,food,foodnetwork,football,ford,forex,forsale,forum,foundation,fox,fr,free,fresenius,frl,frogans,frontdoor,frontier,ftr,fujitsu,fujixerox,fun,fund,furniture,futbol,fyi,ga,gal,gallery,gallo,gallup,game,games,gap,garden,gb,gbiz,gd,gdn,ge,gea,gent,genting,george,gf,gg,ggee,gh,gi,gift,gifts,gives,giving,gl,glade,glass,gle,global,globo,gm,gmail,gmbh,gmo,gmx,gn,godaddy,gold,goldpoint,golf,goo,goodhands,goodyear,goog,google,gop,got,gov,gp,gq,gr,grainger,graphics,gratis,green,gripe,group,gs,gt,gu,guardian,gucci,guge,guide,guitars,guru,gw,gy,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hgtv,hiphop,hisamitsu,hitachi,hiv,hk,hkt,hm,hn,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,honeywell,horse,hospital,host,hosting,hot,hoteles,hotmail,house,how,hr,hsbc,ht,htc,hu,hughes,hyatt,hyundai,ibm,icbc,ice,icu,id,ie,ieee,ifm,ikano,il,im,imamat,imdb,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insurance,insure,int,intel,international,intuit,investments,io,ipiranga,iq,ir,irish,is,iselect,ismaili,ist,istanbul,it,itau,itv,iveco,iwc,jaguar,java,jcb,jcp,je,jeep,jetzt,jewelry,jio,jlc,jll,jm,jmp,jnj,jo,jobs,joburg,jot,joy,jp,jpmorgan,jprs,juegos,juniper,kaufen,kddi,ke,kerryhotels,kerrylogistics,kerryproperties,kfh,kg,kh,ki,kia,kim,kinder,kindle,kitchen,kiwi,km,kn,koeln,komatsu,kosher,kp,kpmg,kpn,kr,krd,kred,kuokgroup,kw,ky,kyoto,kz,la,lacaixa,ladbrokes,lamborghini,lamer,lancaster,lancia,lancome,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,li,liaison,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,linde,link,lipsy,live,living,lixil,lk,loan,loans,local,locker,locus,loft,lol,london,lotte,lotto,love,lpl,lplfinancial,lr,ls,lt,ltd,ltda,lu,lundbeck,lupin,luxe,luxury,lv,ly,ma,macys,madrid,maif,maison,makeup,man,management,mango,market,marketing,markets,marriott,marshalls,maserati,mattel,mba,mc,mcd,mcdonalds,mckinsey,md,me,med,media,meet,melbourne,meme,memorial,men,menu,meo,metlife,mf,mg,mh,miami,microsoft,mil,mini,mint,mit,mitsubishi,mk,ml,mlb,mls,mm,mma,mn,mo,mobi,mobile,mobily,moda,moe,moi,mom,monash,money,monster,montblanc,mopar,mormon,mortgage,moscow,moto,motorcycles,mov,movie,movistar,mp,mq,mr,ms,msd,mt,mtn,mtpc,mtr,mu,museum,mutual,mv,mw,mx,my,mz,na,nab,nadex,nagoya,name,nationwide,natura,navy,nba,nc,ne,nec,net,netbank,netflix,network,neustar,new,newholland,news,next,nextdirect,nexus,nf,nfl,ng,ngo,nhk,ni,nico,nike,nikon,ninja,nissan,nissay,nl,no,nokia,northwesternmutual,norton,now,nowruz,nowtv,np,nr,nra,nrw,ntt,nu,nyc,nz,obi,observer,off,office,okinawa,olayan,olayangroup,oldnavy,ollo,om,omega,one,ong,onl,online,onyourside,ooo,open,oracle,orange,org,organic,orientexpress,origins,osaka,otsuka,ott,ovh,pa,page,pamperedchef,panasonic,panerai,paris,pars,partners,parts,party,passagens,pay,pccw,pe,pet,pf,pfizer,pg,ph,pharmacy,philips,phone,photo,photography,photos,physio,piaget,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,pk,pl,place,play,playstation,plumbing,plus,pm,pn,pnc,pohl,poker,politie,porn,post,pr,pramerica,praxi,press,prime,pro,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,ps,pt,pub,pw,pwc,py,qa,qpon,quebec,quest,qvc,racing,radio,raid,re,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,rightathome,ril,rio,rip,rmit,ro,rocher,rocks,rodeo,rogers,room,rs,rsvp,ru,ruhr,run,rw,rwe,ryukyu,sa,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sapo,sarl,sas,save,saxo,sb,sbi,sbs,sc,sca,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scjohnson,scor,scot,sd,se,seat,secure,security,seek,select,sener,services,ses,seven,sew,sex,sexy,sfr,sg,sh,shangrila,sharp,shaw,shell,shia,shiksha,shoes,shop,shopping,shouji,show,showtime,shriram,si,silk,sina,singles,site,sj,sk,ski,skin,sky,skype,sl,sling,sm,smart,smile,sn,sncf,so,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,space,spiegel,spot,spreadbetting,sr,srl,srt,ss,st,stada,staples,star,starhub,statebank,statefarm,statoil,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiftcover,swiss,sx,sy,sydney,symantec,systems,sz,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tc,tci,td,tdk,team,tech,technology,tel,telecity,telefonica,temasek,tennis,teva,tf,tg,th,thd,theater,theatre,tiaa,tickets,tienda,tiffany,tips,tires,tirol,tj,tjmaxx,tjx,tk,tkmaxx,tl,tm,tmall,tn,to,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,tp,tr,trade,trading,training,travel,travelchannel,travelers,travelersinsurance,trust,trv,tt,tube,tui,tunes,tushu,tv,tvs,tw,tz,ua,ubank,ubs,uconnect,ug,uk,um,unicom,university,uno,uol,ups,us,uy,uz,va,vacations,vana,vanguard,vc,ve,vegas,ventures,verisign,vermögensberater,vermögensberatung,versicherung,vet,vg,vi,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,vista,vistaprint,viva,vivo,vlaanderen,vn,vodka,volkswagen,volvo,vote,voting,voto,voyage,vu,vuelos,wales,walmart,walter,wang,wanggou,warman,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,ws,wtc,wtf,xbox,xerox,xfinity,xihuan,xin,xperia,xxx,xyz,yachts,yahoo,yamaxun,yandex,ye,yodobashi,yoga,yokohama,you,youtube,yt,yu,yun,za,zappos,zara,zero,zip,zippo,zm,zone,zuerich,zw".split(","),..."бг,бел,дети,ею,католик,ком,мкд,мон,москва,онлайн,орг,рус,рф,сайт,срб,укр".split(","),..."qxam,90ae,90ais,d1acj3b,e1a4c,80aqecdr1a,j1aef,d1alf,l1acc,80adxhks,80asehdb,c1avg,p1acf,p1ai,80aswg,90a3ac,j1amh,80ao21a,y9a3aq,9dbq2a,mgbca7dzdo,mgba3a3ejt,mgbayh7gpa,lgbbat1ad8j,mgberp4a5d4ar,mgba7c0bbn0a,mgbc0a9azcg,mgb2ddes,mgbaam7a8h,mgba3a4f16a,mgbbh1a,mgbab2bd,ngbe9e0a,mgbbh1a71e,pgbs0dh,mgbpl2fh,ogbpf8fl,ngbc5azd,mgbtx2b,mgb9awbf,ygbi2ammx,wgbl6a,mgbi4ecexp,fhbei,wgbh1c,mgbx4cd0ab,mgbb9fbpob,4gbrim,mgbt3dhd,mgbai9azgqp6j,mgbgu82a,11b4c3d,c2br7g,h2brj9c,h2breg3eve,h2brj9c8c,i1b6b1a6a2e,54b7fta0cc,45brj9c,45br5cyl,s9brj9c,gecrj9c,3hcrj9c,xkc2dl3a5ee0h,xkc2al3hye2a,clchc0ea0b2g2a9gcd,fpcrj9c3d,2scrj9c,rvc1e0am3e,fzc2c9e2c,42c2d9a,o3cw4h,node,q9jyb4c,gckr3f0f,qcka1pmc,tckwe,cck2b3b,1ck2e1b,bck1b9a5dre4c,eckvdtc9d,rhqv96g,fiq64b,fiqs8s,fiqz9s,fiq228c5hs,vhquv,1qqw23a,vuq861b,nyqy26a,45q11c,55qx5d,55qw42g,kprw13d,kpry57d,czru2d,czrs0t,czr694b,w4rs40l,w4r85el8fhu5dnra,3ds443g,3oq18vl8pn36a,pssy2u,tiq49xqyj,fjq720a,fct429k,estv75g,xhq521b,9krt00a,30rr7y,6qq986b3xl,kput3i,kpu716f,zfr164b,mxtq1m,yfro4i67o,efvy88h,9et52u,rovu88b,nqv7f,b4w605ferd,unup4y,mix891f,mix082f,3pxu8k,pbt977c,6frz82g,nqv7fs00ema,ses554g,hxt814e,5tzm5g,io0a7i,8y0a063a,jlq61u9w7b,flw351e,g2xx48c,gk3at1e,3bst00m,fzys8d69uvgm,kcrx77d1x4a,jvr189m,imr513n,5su34j936bgsg,j6w193g,t60b56a,mk1bu44c,cg4bki,3e0b707e".split(",").map((e=>"xn--"+e))]),N=[...M].reduce(((e,t)=>Math.max(e,t.length)),0),S=`${E}a-zA-Zа-яА-ЯёіјєїґўЁІЈЄЇҐЎ’`,A="(?:&#(?:19[2-9]|(?:[2-9]|1[0-3])[0-9][0-9]);?)",R=`(?:[${S}]|${A})`,T=`(?:[${S}_\\d]|${A})`},468336:(e,t,n)=>{"use strict";n.d(t,{getFirstEmojiFromString:()=>a,getLengthWithEmoji:()=>s,hasEmoji:()=>c,toTextAndEmojiChunks:()=>o});var r=n(504698),i=n(89131);function o(e){return r.fromClientText(e).reduce(((e,t,n)=>{var i;const o=e[n-1],a="Emoji"===t.kind?{kind:"Emoji",text:t.text}:{kind:"Text",text:r.toRawText([t])};return"Text"===a.kind&&"Text"===(null==(i=o)?void 0:i.kind)?o.text+=a.text:e.push(a),e}),[])}function a(e){const t=r.fromClientText(e).find((e=>"Emoji"===e.kind));if(t)return t.text}function s(e){return o(e).reduce(((e,t)=>{switch(t.kind){case"Text":return e+t.text.length;case"Emoji":return e+1;default:return(0,i.exhaustivenessCheck)(t)}}),0)}function c(e){return r.fromClientText(e).some((e=>"Emoji"===e.kind))}},89131:(e,t,n)=>{"use strict";n.d(t,{RetryTimeout:()=>l,clamp:()=>j,createDeferredPromise:()=>T,debounce:()=>d,escapeRegex:()=>I,exhaustivenessCheck:()=>a,formatDuration:()=>g,formatFileSize:()=>p,getDateDayStart:()=>y,getFirstLetter:()=>R,getInitials:()=>L,getRandomFloat:()=>S,getRandomInt:()=>N,isDeepEqual:()=>E,isDev:()=>o,isNonEmptyArray:()=>m,isSameDate:()=>v,isSameMonth:()=>b,isSameYear:()=>k,isShallowEqual:()=>x,isTruthy:()=>h,isValidPhoneNumber:()=>P,noop:()=>w,parseRootMargin:()=>D,safeDecodeURI:()=>M,shuffleArray:()=>A,sleep:()=>s,throttle:()=>u,toNonEmpty:()=>f,words:()=>_});var r=n(11010),i=n(468336);const o=!1;function a(e){throw new Error("Exhaustivness failure! This should never happen.")}function s(e){return c.apply(this,arguments)}function c(){return(c=(0,r._)((function*(e){return new Promise((t=>{setTimeout(t,e)}))}))).apply(this,arguments)}function d(e,t,n){let r=null;const i=()=>{null!==r&&(window.clearTimeout(r),r=null)},o=(...o)=>{const a=n&&!r;i(),r=window.setTimeout((()=>{r=null,n||e(...o)}),t),a&&e(...o)};return o.cancel=i,o}function u(e,t,n){let r=!1,i=null;return(...o)=>{r?i=o:(r=!0,n?i=o:e(...o),setTimeout((()=>{r=!1,i&&(e(...i),i=null)}),t))}}class l{constructor(e,t){this.delay=()=>this.timeout,this.attempts=()=>this.retries,this.backoff=()=>{this.timeout=Math.min(2*this.timeout,this.maxTimeout),this.retries++},this.reset=()=>{this.timeout=this.minTimeout,this.retries=0},this.minTimeout=e,this.maxTimeout=t,this.timeout=e,this.retries=0}}function f(e){return e.length>0?e:null}function m(e){return void 0!==e[0]}function h(e){return!!e}function p(e){return e>Math.pow(1024,3)?Number((e/Math.pow(1024,3)).toFixed(2))+" GB":e>Math.pow(1024,2)?Number((e/Math.pow(1024,2)).toFixed(1))+" MB":Math.round(e/1024)+" KB"}function g(e,t){e||(e=0),e=Math.abs(e);const n=Math.floor(e/3600).toString(),r=(Math.floor(e/60)%60).toString(),i=(e%60).toString().padStart(2,"0");return e>=3600||t?[n,r.padStart(2,"0"),i].join(":"):[r.padStart(1,"0"),i].join(":")}function v(e,t){return e=new Date(e),t=new Date(t),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function b(e,t){return e=new Date(e),t=new Date(t),e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function k(e,t){return e=new Date(e),t=new Date(t),e.getFullYear()===t.getFullYear()}function y(e){const t=new Date(e);return t.setHours(0,0,0,0),t.getTime()}function w(){}function _(e){return e.split(/\s/)}function C(e,t,n){if(e===t)return!0;if(e!=e&&t!=t)return!0;const r=e=>"object"!=typeof e||null===e,i=(e,t)=>"deep"===n?C(e,t,"deep"):Object.is(e,t);if(r(e)||r(t))return e===t;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const n of e.entries()){const e=n[0];if(!r(e))throw new Error("isDeepEqual can't compare Maps with non primitive keys");if(!t.has(e))return!1}for(const n of e.entries())if(!i(n[1],t.get(n[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e.entries()){const e=n[0];if(!r(e))throw new Error("isDeepEqual can't compare Sets with non primitive values");if(!t.has(e))return!1}return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const e of n)if(!Object.prototype.hasOwnProperty.call(t,e))return!1;for(const r of n)if(!i(e[r],t[r]))return!1;return!0}throw new Error(`isEqual don't know how to compare: ${e} and ${t}`)}function E(e,t){return C(e,t,"deep")}function x(e,t){return C(e,t,"shallow")}const I=e=>e?e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1"):"";function M(e){try{return decodeURIComponent(e)}catch(t){return e}}function N(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function S(e,t){return Math.random()*(t-e)+e}function A(e){const t=[...e];for(let e=t.length-1;e>0;e--){const n=N(0,e),r=t[e];t[e]=t[n],t[n]=r}return t}function R(e){const[t]=(0,i.toTextAndEmojiChunks)(e);if(!t)return"";switch(t.kind){case"Text":return(t.text[0]||"").toUpperCase();case"Emoji":return t.text;default:return a()}}function T(){let e=Promise.resolve,t=Promise.reject;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}function P(e){const t=e.trim();return/^\+?(\d{10,18}|\d{1,5}([\s-]?(\(\d{1,3}\)|\d{1,4})){1,4})$/.test(t)}function j(e,t,n){return Math.min(n,Math.max(t,e))}const D=e=>e?e.toString().split(" ").map((e=>`${parseInt(e)}px`)).join(" "):void 0;function L(e){return e.split(/\s/).slice(0,2).map(R).join("")}},732052:(e,t,n)=>{"use strict";e.exports=n.p+"2a33e216c7e81e18e399.wasm"}}]);try{stManager.done("dist/b4d66d49b00c43d66ed03ee22a19a910.737857a62a9c7d31b09c.js")}catch(e){}