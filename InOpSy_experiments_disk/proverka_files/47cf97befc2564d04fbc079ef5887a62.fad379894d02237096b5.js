"use strict";(self.webpackChunkvk=self.webpackChunkvk||[]).push([[98725],{132933:(e,t,o)=>{o.d(t,{Icon28CheckCircleOutline:()=>i});var i=(0,o(28178).makeIcon)("Icon28CheckCircleOutline","check_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="check_circle_outline_28"><g fill="none" fill-rule="nonzero"><path d="M0 0h28v28H0z" /><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2Zm0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4Zm4.29 6.29c.39-.39 1.03-.39 1.42 0 .39.39.39 1.03 0 1.42l-7.003 6.997a1 1 0 0 1-1.414 0l-3.5-3.5a1 1 0 0 1 1.414-1.414L12 16.586Z" /></g></symbol>',28,28,!1,void 0)},19153:(e,t,o)=>{o.d(t,{statlogStartTiming:()=>a});var i=o(839470),n=o(385376),s=o(404145);const r="video_showcase_web",a=()=>{let e=window.cur.section_id;if(!window.__debugMode&&(0,i.partConfigEnabled)("measure_module_navigation_stats")){var t;const o=(null==(t=(performance.getEntriesByName("__navmark")||[])[0])?void 0:t.startTime)||0;let i=o?"nav":"origin";(0,n.saveStatlogEvents)({name:r,value:Math.round(performance.now()-o),keys:[e,"js_init",i]});const a=window.vkLastNav;if(a&&(0,n.saveStatlogEvents)({name:r,value:Math.round(Date.now()-a),keys:[e,"js_eval",i]}),!o){const t=performance.getEntriesByType("navigation").find((e=>e.name.includes(`${(0,s.getHostName)()}/video`)));t&&(0,n.saveStatlogEvents)({name:r,value:Math.round(t.responseEnd-t.requestStart),keys:[e,"request_roundtrip",i]})}}}},860249:(e,t,o)=>{o.d(t,{initSectionPlaylistSeenLogger:()=>d,initSectionVideoSeenLogger:()=>a,logCardsAction:()=>n});var i=o(613916);const n=(e,t,o,i)=>{window.vk.id&&window.ajax.post("al_video.php?act=log_seen",{ids:Array.from(e).join(","),place:"CATALOG",action:t,hash:window.cur.videoLogSeenHash,type:o,thumbnails:Array.from(i).join(",")})},s=(e,t,o,s,r)=>{var a,d;if(!window.cur.logSeen||window.cur.section_id!==e)return!1;if(!(0,i.isIntersectionObserverSupported)())return!1;const l=document.getElementById(`video_type_${e}_list`);if(!l)return;const c=new Map;let u=0;const w=e=>{if(!e)return;const o=[],i=[];for(let t of e.values())t.isSent||(o.push(t.id),r&&i.push(t.mlThumbnail),t.isSent=!0);n(o,"SHOW",t,i)},v=new IntersectionObserver((e=>{let t=!1;e.forEach((e=>{if(e.isIntersecting){const o=s(e.target),i=r?r(e.target):-1;o&&(t=!0,c.has(o)||c.set(o,{id:o,mlThumbnail:i,isSent:!1}))}})),t&&(window.clearTimeout(u),u=window.setTimeout((()=>w(c)),5e3))}),{rootMargin:"0px",threshold:1});document.querySelectorAll(o).forEach((e=>{v.observe(e)}));const _=new MutationObserver((e=>{for(let t of e)t.addedNodes.forEach((e=>{v.observe(e)}))}));_.observe(l,{childList:!0});const h=()=>{w(c)};window.addEventListener("beforeunload",h),null==(d=window.cur)||null==(a=d.destroy)||a.push((()=>{document.querySelectorAll("._video_item").forEach((e=>{v.unobserve(e)})),v.disconnect(),_.disconnect(),w(c),clearTimeout(u),window.removeEventListener("beforeunload",h)}))},r=e=>{var t;return Number.parseInt((null==(t=e.querySelector(".VideoCard__thumbLink"))?void 0:t.getAttribute("data-ml-thumb-id"))||"-1")},a=e=>{s(e,"VIDEO","._video_item",(e=>e.getAttribute("data-id")),r)},d=e=>{s(e,"PLAYLIST",".js-video_playlist_item",(e=>e.getAttribute("data-name")))}},802416:(e,t,o)=>{o.d(t,{VideoRawIdsQueue:()=>i});class i{insert(e,t){if(this.map.has(e)){const t=this.list.indexOf(e);delete this.list[t]}this.map.set(e,t),this.list.unshift(e)}append(e,t){if(this.map.has(e)){const t=this.list.indexOf(e);delete this.list[t]}this.map.set(e,t),this.list.push(e)}remove(e){if(!this.map.has(e))return!1;return!!this.map.get(e)&&(delete this.list[this.list.indexOf(e)],this.map.delete(e),!0)}clear(){this.map.clear(),this.list=new Array}dropUnnecessary(e){const t=this.list.length-e,o=new Map;return t>0&&this.list.splice(0,t).forEach((e=>{let t=this.map.get(e);t&&o.set(e,t),this.map.delete(e)})),o}constructor(){this.map=new Map,this.list=Array()}}},335262:(e,t,o)=>{o.d(t,{initVideoTrailerLazyLoader:()=>r});var i=o(802416),n=o(795558);const{ajax:s}=window,r=e=>{var t,o;const r="data-trailer-requested",a="data-trailer";let d,l,c=10;const u=Array.from(document.getElementsByClassName("video_items_list")).filter((e=>{const t=e.getAttribute("id");return!!t&&(!!["trends","sport","subscribes"].some((e=>t.includes(e)))||!["lives","my_lives","movie","tvshow","for_kids"].some((e=>t.includes(e))))}));if(!u)return;const w=new i.VideoRawIdsQueue,v=new i.VideoRawIdsQueue;let _=!0;const h=()=>{d&&clearTimeout(d)},p=new IntersectionObserver((t=>{let o=!1;t.forEach((e=>{const t=e.target.getAttribute("data-id");if(!t)return;const i=e.target;!i||i.hasAttribute(r)||i.getAttribute(a)||i.classList.contains("VideoRestriction--blur")||(e.isIntersecting?(w.append(t,e.target),v.remove(t),o=!0):(w.remove(t),w.map.has(t)?v.insert(t,e.target):v.append(t,e.target)))})),o&&(()=>{if(!w.map.size&&!v.map.size)return;const t=Date.now();null===l&&(l=t),h(),d=window.setTimeout((()=>{var t,o;_?(v.clear(),_=!1):v.dropUnnecessary(12);const i=new Map([...w.map.entries(),...v.map.entries()]);w.clear(),v.clear(),i.forEach((e=>e.setAttribute(r,"true"))),i.size&&(s.post("al_video.php?act=get_trailers_links",{video_raw_ids:Array.from(i.keys()),section:null==(o=window)||null==(t=o.cur)?void 0:t.section_id},{onDone:t=>{const o=new Map(Object.entries(t));i.forEach(((t,i)=>{const s=o.get(i);s&&(t.setAttribute(a,s),t.removeAttribute(r),(0,n.hide)(t.querySelector(".video_thumb_play")),t.matches(":hover")&&e.playTrailer(t,s))}))},onFail:()=>(i.forEach((e=>{e.removeAttribute(r)})),!0),timeout:1e4}),c<200&&(c=200))}),c)})()}),{threshold:0}),m=new MutationObserver((e=>{for(let t of e)t.addedNodes.forEach((e=>{p.observe(e)}))}));u.forEach((e=>{e.querySelectorAll("._video_item").forEach((e=>{p.observe(e)})),m.observe(e,{childList:!0})})),null==(o=window.cur)||null==(t=o.destroy)||t.push((()=>{m.disconnect(),p.disconnect(),h()}))}},604363:(e,t,o)=>{o.d(t,{VIDEO_SHOWCASE_SCROLL_TO_TOP_BUTTON_CHANGE_ACTIVITY_EVENT:()=>i});const i="video showcase scroll to top button change activity"},899181:(e,t,o)=>{o.d(t,{FeedbackActionType:()=>M,VideoShowcase:()=>j});var i=o(11010),n=o(785893),s=o(562112),r=o(301230),a=o(241857),d=o(29271),l=o(514986),c=o(584356),u=o(390433),w=o(320422),v=o(438221),_=o(936134),h=o(795558),p=o(82161),m=o(892726),y=o(725296),g=o(953908),f=o(385376),S=o(20815),b=o(335262),L=o(397501),E=o(128767),V=o(839470),C=o(362246),T=o(538310),P=o(19153),I=o(860249),k=o(604363),A=o(132933),N=o(321850),x=o(504867);var M;function q(){return Promise.resolve().then(o.bind(o,490093))}function O(){return Promise.resolve().then(o.bind(o,459474))}function D(){return Promise.all([o.e(98066),o.e(72149),o.e(54650)]).then(o.bind(o,859346))}!function(e){e.UNSET_NOT_INTERESTING="UNSET_NOT_INTERESTING"}(M||(M={}));const j={playlistSliders:[],navigationInited:!1,successfullOnboarding:!1,needResetToDefaultFavicon:!1,savePlaylistViewPreferencesTimeout:void 0,playlistListViewPreferences:!1,isVideoAddToPlaylistActionSheetInited:!1,menuScroll:void 0,refreshSliders(){},resizeSearchInput(){},init:()=>{var e;(0,P.statlogStartTiming)(),j.initSideMenu(),(null==(e=window.cur)?void 0:e.asyncLoad)&&j.loadSection(),j.initNavigation(),j.initPlaylistSlider(),j.initSearch(),j.initSidebarTooltips(),j.initScrollTop(),j.initPlaylistsActionsDropdowns(),j.initSeenLogger(),j.initMenuClickLogger(),j.initFavicon(),j.initVideoTrailerLoader(),j.initHorizontalVideoCard(),r.browser.safari&&j.initVideoWillChangeEvents(),(0,L.lazyLoadPlayer)()},initSideMenu:(0,i._)((function*(){return o.e(60593).then(o.bind(o,258810)).then((e=>e.default)).then((e=>{const t=document.querySelector(".VideoLayout__asideContentScroll");t&&(j.menuScroll=new e(t,{hidden:!0})),j.initSideMenuEvents();const o=(0,T.subscribeNavLocationChange)((()=>{var e;null==(e=j.menuScroll)||e.destroy(),j.menuScroll=void 0,window.setTimeout((()=>{j.menuScroll||j.initSideMenu()})),o()}))}))})),initSideMenuEvents:()=>{var e,t;const o=(e,t=!0)=>{t?j.menuScroll.scrollIntoView(e):window.setTimeout((()=>{j.menuScroll.scrollIntoView(e,100)}),100)},i=e=>{const t=e.target.closest(".MenuList__item");if(t.classList.contains("MenuList__item--expandable")){const i=t.classList.contains("MenuList__item--expanded");t.classList.toggle("MenuList__item--expanded",!i),!i&&t.nextSibling&&o(t.nextSibling,!1),(0,g.cancelEvent)(e)}};let n=[...document.querySelectorAll(".MenuList__itemToggle")];n.forEach((e=>{e.addEventListener("click",i)}));let s=document.querySelector(".MenuList__item--active");s&&(s.classList.contains("MenuList__item--expanded")?s=s.nextSibling:s.classList.contains("MenuList__item--subsection")&&(s=s.closest(".MenuList--subList")),s&&o(s)),null==(t=window.cur)||null==(e=t.destroy)||e.push((()=>{n.forEach((e=>{e.removeEventListener("click",i)}))}))},initSidebarTooltips:()=>{const e=[...document.querySelectorAll(".MenuList__item")],t=[...document.querySelectorAll(".PlaylistPanel__item")],o=document.querySelector(".VideoQuickLogin__loginButton");let i=[...e,...t];o&&i.push(o),i.forEach((e=>{e.addEventListener("mouseover",j.showTooltip(e))}))},initNavigation:()=>{j.navigationInited||(0,E.initPortalNavigation)({onInitStateChange:e=>{j.navigationInited=e}})},initPlaylistsActionsDropdowns:()=>{Promise.resolve().then(o.bind(o,84543)).then((e=>e.default)).then((e=>{var t,o;const i=[],n=[...document.querySelectorAll(".js-dropdown-toggle:not(.js-dropdown-toggle-inited)")];n.forEach((t=>{var o;t.classList.add("js-dropdown-toggle-inited");const n=t.parentNode,s=null==(o=n)?void 0:o.querySelector(".VideoDropdown__container");if(s){const o=new e(t,{forceSide:"bottom",cls:"VideoDropdown",noOverflow:!1,noBorder:!0,autoShow:!1,appendTo:n,content:s,align:e.ALIGN_RIGHT,onShow:()=>{window.cur.currentDropdown=o}});i.push(o)}})),null==(o=window.cur)||null==(t=o.destroy)||t.push((()=>{n.length&&i.forEach((e=>{e.destroy()}))}))}))},initPlaylistSlider:()=>{const e=document.querySelectorAll(".js-video-slider:not(.js-video-slider-inited)");e.length&&O().then((({UIGallery:t})=>{var o,i;e.forEach((e=>{j.playlistSliders.push(new t(e,{scrollY:!1})),e.classList.add("js-video-slider-inited")})),j.refreshSliders=(0,_.debounce)((()=>{j.playlistSliders.forEach((e=>{e.refresh()}))}),200),window.addEventListener("resize",j.refreshSliders),null==(i=window.cur)||null==(o=i.destroy)||o.push((()=>{j.playlistSliders=j.playlistSliders.filter((e=>e.getItems().length>0||(e.destroy(),!1))),window.removeEventListener("resize",j.refreshSliders)}))}))},updatePlaylistSlider:()=>{const e=document.querySelectorAll(".js-video-slider:not(.js-video-slider-inited)");e.length&&O().then((({UIGallery:t})=>{e.forEach((e=>{j.playlistSliders.push(new t(e,{scrollY:!1})),e.classList.add("js-video-slider-inited")}))}))},updateLayout:()=>{var e;null==(e=j.menuScroll)||e.update(),j.resizeSearchInput()},initScrollTop:()=>{const e=document.querySelector(".VideoLayout__scrollTop");if(e){var t,o;const i=(0,_.debounce)((()=>{const e=document.querySelector(".VideoLayout__scrollTop");if(!e)return;const t=(0,v.scrollGetY)()>700;e.classList.toggle("VideoLayout__scrollTop--active",t);const o={isActive:t};document.dispatchEvent(new CustomEvent(k.VIDEO_SHOWCASE_SCROLL_TO_TOP_BUTTON_CHANGE_ACTIVITY_EVENT,{detail:o}))}),100);window.addEventListener("scroll",i),i();const n=()=>{(0,v.scrollToTop)(),e.classList.remove("VideoLayout__scrollTop--active");document.dispatchEvent(new CustomEvent(k.VIDEO_SHOWCASE_SCROLL_TO_TOP_BUTTON_CHANGE_ACTIVITY_EVENT,{detail:{isActive:!1}}))};e.addEventListener("click",n),null==(o=window.cur)||null==(t=o.destroy)||t.push((()=>{window.removeEventListener("scroll",i),e.removeEventListener("click",n)}))}},initSearch:()=>{var e,t;const o=document.getElementById("video_search_input_wrapper");if(!o)return;const i=o.querySelector(".video_search_input");if(!i)return;window.uiSearch&&(window.uiSearch.init(i),window.uiSearch.focus(i));const n=()=>{var e;null==(e=window.uiSearch)||e.hideParameters("VideoSearchInput")};window.addEventListener("popstate",n);const s=(0,h.getXY)(o)[1]+50;j.resizeSearchInput=()=>{i.style.width=o.clientWidth+"px",n()};const r=document.querySelector(".video_showcase");if(r){const e=getComputedStyle(r),t=parseInt(e.getPropertyValue("--layout-transition-duration"),10);setTimeout(j.resizeSearchInput,t||300)}const a=()=>{const e=(0,v.scrollGetY)()>s;i.classList.toggle("VideoSearchInput--sticky",e)};a(),window.addEventListener("scroll",a),window.addEventListener("resize",j.resizeSearchInput),null==(t=window.cur)||null==(e=t.destroy)||e.push((()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",j.resizeSearchInput),window.removeEventListener("popstate",n)}))},initSeenLogger:()=>{const e=window.cur.section_id;["trends","sport"].includes(e)&&(0,I.initSectionVideoSeenLogger)(e),["movies","tvshow","for_kids"].includes(e)&&(0,I.initSectionPlaylistSeenLogger)(e)},initMenuClickLogger:()=>{const e=e=>{const t=e.target,o=t.href;if(!o)return;const i=o.split("/");t.classList.contains("MenuList__item--expandable")?(0,x.statlogsValueEvent)("video_left_menu","","my_videos"):"video"===i.at(-1)?(0,x.statlogsValueEvent)("video_left_menu","","for_you"):(0,x.statlogsValueEvent)("video_left_menu","",i.pop())},t=[...document.querySelectorAll(".MenuList__item")];t.forEach((t=>{t.addEventListener("click",e)})),(0,N.pushNavDestroy)((()=>{t.forEach((t=>{t.removeEventListener("click",e)}))}))},initFavicon:()=>{var e,t;let o=window.devicePixelRatio>=2?"_2x":"";(0,a.setFavIcon)("/images/icons/favicons/fav_vk_video"+o+".ico"),null==(t=window.cur)||null==(e=t.destroy)||e.push((()=>{j.needResetToDefaultFavicon&&(0,a.setFavIcon)("/images/icons/favicons/fav_logo"+o+".ico")})),window.cur.nav.push((function(e){if(e&&!e[0])return void(j.needResetToDefaultFavicon=!1);const t=e&&e[0]&&-1!==e[0].indexOf("video");j.needResetToDefaultFavicon=!t}))},initVideoTrailerLoader:()=>{(0,b.initVideoTrailerLazyLoader)(j)},initVideoWillChangeEvents:()=>{var e,t;const o=e=>{const t=e.target;(e=>{"0"===window.getComputedStyle(e).opacity&&(e.style.willChange="auto")})(t),t.removeEventListener("transitionend",o)},i=e=>{const t=e.target.closest(".VideoCard");if(t){t.querySelectorAll(".VideoCard__actions, .VideoCard__menuToggle").forEach((e=>{(e=>{e.style.willChange="opacity"})(e),e.addEventListener("transitionend",o)}))}};window.addEventListener("mouseover",i),null==(t=window.cur)||null==(e=t.destroy)||e.push((()=>{window.removeEventListener("mouseover",i)}))},initHorizontalVideoCard:()=>{const e=document.querySelector(".VideoCard--horizontal");if(!e)return;const t=e.querySelector(".page_verified ");if(!t)return;const o=t.getAttribute("onmouseover");if(!o)return;const i=o.split("}")[0]+", forceToDown: true})";t.setAttribute("onmouseover",i)},initVideoAddToPlaylistActionSheet:()=>{if(j.isVideoAddToPlaylistActionSheetInited)return;let e=document.getElementById("VideoAddToPlaylistActionSheet");e||(e=document.createElement("div"),e.id="VideoAddToPlaylistActionSheet",document.body.appendChild(e)),Promise.all([o.e(98066),o.e(76400),o.e(76429),o.e(58282),o.e(89658)]).then(o.bind(o,897103)).then((({renderVideoAddToPlaylistActionSheet:e})=>{e()}));let t=null;window.addEventListener("mouseover",(e=>{var o,i,n;let s=null;try{s=e.target}catch(e){if(e instanceof DOMException&&(18===e.code||"SecurityError"===e.name))return}const r=null==(o=s)?void 0:o.closest(".VideoCard__action--add"),a=null==(i=s)?void 0:i.closest(".VideoCard__actionSheet"),d=null==(n=s)?void 0:n.closest(".VideoCard");d&&(e=>{const t=e.querySelector(".VideoAddToPlaylistActionSheet"),o=e.querySelector(".VideoCard__action--add"),i=e.dataset.videoId,n=e.dataset.ownerId;o&&!t&&window.dispatchEvent(new CustomEvent(C.VideoAddToPlaylistActionSheetEvents.INIT,{detail:{ownerId:n,videoId:i,videoCardElement:e}}))})(d),r&&window.dispatchEvent(new CustomEvent(C.VideoAddToPlaylistActionSheetEvents.SHOW)),r||a?t&&window.clearTimeout(t):(t&&window.clearTimeout(t),t=window.setTimeout((()=>{window.dispatchEvent(new CustomEvent(C.VideoAddToPlaylistActionSheetEvents.HIDE))}),150))})),window.addEventListener(C.VideoCardAddButtonEvents.SHOW,(e=>{var t,o,i,n;const s=null==(t=e.detail.videoCardElement)?void 0:t.querySelector(".VideoCard__actions"),r=null==(o=s)?void 0:o.querySelector(".VideoCard__action--add");null==(i=s)||i.classList.add("VideoCard__actions--active"),null==(n=r)||n.classList.add("VideoCard__action--active")})),window.addEventListener(C.VideoCardAddButtonEvents.HIDE,(e=>{var t,o,i,n;const s=null==(t=e.detail.videoCardElement)?void 0:t.querySelector(".VideoCard__actions"),r=null==(o=s)?void 0:o.querySelector(".VideoCard__action--add");null==(i=s)||i.classList.remove("VideoCard__actions--active"),null==(n=r)||n.classList.remove("VideoCard__action--active")})),window.addEventListener(C.VideoCardAddButtonEvents.SET_ADDED,(e=>{var t;null==(t=e.detail.videoCardElement)||t.classList.add("VideoCard--videoAdded")})),window.addEventListener(C.VideoCardAddButtonEvents.SET_ADD,(e=>{var t;null==(t=e.detail.videoCardElement)||t.classList.remove("VideoCard--videoAdded")})),j.isVideoAddToPlaylistActionSheetInited=!0},toggleAsideMenu:()=>{var e,t;const o=document.querySelector(".VideoLayout__aside");if(!o)return;const i=document.querySelector(".VideoLayout__toggle"),n=o.querySelector(".VideoActions"),r=[...document.querySelectorAll(".MenuList")],a=[...document.querySelectorAll(".PlaylistPanel")],l=o.classList.contains("VideoLayout__aside--collapsed"),c=!l;o.classList.toggle("VideoLayout__aside--collapsed",c),null==(e=n)||e.classList.toggle("VideoActions--collapsed",c),r.forEach((e=>e.classList.toggle("MenuList--collapsed",c))),a.forEach((e=>e.classList.toggle("PlaylistPanel--collapsed",c))),null==(t=i)||t.setAttribute("data-title",l?d.getLang("video_collapse_aside"):d.getLang("video_expand_aside"));[...document.querySelectorAll(".VideoActions__item")].forEach((e=>{var t;e.tt&&(null==(t=window.tooltips)||t.destroy(e))})),j.refreshSliders(),j.resizeSearchInput(),(0,s.setCookie)("remixvideo_menu_collapsed",Number(c),365)},showTooltip:e=>{let t=[-68,-72,0];return e.classList.contains("VideoQuickLogin__loginButton")&&(t=[-68,-67,0]),()=>{const o=document.querySelector(".VideoLayout__aside");if(o&&o.classList.contains("VideoLayout__aside--collapsed"))return(0,w.showTitle)(e,"","",{className:"tt_black tt_left MenuList__itemTooltip",shift:t,slideX:5,dir:"left",appendEl:document.querySelector(".VideoLayout")})}},showMainActionTooltip:(e,t)=>{var o;let i;i=(null==(o=e.closest(".VideoActions"))?void 0:o.classList.contains("VideoActions--collapsed"))?{text:t,dir:"left",slideX:5,shift:[-68,-66,0],typeClass:"tt_black",className:"tt_default tt_left MenuList__itemTooltip",appendEl:document.querySelector(".VideoLayout")||void 0}:{text:t,dir:"top",forcetodown:!0,center:!0,typeClass:"tt_black"},(0,w.showTooltip)(e,i)},login:()=>{q().then((({showQuickLoginBox:e})=>{e()}))},subscribePlaylist:(e,t)=>{if(!window.vk.id)return q().then((({showQuickLoginBox:e})=>{e()})),!1;const o="VideoInfoPanel__subscribeButton--subscribed";return window.ajax.post("al_video.php?act=playlist_subscribe",{playlist_raw_id:e,subscribe:t.classList.contains(o)?0:1,hash:window.cur.videoSubscriptionHash,ref:window.cur.ref},{onDone:(e,i,n,s,r)=>{var a;e||r?(t.classList.toggle(o,e),t.classList.toggle("VideoInfoPanel__action--primary",!e)):(t.classList.remove(o),t.classList.add("VideoInfoPanel__action--disabled"));const d=document.getElementById("subscribes_panel");d.innerHTML="",d.insertAdjacentHTML("beforeend",i);const l=null==(a=t.closest(".VideoInfoPanel"))?void 0:a.querySelector(".js-playlist_subscribers_count");if(l&&(l.innerHTML="",l.insertAdjacentHTML("beforeend",n)),["video_playlist_subscriptions","video_subscriptions"].includes(window.cur.ref)){const e=document.querySelector(".VideoHeader .ui_crumb_count");e&&(e.innerHTML=s)}}}),!1},onSearchFiltersChanged:e=>{var t;const o=!(0,p.isEmpty)(e);null==(t=document.querySelector(".VideoSearchInputWrapper"))||t.classList.toggle("VideoSearchInputWrapper--withFilters",o)},showVideoMenu:(e,t)=>{var o,i;const[n,s]=t.split("_");let r;r=window.cur.searchInputEl&&window.cur.searchInputEl.value?"search":window.cur.section_id;const a=(0,V.partConfigEnabled)("video_share_button_in_video_showcase_for_admins")?window.cur.oid:void 0;(0,w.showTooltip)(e,{url:"/al_video.php?act=get_video_menu",params:{owner_id:n,video_id:s,oid:a,module:r},shift:[12,0,0],width:203,needLeft:!0,forcetodown:!0,appendEl:(0,h.domPN)(e),dir:"bottom",className:"VideoCard__menuTooltip",hasover:!0,hideOnTooltipContainerClick:!0}),null==(i=window.cur)||null==(o=i.destroy)||o.push((()=>{var e;null==(e=window.tooltips)||e.destroyAll()}))},bookmarkVideo:(e,t,o,i,n="showcase")=>{let s=e.classList.contains("VideoCardMenu__item--bookmarked");window.bookmark(t,o,"video",i,s,"",n);const r=e.querySelector(".VideoCardMenu__itemLabel");r&&(s=!s,e.classList.toggle("VideoCardMenu__item--bookmarked",s),setTimeout((()=>{r.innerHTML=s?d.getLang("global_remove_from_bookmarks"):d.getLang("global_add_to_bookmarks")}),200))},setNotInteresting:(e,t,o,i)=>{window.ajax.post("al_video.php?act=not_interested",{owner_id:e,video_id:t,hash:o,track_code:i,ref:window.cur.ref},{onDone:i=>{i&&j.showCardFeedback(e,t,d.getLang("video_set_not_interesting"),d.getLang("video_cancel_feedback_action"),"UNSET_NOT_INTERESTING",o)}})},unsetNotInteresting:(e,t,o,i)=>{window.ajax.post("al_video.php?act=not_interested",{owner_id:e,video_id:t,hash:o,is_unset:!0,track_code:i,ref:window.cur.ref},{onDone:o=>{if(o){const o=document.querySelectorAll(`.ge_video_item_${e}_${t}`);o&&o.forEach((e=>{var t,o;e.classList.remove("VideoCard--withFeedback");const i=e.querySelector(".VideoCard__feedbackContainer");null==(o=i)||null==(t=o.parentNode)||t.removeChild(i)}))}}})},showCardFeedback:(e,t,o,i,n,s)=>{const r=document.querySelectorAll(`.ge_video_item_${e}_${t}`);r&&r.forEach((r=>{r.classList.add("VideoCard--withFeedback");const a=r.querySelector(".VideoCard__thumb");if(a){let r=`<div class="VideoCard__feedbackContainer"><div class="VideoCard__feedbackText">${o}</div>`;i&&(r+=`<div class="VideoCard__feedbackAction"\n                            data-task-click="VideoShowcase/feedback_action"\n                            data-owner-id="${e}"\n                            data-video-id="${t}"\n                            data-hash="${s}"\n                            data-action-type="${n}"\n                            >${i}</div>`),r+="</div>",a.insertAdjacentHTML("beforeend",r)}}))},playTrailer:(e,t)=>{if(!t)return void(e.classList.contains("VideoCard--showPlay")||e.classList.add("VideoCard--showPlay"));if(e.classList.contains("VideoRestriction--blur"))return;let o=e.querySelector(".VideoCard__trailer");if(!o){o=document.createElement("video"),o.className="VideoCard__trailer VideoCard__trailer--loading",o.onloadeddata=()=>o.classList.remove("VideoCard__trailer--loading"),o.crossOrigin="anonymous",o.src=t,o.muted=!0,o.loop=!0;const i=e.querySelector(".VideoCard__thumbWrapper");o=i.insertBefore(o,i.querySelector(".VideoCard__controls"))}o.play().catch((e=>{if(e instanceof Error&&(!(e instanceof DOMException)||20!==e.code&&"AbortError"!==e.name&&"NotAllowedError"!==e.name&&"NotSupportedError"!==e.name&&9!==e.code))throw e}))},stopTrailer:e=>{const t=e.querySelector(".VideoCard__trailer");t&&(t.pause(),t.currentTime=0)},copyLink:e=>{(0,m.copyToClipboard)(window.location.host+e),(0,c.showDoneBox)(d.getLang("video_playlist_url_copied")),window.cur.currentDropdown.hide()},clearHistory:(e,t,o)=>((0,l.showBox)("al_video.php?act=clear_history_confirm_box",{hash:o},{onDone:(e,o)=>{const{hash:i}=o;e.removeButtons(),e.addButton(d.getLang("global_delete"),(o=>j.confirmDeletingFromHistory(e,o,t,i)),void 0,!0),e.addButton(d.getLang("global_cancel"),e.hide,"no")}}),(0,g.cancelEvent)(e)),confirmDeletingFromHistory:(e,t,o,i)=>{window.ajax.post("al_video.php?act=clear_viewing_history_records",{hash:i},{onDone:t=>{var i;(e.hide(),t)&&(o.classList.contains("VideoHeader__button")?o.classList.add("VideoHeader__button--disabled"):window.dispatchEvent(new CustomEvent("VideoShowcase/ClearHistory")),(0,h.hide)(document.getElementById("video_subtab_pane_type_my_history")),null==(i=document.getElementById("video_empty_placeholder_main"))||i.classList.remove("VideoEmptyStub--hidden"))},showProgress:()=>(0,y.lockButton)(t),hideProgress:()=>(0,y.unlockButton)(t)})},deleteFromHistory:(e,t,o,i)=>(window.ajax.post("al_video.php?act=remove_viewing_history_records",{video_ids:[[t,o].join("_")],hash:i},{onDone:e=>{e&&j.showCardFeedback(t,o,d.getLang("video_success_removing_from_history"))}}),(0,g.cancelEvent)(e)),togglePlaylistView:(e,t)=>{const o=e.classList.contains("VideoHeader__action--playlistGridView");e.classList.toggle("VideoHeader__action--playlistGridView",!o),e.setAttribute("data-text",o?d.getLang("video_playlist_grid_view_tooltip"):d.getLang("video_playlist_list_view_tooltip"));const i=document.getElementById("video_all_playlists_list")||document.getElementById("video_all_playlist_subscriptions_list");i&&(i.classList.toggle("VideoGrid--listView",o),i.classList.toggle("VideoGrid--gridView",!o)),o&&j.refreshSliders(),j.playlistListViewPreferences=o,j.savePlaylistViewPreferences(t)},loadSection:e=>{var t;let i=window.cur.section_id;(null==(t=e)?void 0:t.url)&&(window.nav.objLoc[0]=e.url,window.nav.setLoc(e.url.startsWith("/")?e.url.substr(1):e.url));const s=window.nav.objLoc[0],r=Number(window.nav.objLoc.show_for_user_id),a=(0,h.ge)(`video_type_${i}_list`);if(!a)return void window.nav.go(s);const l={silent_loading:1};r&&(l.show_for_user_id=r);const c=(0,h.ge)("video_content_section"),w=(0,h.geByClass1)("ui_load_more_btn",c),v=(0,h.geByClass1)("VideoGrid--shopping",c);v&&v.classList.remove("VideoGrid--shopping");const _=(0,h.geByClass1)("VideoEmptyStub",c),m=()=>{a.classList.remove("VideoGrid--stub"),a.innerHTML=""},g=performance.now();window.ajax.post(s,l,{onDone:e=>{var t,r,l;const{videos:c,playlists:v,nextFrom:b,context:L,catPlaylists:E,shopping:C,tabList:T,videoShowcaseOnboarding:P,showcaseSessionId:I,videoShowcaseNps:k,videoShowcaseContinueWatch:N,videoShowcaseExclusive:x}=JSON.parse(e);I&&(window.cur.showcaseSessionId=I);const M=()=>{"/video"===window.location.pathname?window.nav.reload():window.nav.go("/video")},q=()=>{j.successfullOnboarding=!0},O=(0,V.partConfigEnabled)("video_onboarding_ask_to_refresh")?()=>{j.successfullOnboarding&&(0,u.showSnackbar)({before:{content:(0,n.jsx)(A.Icon28CheckCircleOutline,{})},text:d.getLang("video_onboarding_snackbar_refresh_text"),action:{onClick:M,label:d.getLang("video_onboarding_snackbar_refresh_action")},timeout:4e3})}:void 0;if(P&&Promise.all([o.e(98066),o.e(13492),o.e(16957)]).then(o.bind(o,808538)).then((({renderVideoOnboarding:e})=>{j.successfullOnboarding=!1,e({data:P,onDestroy:O,onSuccess:q})})),(null==(t=T)?void 0:t.length)&&Promise.all([o.e(98066),o.e(62795)]).then(o.bind(o,889241)).then((({initVideoTabs:e})=>{e({tabList:T})})),s===window.nav.objLoc[0]){if((0,f.saveStatlogEvents)({name:"video_showcase_web",value:Math.round(performance.now()-g),keys:[i,"change_tab_data","nav"]}),m(),C&&!(0,p.isEmpty)(C)){const e=document.createRange().createContextualFragment(C);a.classList.add("VideoGrid--shopping"),a.appendChild(e),j.updatePlaylistSlider(),b&&(window.cur.listNextFrom=b,(0,h.show)(w),(0,y.unlockButton)(w),window.Video&&window.Video._loadNextChunkIfNeed()),(0,S.updateThumbsInView)()}else if(c&&!(0,p.isEmpty)(c)||v&&!(0,p.isEmpty)(v)){const e=document.createDocumentFragment();for(let t of v){const o=(0,S.buildPlaylistEl)(t,!0);e.appendChild(o)}for(let t of c){const o=(0,S.buildVideoEl)(t,!0);e.appendChild(o)}if(a.appendChild(e),a.classList.remove("VideoGrid--shopping"),b&&(window.cur.listNextFrom=b,(0,h.show)(w),(0,y.unlockButton)(w),window.Video&&window.Video._loadNextChunkIfNeed()),(0,S.updateThumbsInView)(),k&&Promise.all([o.e(98066),o.e(63161)]).then(o.bind(o,117440)).then((({initNPSContainer:e})=>{e(k)})),N&&x&&N.containerRow===x.containerRow&&(x.containerRow+=1),N&&D().then((({initContainer:e})=>{e(N)})),x&&D().then((({initContainer:e})=>{e(x)})),E&&window.cur.catPlaylistId&&E[window.cur.catPlaylistId]){var B,H,F;E[window.cur.catPlaylistId].list=c,(0,p.extend)(window.cur.catVideosList,{},E);const e=window.VideoPlaylist?window.VideoPlaylist.getCurListId():"";if(window.Videoview&&window.mvcur&&"cat_lives"!==window.cur.catPlaylistId&&(!e||window.cur.catPlaylistId===e)&&(!(null==(B=window.Video)?void 0:B.isGlobalSearchMode())||window.cur.isCatalog&&(null==(H=window.Video)?void 0:H.shouldShowSearchInPlaylistWithSearch())||!window.cur.isCatalog&&!(null==(F=window.Video)?void 0:F.shouldShowOtherInPlaylistWithSearch()))){var z,R;const e=(null==(z=window.Video)?void 0:z.isGlobalSearchMode())&&(null==(R=window.Video)?void 0:R.shouldShowSearchInPlaylistWithSearch());window.Videoview.initPlaylistBlock(window.mvcur.videoRaw,e?window.Video.VIDEO_GLOBAL_SEARCH_TYPE:window.cur.catPlaylistId)}}}else(0,h.show)(_);window.cur.ref=(null==(r=L)?void 0:r.ref)||window.cur.ref,window.cur.ref_context=(null==(l=L)?void 0:l.ref_context)||window.cur.ref_context,(0,f.saveStatlogEvents)({name:"video_showcase_web",value:Math.round(performance.now()-g),keys:[i,"change_tab","nav"]})}},onFail:()=>(m(),(0,h.show)(_),!0),timeout:3e4}),(0,h.hide)(w),(0,h.hide)(_),(()=>{const e=window.cur.showcaseChunkSize||18;let t=window.cur.cardStub;if(a.classList.add("VideoGrid--stub"),t){a.innerHTML="";const o=document.createDocumentFragment();for(let i=0;i<e;i++)o.appendChild((0,h.se)(t));a.appendChild(o)}})()},savePlaylistViewPreferences:e=>{window.vk.id&&(window.clearTimeout(j.savePlaylistViewPreferencesTimeout),j.savePlaylistViewPreferencesTimeout=window.setTimeout((()=>{window.ajax.post("/al_video.php?act=save_playlist_view_preferences",{hash:window.cur.playlistViewPreferencesHash,page_type:e,prefer_list_view:j.playlistListViewPreferences?1:0})}),500))},logClickEvent(e,t){(0,I.logCardsAction)([e],"CLICK","VIDEO",[t])}}},128767:(e,t,o)=>{o.d(t,{initPortalNavigation:()=>l});var i=o(196026),n=o(321850),s=o(75272),r=o(786858),a=o(766698),d=o(970978);function l({onInitStateChange:e}){var t;const l=document.querySelector(".PortalNavigation");if(!l)return;const c=document.querySelector(".side_bar_nav_wrap > *");if(!c)return;const u=(0,s.createElementFromHTML)('\n    <div class="PortalNavigationDropdown__scroll">\n      <div class="PortalNavigationDropdown__content"></div>\n    </div>\n  ');(0,r.assertNotNull)(u),null==(t=u.querySelector(".PortalNavigationDropdown__content"))||t.appendChild(c.cloneNode(!0));const w="PortalNavigation--expanded",v=".PortalNavigationDropdown__scroll";Promise.all([Promise.resolve().then(o.bind(o,84543)).then((e=>e.ElementTooltip)),o.e(60593).then(o.bind(o,258810)).then((e=>e.UiScroll))]).then((([t,o])=>{let s,r,d;r=new t(l,{forceSide:"bottom",autoShow:!1,cls:"PortalNavigationDropdown",elClassWhenShown:w,noOverflow:!1,noBorder:!0,width:252,appendTo:document.querySelector("#page_header_cont"),content:u,align:t.ALIGN_LEFT,onFirstTimeShow:()=>{const e=r.getContent();e&&(d=(0,a.createLeftMenuInitiator)(e),d.render()),s=new o(document.querySelector(v))},onShow:()=>{(0,i.cancelStackPush)("portal_navigation",(()=>{r.hide()}),!0),s||(s=new o(document.querySelector(v)))},onBeforeHide:()=>{s.scrollTop(!1,0),(0,i.cancelStackPop)()},onDestroy:()=>{var e,t;null==(e=d)||e.unmount(),l.classList.remove(w),null==(t=s)||t.destroy()}}),e(!0),(0,n.pushNavDestroy)((()=>{var t;null==(t=r)||t.destroy(),e(!1)}))})).catch((e=>{(0,d.logError)(e,{environment:"portal_navigation"})}))}},397501:(e,t,o)=>{o.d(t,{default:()=>w,lazyLoadPlayer:()=>v});var i=o(664988),n=o(643897),s=o(121164),r=o(795558),a=o(362246),d=o(839470),l=o(809053);const c={queue:[],timeout:null,sig:""};function u(e,t){var o,i,n,s,r,a,d;if(!t.send_debug)return;c.sig=[t.action_hash,t.oid,t.vid,t.viewer_id].join("_");const l={ts:Math.round(Date.now()/1e3),video_id:[t.oid,t.vid].join("_"),e:"video_event",event:"debug",value:e,ov_id:t.ov_id,ad_data:t.ad_data,autoplay:t.autoplay,track_code:t.track_code,player_type:null!=(r=null==(i=window.Videoview)||null==(o=i.getLayoutType)?void 0:o.call(i))?r:"",ref:null!=(d=null!=(a=t.module)?a:null==(s=window.Videoview)||null==(n=s.getVideoModule)?void 0:n.call(s))?d:""};var u;c.queue.push(l),c.timeout=null!=(u=c.timeout)?u:window.setTimeout((()=>{ajax.post("al_video.php?act=track_player_events",{events:JSON.stringify(c.queue),sig:c.sig}),c.queue=[],c.timeout=null}),1e3)}const w={initPlayer(e,t,o){(0,r.hide)((0,r.domByClass)(e,"video_box_msg")),VideoInitializer[t].apply(VideoInitializer,[e].concat(o)),window.stManager.add(window.jsc("web/notifier.js"),(function(){const e=Videoview.togglePlay.pbind(!1);Notifier.addRecvClbk("audio_start","video",e),Notifier.addRecvClbk("video_start","video",e),Notifier.addRecvClbk("videocall_start","video",e)}))},vk(e,t){const o=t.oid+"_"+t.vid;if(t.vsegs)ls.remove("vsegs"+vk.id+"_"+o);else{const e=ls.get("vsegs"+vk.id+"_"+o);e&&e.ts&&e.segments&&Date.now()-e.ts<864e5&&(t.vsegs=e.segments.replace(/[^0-9\,\|]/gi,""))}if(e&&e instanceof HTMLElement){const o=(0,l.getTrackCodeFromPost)(e);o&&(t.track_code=o)}window.onLoaded((function(){VideoInitializer.unionPlayer(e,t)}))},unionPlayer(e,t){u("requested",t);const n=window.mvLayer&&window.mvLayer.contains(e);(0,r.val)(e,""),window.stManager.add(["videoplayer.css"]),Promise.all([o.e(86708),o.e(52974)]).then(o.bind(o,572556)).then((({Player:o})=>{if(!document.body.contains(e))return void u("domabort",t);let s;u("imported",t);try{s=new o(t,e)}catch(e){throw u("constructor_failed",t),e}n?(mvcur.player&&mvcur.player.destroy(),mvcur.sdkPlayer=s,mvcur.player=mvcur.sdkPlayer):t.is_embed?cur.player=s:cur.videoInlinePlayer=s;const a=(0,r.ce)("div",{id:"video_player"});(0,r.attr)(a,"preventhide",1),a.appendChild(s.el),e.appendChild(a),(0,i.isFunction)(t.onPlayerLoaded)&&t.onPlayerLoaded(s)}),(e=>{throw u("import_failed",t),e}))},youtube(e,t){const o=t.oid,i=t.vid,a=t.report_error_hash;t.restriction||(document.pictureInPictureEnabled&&document.pictureInPictureElement&&document.exitPictureInPicture(),window.onYouTubeIframeAPIReady=function(){const s=(0,r.domByClass)(e,"video_yt_player"),d=new window.YT.Player(s,{events:{onError:function(e){e.data&&[100,101,150].includes(e.data)&&ajax.post("al_video.php?act=reparseDeletedYoutube",{vid:i,oid:o}),(0,n.debugLog)("YT player error",arguments),ajax.post("al_video.php?act=external_error",{oid:o,vid:i,hash:a})},onStateChange:function(e){switch(e.data){case window.YT.PlayerState.ENDED:window.stManager.add([window.jsc("web/videoview.js"),"videoview.css",window.jsc("web/external_video.js")],(function(){var e;const t=document.getElementById("video_yt");null==(e=window.ExternalVideo)||e.onExternalVideoEnded(t)}));break;case window.YT.PlayerState.PLAYING:const e=window.ap;e&&e.isPlaying()&&e.pause();break;default:var t;if(document.getElementById("mv_external_finish"))null==(t=window.ExternalVideo)||t.removeExternalVideoFinishBlock()}}}});window.stManager.add([window.jsc("web/video_youtube.js")],(function(){VideoYoutube.initStatOnly(d,t)}))},window.YT?window.onYouTubeIframeAPIReady():(0,s.loadScript)("https://www.youtube.com/iframe_api",{attributes:{async:!0,fetchPriority:"high"}}))},iframeOrFlash(e,t,o,i,n,s){(0,r.val)(e,'<iframe class="extra_player" type="text/html" width="100%" height="100%" src="'+encodeURI(i)+'" frameborder="0" '+n+"></iframe>"),s&&setTimeout((()=>{cur&&cur.incViews&&cur.incViews()}),100)}},v=(e="vk")=>{if((0,d.partConfigEnabled)("video_lazy_load_player"))try{(0,a.idlizeCall)((()=>window.setTimeout((()=>(0,a.idlizeCall)((()=>(e=>{switch(e){case"vk":window.stManager.add(["videoplayer.css"]),Promise.all([o.e(86708),o.e(52974)]).then(o.bind(o,572556));break;case"youtube":const e="https://www.youtube.com/iframe_api";(window.YT||document.head.querySelector(`script[src="${e}"]`))&&(0,s.loadScript)(e,{attributes:{defer:!0,fetchPriority:"low"}})}})(e)))),300)))}catch(e){console.error(e)}}}}]);try{stManager.done("dist/47cf97befc2564d04fbc079ef5887a62.fad379894d02237096b5.js")}catch(e){}