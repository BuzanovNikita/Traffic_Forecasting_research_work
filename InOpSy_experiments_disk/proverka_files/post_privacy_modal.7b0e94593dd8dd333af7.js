(()=>{"use strict";var e,t,s,n,r,i,o={658508:(e,t,s)=>{s.d(t,{Icon28ChevronRightOutline:()=>n});var n=(0,s(28178).makeIcon)("Icon28ChevronRightOutline","chevron_right_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11 7.5 6.5 6.5-6.5 6.5" /><path fill="currentColor" fill-rule="nonzero" d="m16.086 14-5.793 5.793a1 1 0 0 0 1.414 1.414l6.5-6.5a1 1 0 0 0 0-1.414l-6.5-6.5a1 1 0 0 0-1.414 1.414L16.086 14Z" /></g></symbol>',28,28,!1,void 0)},196709:(e,t,s)=>{s.d(t,{sendCarouselClickEvent:()=>o,sendFeedOpenAudioStats:()=>a});var n=s(470055),r=s(957973),i=s(839470);function o(e,t,s){if(!(0,i.partConfigEnabled)("feed_content_events_next_prev_click_web")||!t||!s)return;let o=null;1===e?o=r.EventItemType.CLICK_NEXT:-1===e?o=r.EventItemType.CLICK_PREVIOUS:0===e&&(o=r.EventItemType.CLICK_PRETTY_CARD),o&&n.feedInteractionItemStatCollector.logEvent({track_code:t,ref:s,item:r.FeedInteractionItemType.WALL_ITEM},o)}function a(e,t){e&&t&&n.feedInteractionItemStatCollector.logEvent({track_code:e,ref:t,item:r.FeedInteractionItemType.WALL_ITEM},r.EventItemType.OPEN_AUDIO)}},449991:(e,t,s)=>{s.d(t,{AUTOMATIC_BEST_FRIENDS_FROM_HINTS_COUNT:()=>r,BEST_FRIENDS_MAX_COUNT:()=>n,BEST_FRIENDS_SELECT_MODE:()=>i});const n=100,r=10;var i;!function(e){e.ADD="add",e.DELETE="delete"}(i||(i={}))},849776:(e,t,s)=>{s.d(t,{BADGES_RESTRICTED_CLASS_SELECTOR_FOR_POST:()=>l,buildBadgesStackHtml:()=>h,buildHtmlAttributesString:()=>c,getBadgeImage:()=>_,getBadgesPlacementInPostActionStatusBarToUpdate:()=>g,isBadgesDisabledForOwner:()=>p,openHelpPage:()=>f,updateNewPostHTMLForBadges:()=>u});var n=s(82161),r=s(316688),i=s(68003),o=s(29271),a=s(222285),d=s(216833);const l="post--badgesRestricted";function _(e,t,s=!1){const{base_url:r,version:i}=e,o=i?`?${i}`:"";return!s&&(0,n.isRetina)()&&(t*=2),`${r}/${t}.png${o}`}const c=e=>Object.entries(e).reduce(((e,[t,s])=>{if(s){e+=` ${t}="${(0,n.escapeAttr)(String(s))}"`}return e}),""),g=(e,t,s)=>{var n;const i={place:void 0},o=e.querySelector(`._like_wall${t}_${s}`);if(!o)return(0,r.badgesLogger)("Нет кнопки лайка"),i;const a=null==(n=o.parentNode)?void 0:n.querySelector(".PostActionStatusBar");if(!a)return(0,r.badgesLogger)("Нет .PostActionStatusBar"),i;const d=a.querySelector(".BadgesStatusBar__badgesSendButton"),l=a.querySelector(".BadgesStack");return d||l?d?(i.element=d,i.place="button",i):(i.element=l,i.place="stack",i):((0,r.badgesLogger)('Нет ни стака значков, ни кнопки "Подарить"'),i)},h=({counters:e,badges:t,tqAttributes:s,withContainer:r,withLabel:a})=>{let d=0,l=0,_="";const g=i.colorScheme.isDarkScheme();if((e||[]).forEach((({type:e,badge_id:s,value:r})=>{if("total"===e)d=r;else if("badge"===e&&s&&l<3){var i;l++;const e=null==(i=t)?void 0:i.find((e=>e.id===s));if(e){const{image:t}=e,s=(0,n.isRetina)()?"stack28_light_2x.png":"stack28_light.png",r=(0,n.isRetina)()?"stack28_dark_2x.png":"stack28_dark.png",i=t.version?`?${t.version}`:"",o=`${t.base_url}/${s}${i}`,a=`${t.base_url}/${r}${i}`,d=c({src:g?a:o,class:"BadgesStackItem BadgesStack__item",alt:e.alt_text||"","data-src-light":o,"data-src-dark":a});_+=`<img ${d}>`}}})),d>0&&_){let e=`\n      <div class="BadgesStack__inner" ${s}>\n        <div class="BadgesStack__items">${_}</div>\n        <span class="BadgesStack__counter">${a?o.getLang("awards_have_gifted_badges_total",d):o.getLang("awards_wkview_badges_total",d)}</span>\n      </div>\n    `;if(r){e=`\n        <div data-tooltip-container="true" id="badges_stack" class="BadgesStack" ${"data-exec='{\"BadgesStack/init\":[]}'"}>\n          ${e}\n        </div>\n      `}return e}return""},u=(e,t,s)=>{var n,r;const i=s[2],[o,l]=i.split("_"),_=null==(r=t)||null==(n=r.wallTpl)?void 0:n.send_badge,c={};return(0,d.isBadgesEnabled)()&&_&&(e.push(_),Object.assign(c,{badges_object_id:l,badges_object_owner_id:o,badges_object_type:a.BadgesObjectType.WALL,badges_event_ref:a.BadgesEventRef.POST_BTN})),c},p=e=>{const t=e[16];try{var s;if(""===t||(null==(s=JSON.parse(t))?void 0:s.is_disabled))return!0}catch(e){return(0,r.badgesLogger)("Event from queue about IS_DISABLED_FOR_OWNER is not json"),!1}return!1},f=()=>{window.open(a.LINK_TO_HELP_FOR_AUTHORS,"_blank")}},316688:(e,t,s)=>{s.d(t,{badgesLogger:()=>r});var n=s(970978);const r=(e,t)=>{window.vk.dev&&console.log(t),(0,n.logError)(new Error(e),{environment:"badges"})}},341663:(e,t,s)=>{s.d(t,{BestFriendsConversationsBlock:()=>c});var n=s(785893),r=s(667294),i=s(681088),o=s(512334),a=s(589897),d=s(205423),l=s(883951),_=s(29271);class c extends r.Component{render(){const{conversations:e,conversationsShownCount:t,showMoreConversations:s,onConversationClick:r,fromSearch:a}=this.props,c=a?e:e.slice(0,t),g=Math.min(e.length-t,5),h=_.getLang("wall_best_friends_settings_box_conversation_more",g);return(0,n.jsxs)("div",{className:"BestFriendsSettingsBox__chats",children:[(0,n.jsx)("div",{className:"BestFriendsSettingsBox__header",children:(0,n.jsx)("span",{className:"BestFriendsSettingsBox__sectionTitle",children:_.getLang("wall_best_friends_settings_box_title_chats")})}),c.map(((e,t)=>(0,n.jsx)(o.default,{aside:a?"":this.getButton(e),onClick:()=>r(e.peerId,!this.isAllFriendsAdded(e)||a,a,a),children:(0,n.jsx)(d.default,{size:"34",title:e.name,description:this.getDescription(e),photo:(0,n.jsx)(i.default,{photos:this.getAvatarImages(e)})})},t))),!a&&g>0&&(0,n.jsx)(l.ListMore,{className:"BestFriendsSettingsBox__listMore",onClick:s,children:h})]})}isAllFriendsAdded(e){return e.userIds.every((e=>this.props.bestFriends.includes(e)))}getAvatarImages(e){const t=[];return e.photoUrl?t.push(e.photoUrl):e.userIds.slice(0,4).forEach((e=>{const s=this.props.friends.find((t=>t.id===e));s&&t.push(s.photoUrl)})),t}getButton(e){let t=_.getLang("wall_best_friends_settings_box_conversation_add"),s="secondary";return this.isAllFriendsAdded(e)&&(t=_.getLang("wall_best_friends_settings_box_conversation_cancel"),s="tertiary"),(0,n.jsx)(a.default,{mode:s,size:"s",children:t})}getDescription(e){return _.getLang("wall_best_friends_settings_box_conversation_friends_count",e.userIds.length)}}},246615:(e,t,s)=>{s.d(t,{BestFriendsFriendsBlock:()=>h});var n=s(785893),r=s(667294),i=s(758021),o=s(375135),a=s(512334),d=s(205423),l=s(840842),_=s(29271),c=s(659397),g=s(449991);class h extends r.Component{render(){const{friendsList:e,fromSearch:t,clearFriends:s}=this.props;return(0,n.jsxs)("div",{className:"BestFriendsSettingsBox__friends",children:[(0,n.jsxs)("div",{className:"BestFriendsSettingsBox__header",children:[(0,n.jsx)("span",{className:"BestFriendsSettingsBox__sectionTitle",children:_.getLang("wall_best_friends_settings_box_title_friends")}),!t&&(0,n.jsx)(l.default,{className:"BestFriendsSettingsBox__link",onClick:s,children:_.getLang("wall_best_friends_settings_box_friends_clear")})]}),(0,n.jsx)(i.default,{className:"BestFriendsSettingsBox__list",loadMore:()=>{},hasMore:!1,children:e.map((e=>this.renderItem(e,t)))})]})}renderItem(e,t=!1){const s=this.props.isSelected(e.id),r=this.props.bestFriends.length>=g.BEST_FRIENDS_MAX_COUNT&&!s,i=t||r,l=(0,c.classNames)("BestFriendsSettingsBox__item",{"BestFriendsSettingsBox__item--disabled":r});return(0,n.jsx)(a.default,{onClick:()=>this.props.select(e.id,t,t?g.BEST_FRIENDS_SELECT_MODE.ADD:"",t),aside:i?"":(0,n.jsx)(o.ListMultiSelectControl,{isSelected:s}),className:l,canBeHovered:!r,selectable:!r,children:(0,n.jsx)(d.default,{size:"34",title:e.name,photo:e.photoUrl})},e.id)}}},555256:(e,t,s)=>{s.d(t,{BestFriendsSettingsBox:()=>E});var n=s(785893),r=s(667294),i=s(341663),o=s(246615),a=s(635928),d=s(832550),l=s(816511),_=s(103045),c=s(331533),g=s(545637),h=s(33045),u=s(126116),p=s(29271),f=s(514986),v=s(672132),S=s(725296),b=s(449991),F=s(234275);class E extends r.Component{componentDidMount(){const{friendsSorted:e,bestFriends:t}=this.state;t.length||this.select(e.slice(0,b.AUTOMATIC_BEST_FRIENDS_FROM_HINTS_COUNT).map((e=>e.id)),!1,b.BEST_FRIENDS_SELECT_MODE.ADD)}renderNotFound(e){const t=e?p.getLang("wall_best_friends_settings_no_friends"):p.getLang("wall_search_nothing_found");return(0,n.jsx)(a.Placeholder,{children:t})}renderContent(e,t,s=!1){return(0,n.jsxs)("div",{className:"BestFriendsSettingsBox__inner",children:[Boolean(t.length)&&(0,n.jsx)(i.BestFriendsConversationsBlock,{conversations:t,conversationsShownCount:this.state.conversationsShownCount,showMoreConversations:this.showMoreConversations,onConversationClick:this.onConversationClick,fromSearch:s,bestFriends:this.state.bestFriends,friends:this.state.friendsSorted}),Boolean(e.length)&&(0,n.jsx)(o.BestFriendsFriendsBlock,{bestFriends:this.state.bestFriends,fromSearch:s,friendsList:e,select:this.select,isSelected:this.isSelected,clearFriends:this.clearFriends})]})}initIndexer(){const{friends:e,conversations:t}=this.props;this.indexedFriends=new v.vkIndexer(e,(e=>[e.name,e.domain].filter(Boolean).join(" "))),this.indexedConversations=new v.vkIndexer(t,(e=>e.name))}getFilteredFriendsList(){const{friends:e,bestFriends:t}=this.props;return[...t.map((t=>e.find((e=>e.id===t)))),...e.filter((e=>!t.includes(e.id)))].filter((e=>e))}getFilteredData(){let{searchQuery:e,friendsSorted:t,conversationsSorted:s}=this.state;return e&&(t=this.indexedFriends.search(e),s=this.indexedConversations.search(e)),{friendsSorted:t,conversationsSorted:s}}getActionModalButtons(){const{onClose:e}=this.props,{isSaving:t}=this.state;return[(0,n.jsx)(d.Button,{mode:"tertiary",size:"m",onClick:()=>e(),children:p.getLang("global_cancel")},"close"),(0,n.jsx)(d.Button,{mode:"primary",size:"m",onClick:this.onClickSave,loading:t,disabled:this.compareBestFriendsList(),children:p.getLang("global_save")},"publish")]}getHint(){const{bestFriends:e}=this.state;return e.length?p.getLang("wall_best_friends_settings_box_friends_count",e.length):""}compareBestFriendsList(){const{bestFriends:e}=this.props,{bestFriends:t}=this.state;return e.length===t.length&&e.every((e=>t.includes(e)))}getConversationByPeerId(e){return this.state.conversationsSorted.find((t=>t.peerId===e))}getBestFriendsFromBatch(e){let t=this.props.bestFriends.slice();return e.forEach((e=>{e.op===b.BEST_FRIENDS_SELECT_MODE.DELETE?t.splice(t.indexOf(e.user_id),1):t.push(e.user_id)})),t}render(){const{searchQuery:e}=this.state,{friendsSorted:t,conversationsSorted:s}=this.getFilteredData(),{friends:r}=this.props,i=0===r.length,o=e&&!t.length&&!s.length;return(0,n.jsxs)(l.ModalBox,{className:"BestFriendsSettingsBox",children:[(0,n.jsx)(_.ModalHeaderHero,{onClose:this.props.onClose,closeAriaLabel:p.getLang("global_close"),description:(0,n.jsx)(c.InnerHTML,{children:p.getLang("wall_best_friends_settings_box_subtitle")}),children:p.getLang("wall_best_friends_settings_box_title")}),(0,n.jsxs)("div",{className:"BestFriendsSettingsBox__body",children:[(0,n.jsx)(g.Div,{mode:"horizontal",spacing:8,children:(0,n.jsx)(h.Search,{onChange:e=>this.setState({searchQuery:e.target.value}),placeholder:p.getLang("wall_best_friends_settings_box_search_placeholder"),autoFocus:!0,value:e},"search")}),i||o?this.renderNotFound(i):this.renderContent(t,s,Boolean(e))]}),(0,n.jsx)(u.ModalFooter,{before:this.getHint(),actionButtons:this.getActionModalButtons()})]})}constructor(e){super(e),this.onClickSave=()=>{(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.saveBestFriendsList);const e=(e,t)=>{(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.updatePopupSave);const{onSave:s}=this.props;this.setState({isSaving:!0}),window.ajax.post("al_wall.php",{act:"edit_best_friends",batch:JSON.stringify(this.state.batchItems),hash:this.props.hash},{onDone:()=>{var t;this.setState({isSaving:!1}),null==(t=e)||t.hide(),s&&s(this.state.bestFriends.length)},onFail:t=>{var s;return(0,f.showFastBox)(p.getLang("global_error"),t||p.getLang("global_unknown_error")),this.setState({isSaving:!1}),null==(s=e)||s.hide(),!0},showProgress:()=>(0,S.lockButton)(t),hideProgress:()=>(0,S.unlockButton)(t)})};if(0===this.state.bestFriends.length)e(null,null);else{const t=`\n        <div class="BestFriendsSettingsBoxConfirm">\n          <span class="BestFriendsSettingsBoxConfirm__title">${p.getLang("wall_best_friends_settings_box_confirm_save")}</span>\n          <span class="BestFriendsSettingsBoxConfirm__text">${p.getLang("wall_best_friends_settings_box_confirm_save_text")}</span>\n        </div>\n      `,s=(0,f.showFastBox)(p.getLang("wall_best_friends_settings_box_confirm_title"),t,p.getLang("global_save"),(t=>e(s,t)),p.getLang("global_cancel"),(()=>(e=>{e.hide(),(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.updatePopupCancel)})(s)))}},this.showMoreConversations=()=>{(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.moreChats),this.setState({conversationsShownCount:this.state.conversationsShownCount+5})},this.isSelected=e=>this.state.bestFriends.includes(e),this.select=(e,t,s,n)=>{n&&(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.selectFriendFromSearch);const{batchItems:r,friendsSorted:i}=this.state,o=s===b.BEST_FRIENDS_SELECT_MODE.ADD;Array.isArray(e)||(e=[e]);let a=i.slice(),d=r.slice();e.forEach((e=>{const s=this.isSelected(e),n=this.getBestFriendsFromBatch(d).length;if(s||!(n>=b.BEST_FRIENDS_MAX_COUNT)){if(!o||!s){const t=d.findIndex((t=>t.user_id===e));-1!==t?d.splice(t,1):d.push({op:s?b.BEST_FRIENDS_SELECT_MODE.DELETE:b.BEST_FRIENDS_SELECT_MODE.ADD,user_id:e})}if(t){const t=a.findIndex((t=>t.id===e));a.unshift(...a.splice(t,1))}}})),this.setState({searchQuery:"",bestFriends:this.getBestFriendsFromBatch(d),batchItems:d,friendsSorted:a})},this.clearFriends=()=>{this.select(this.state.bestFriends),(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.clear)},this.onConversationClick=(e,t,s,n)=>{const{conversationsSorted:r}=this.state,i=this.getConversationByPeerId(e);if(!i)return;let o=r.slice(),a=this.state.conversationsShownCount;if(s){const t=o.map((e=>e.peerId)).indexOf(e);o.unshift(...o.splice(t,1)),t+1>a&&(a+=1)}t&&(n?(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.selectChatFromSearch):(0,F.sendBestFriendsAnalytic)(F.BestFriendsEventType.addFriendsFromChat)),this.setState({conversationsSorted:o,conversationsShownCount:a},(()=>{const e=t?b.BEST_FRIENDS_SELECT_MODE.ADD:b.BEST_FRIENDS_SELECT_MODE.DELETE;this.select(i.userIds,t,e)}))};const{conversations:t,bestFriends:s}=e;this.state={isSaving:!1,searchQuery:"",friendsSorted:this.getFilteredFriendsList(),conversationsSorted:t,conversationsShownCount:2,bestFriends:s,batchItems:[]},this.initIndexer()}}},586536:(e,t,s)=>{s.d(t,{bestFriendsBoxSettings:()=>c});var n=s(434788),r=s(785893),i=s(555256),o=s(29271),a=s(514986),d=s(970978),l=s(584356),_=s(359639);const c=e=>{window.ajax.post("al_wall.php",{act:"get_best_friends_box_data"},{loader:!0,onDone:(t,s,a,d)=>{(0,_.showMessageBoxModal)((_=>{const{onClose:c}=_;return(0,r.jsx)(i.BestFriendsSettingsBox,(0,n._)({},_,{friends:t,bestFriends:s,conversations:a,hash:d,onSave:t=>{((t,s)=>{e&&e(t);let n=o.getLang("wall_best_friends_settings_box_saved"),r=o.getLang("wall_best_friends_settings_box_saved_text");0===t&&(n=o.getLang("wall_best_friends_settings_box_saved_empty"),r=o.getLang("wall_best_friends_settings_box_saved_empty_text")),(0,l.showDoneBox)(`<div class="top_result_header">${n}</div>${r}`),s()})(t,c)}}))}),{width:450})},onFail:e=>((0,a.showFastBox)(o.getLang("global_error"),e||o.getLang("global_unknown_error")),(0,d.logError)(new Error("get_best_friends_box_data error"+(e?`: ${e}`:""))),!0)})}},861690:(e,t,s)=>{var n,r,i,o=s(622121);(null==(r=window.vk)||null==(n=r.pe)?void 0:n.static_manager_dynamic_imports)&&(null==(i=window.vk)?void 0:i.stDomain)&&(s.p=window.vk.stDomain+"/dist/"),window.openPostPrivacyModal=o.openPostPrivacyModal;try{window.stManager.done(window.jsc("web/post_privacy_modal.js"))}catch(e){}},864424:(e,t,s)=>{s.d(t,{attachPlayerEventHandler:()=>a,isFeedPostDurationStatsFixEnabled:()=>o,sendCarouselClickEventWeb:()=>d,shouldLinkEmitOpenGroupUserEvent:()=>l});var n=s(839470),r=s(809053),i=s(196709);function o(){return(0,n.partConfigEnabled)("feed_posts_duration_stats_fix")}function a({isAudioChanged:e,attachElement:t}){if(!(0,n.partConfigEnabled)("feed_content_events_open_audio")||!e||!t)return;const s=(0,r.getTrackCodeFromPost)(t),o=(0,r.resolveRefFromCur)();(0,i.sendFeedOpenAudioStats)(s,o)}function d(e,t,s){(0,n.partConfigEnabled)("feed_content_events_next_prev_click_web")&&(0,i.sendCarouselClickEvent)(e,t,s)}function l(e){var t;return"Post/ownerLinkClick"===(null==(t=e)?void 0:t.getAttribute("data-task-click"))}},166472:(e,t,s)=>{s.d(t,{PRIVACY_MODAL_MODES:()=>v,PrivacyModal:()=>E});var n=s(785893),r=s(234275),i=s(586536),o=s(816511),a=s(685371),d=s(439536),l=s(331533),_=s(398310),c=s(832550),g=s(560004),h=s(555510),u=s(82161),p=s(29271),f=s(359639);const v={BEST_FRIENDS_ENTRYPOINT:"bestFriendsEntrypoint",CHOOSE_BEST_FRIENDS:"chooseBestFriends",CREATE_POST_FOR_BEST_FRIENDS:"createPostForBestFriends",CREATE_POST_FOR_FRIENDS:"createPostForFriends",OWN_POST_FOR_BEST_FRIENDS:"ownPostForBestFriends",OWN_POST_FOR_BEST_FRIENDS_EMPTY:"ownPostForBestFriendsEmpty",OWN_POST_FOR_FRIENDS:"ownPostForFriends"},S="best_friends_only",b="friends_only",F=e=>{const t=new URLSearchParams({post_privacy:e,own:1,new_post:1}).toString();return`/wall${window.vk.id}?${t}`},E=({mode:e,name:t,sex:s,onClose:E})=>{const{title:m,text:B,buttonText:w,action:y}=((e,t,s,n)=>{let o="",a="",d="",l=()=>{};const _=e=>{(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.editBestFriendsFromPopup),n(),(0,i.bestFriendsBoxSettings)((t=>{var s;if(0===t)return;if(e)return void window.open(F(S));const n=document.getElementById("best_friends_only");if(!n)return;const r=p.getLang("wall_best_friends_settings_box_conversation_friends_count",t);n.innerHTML=(0,u.getTemplate)("visibility_access_best_friends_only_option",{html:(0,u.getTemplate)("visibility_access_best_friends_only_item",{count_text:r}),count:t}),g.default.showEditPost(),g.default.togglePostVisibilityAccess(n,h.VISIBILITY_ACCESS_OPTIONS.ONLY_BEST_FRIENDS,"",!0),null==(s=document.querySelector(".BestFriendsSettingsEntrypoint"))||s.remove()}))};switch(e){case v.BEST_FRIENDS_ENTRYPOINT:o=p.getLang("wall_privacy_modal_best_friends_own_title"),a=p.getLang("wall_privacy_modal_best_friends_own_text"),d=p.getLang("wall_privacy_modal_choose_best_friends_button"),l=_;break;case v.CHOOSE_BEST_FRIENDS:o=(0,p.langSex)(s,p.getLang("wall_privacy_modal_best_friends_title","raw")).replace("{name}",t),a=p.getLang("wall_privacy_modal_choose_best_friends_text"),d=p.getLang("wall_privacy_modal_choose_best_friends_button"),l=()=>_(!0);break;case v.CREATE_POST_FOR_BEST_FRIENDS:o=(0,p.langSex)(s,p.getLang("wall_privacy_modal_best_friends_title","raw")).replace("{name}",t),a=p.getLang("wall_privacy_modal_best_friends_text"),d=p.getLang("wall_privacy_modal_create_post_button"),l=()=>{(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupBest),window.open(F(S)),n()};break;case v.CREATE_POST_FOR_FRIENDS:o=(0,p.langSex)(s,p.getLang("wall_privacy_modal_friends_title","raw")).replace("{name}",t),a=p.getLang("wall_privacy_modal_friends_text"),d=p.getLang("wall_privacy_modal_create_post_button"),l=()=>{(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupFriends),window.open(F(b)),n()};break;case v.OWN_POST_FOR_BEST_FRIENDS:o=p.getLang("wall_privacy_modal_own_post_for_best_friends_title"),a=p.getLang("wall_privacy_modal_own_post_for_best_friends_text"),d=p.getLang("wall_privacy_modal_create_post_more_button"),l=()=>{(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupBest),window.open(F(S)),n()};break;case v.OWN_POST_FOR_BEST_FRIENDS_EMPTY:o=p.getLang("wall_privacy_modal_own_post_for_best_friends_empty_title"),a=p.getLang("wall_privacy_modal_own_post_for_best_friends_empty_text"),d=p.getLang("wall_privacy_modal_choose_best_friends_button"),l=()=>_(!0);break;case v.OWN_POST_FOR_FRIENDS:o=p.getLang("wall_privacy_modal_own_post_for_friends_title"),a=p.getLang("wall_privacy_modal_own_post_for_friends_text"),d=p.getLang("wall_privacy_modal_create_post_more_button"),l=()=>{(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupFriends),window.open(F(b)),n()}}return{title:o,text:a,buttonText:d,action:l}})(e,t,s,E);return(0,n.jsxs)(o.ModalBox,{children:[(0,n.jsx)(f.MessageBoxDismissButton,{onClick:E}),(0,n.jsxs)(a.ModalBody,{insetLevel:1,children:[(0,n.jsx)(d.ModalTextLayout,{subheader:(0,n.jsx)(l.InnerHTML,{Component:"div",className:"PrivacyModal__text",children:B}),subheaderMode:"primary",children:m}),(0,n.jsx)(_.ButtonLayout,{children:(0,n.jsx)(c.Button,{size:"m",mode:"primary",onClick:()=>y(),children:w})})]})]})}},622121:(e,t,s)=>{s.d(t,{openPostPrivacyModal:()=>d});var n=s(434788),r=s(785893),i=s(234275),o=s(166472),a=s(359639);const d=(e,t="",s=0)=>{const d=[o.PRIVACY_MODAL_MODES.CHOOSE_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.CREATE_POST_FOR_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_BEST_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_BEST_FRIENDS_EMPTY].includes(e),l=[o.PRIVACY_MODAL_MODES.CREATE_POST_FOR_FRIENDS,o.PRIVACY_MODAL_MODES.OWN_POST_FOR_FRIENDS].includes(e);d?(0,i.sendBestFriendsAnalytic)(i.BestFriendsEventType.clickToLockBestFriends):l?(0,i.sendBestFriendsAnalytic)(i.BestFriendsEventType.clickToLockFriends):e===o.PRIVACY_MODAL_MODES.BEST_FRIENDS_ENTRYPOINT&&(0,i.sendBestFriendsAnalytic)(i.BestFriendsEventType.clickToBestFriendsEntrypoint),(0,a.showMessageBoxModal)((i=>(0,r.jsx)(o.PrivacyModal,(0,n._)({},i,{mode:e,name:t,sex:s}))),{width:450})}}},a={};function d(e){var t=a[e];if(void 0!==t)return t.exports;var s=a[e]={exports:{}};return o[e].call(s.exports,s,s.exports,d),s.exports}d.m=o,d.amdO={},e=[],d.O=(t,s,n,r)=>{if(!s){var i=1/0;for(_=0;_<e.length;_++){for(var[s,n,r]=e[_],o=!0,a=0;a<s.length;a++)(!1&r||i>=r)&&Object.keys(d.O).every((e=>d.O[e](s[a])))?s.splice(a--,1):(o=!1,r<i&&(i=r));if(o){e.splice(_--,1);var l=n();void 0!==l&&(t=l)}}return t}r=r||0;for(var _=e.length;_>0&&e[_-1][2]>r;_--)e[_]=e[_-1];e[_]=[s,n,r]},d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var r=Object.create(null);d.r(r);var i={};t=t||[null,s({}),s([]),s(s)];for(var o=2&n&&e;"object"==typeof o&&!~t.indexOf(o);o=s(o))Object.getOwnPropertyNames(o).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,d.d(r,i),r},d.d=(e,t)=>{for(var s in t)d.o(t,s)&&!d.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce(((t,s)=>(d.f[s](e,t),t)),[])),d.u=e=>25394===e?"AudioLongtapModal.98b6df61d646414354a3.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.b73d1f0a03f70163e02d.js":96816===e?"web-audio-lyrics-modal.5b786d2492e85e4a335f.js":9375===e?"voice_message_player.f0c31b4a3dc08de145c9.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.6cf18c53f58f775934b3.js":28872===e?"feed-client-nav-skeleton.a30e12215b3ca16e7fe2.js":35953===e?"feed-client-nav-async-right-block.d1fcdf48d7fa743442bf.js":29019===e?"ReportForm.32750ffa82cf4b752bef.js":51162===e?"StickersKit.7b7673c72a73454cf039.js":55489===e?"lottie-light.511c5814b6f1077825b7.js":77806===e?"apps_attach_modal.2342444ca159e39f3319.js":59240===e?"performance-stats.59c5c96e7372abb54c8c.js":38288===e?"lottie.5e4758c39f106eab733a.js":void 0,d.miniCssF=e=>e+"."+{25394:"6af57e1b0cf5a74f9a87",29019:"9d48306224b1e9bf8983",57468:"35be3dfa1e90e3cdd0a1",75980:"5bbee2c9f3e189193a73",77806:"7f5114a79d806ae5770d"}[e]+".css",d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},d.l=(e,t,s,r)=>{if(n[e])n[e].push(t);else{var i,o;if(void 0!==s)for(var a=document.getElementsByTagName("script"),l=0;l<a.length;l++){var _=a[l];if(_.getAttribute("src")==e||_.getAttribute("data-webpack")=="vk:"+s){i=_;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,d.nc&&i.setAttribute("nonce",d.nc),i.setAttribute("data-webpack","vk:"+s),i.src=e),n[e]=[t];var c=(t,s)=>{i.onerror=i.onload=null,clearTimeout(g);var r=n[e];if(delete n[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(s))),t)return t(s)},g=setTimeout(c.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=c.bind(null,i.onerror),i.onload=c.bind(null,i.onload),o&&document.head.appendChild(i)}},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="/dist/",r=e=>new Promise(((t,s)=>{var n=d.miniCssF(e),r=d.p+n;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var r=(o=s[n]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){var o;if((r=(o=i[n]).getAttribute("data-href"))===e||r===t)return o}})(n,r))return t();((e,t,s,n)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=i=>{if(r.onerror=r.onload=null,"load"===i.type)s();else{var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.href||t,d=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");d.code="CSS_CHUNK_LOAD_FAILED",d.type=o,d.request=a,r.parentNode.removeChild(r),n(d)}},r.href=t,document.head.appendChild(r)})(e,r,t,s)})),i={2884:0},d.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{25394:1,29019:1,57468:1,75980:1,77806:1}[e]&&t.push(i[e]=r(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{var e={2884:0};d.f.j=(t,s)=>{var n=d.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var r=new Promise(((s,r)=>n=e[t]=[s,r]));s.push(n[2]=r);var i=d.p+d.u(t),o=new Error;d.l(i,(s=>{if(d.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,n[1](o)}}),"chunk-"+t,t)}},d.O.j=t=>0===e[t];var t=(t,s)=>{var n,r,[i,o,a]=s,l=0;if(i.some((t=>0!==e[t]))){for(n in o)d.o(o,n)&&(d.m[n]=o[n]);if(a)var _=a(d)}for(t&&t(s);l<i.length;l++)r=i[l],d.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return d.O(_)},s=self.webpackChunkvk=self.webpackChunkvk||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var l=d.O(void 0,[75514,98066,56990,24509,76400,40885,68592,1895,67723,21370,64892,18816,39211,41140],(()=>d(861690)));l=d.O(l)})();