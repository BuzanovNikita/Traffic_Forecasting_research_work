(()=>{var e,t,n,o,i,r,a={428817:e=>{e.exports={reactions_preview_item:'<div class="ReactionsPreviewItem ReactionsPreviewItem--stackOverlay %class%" style="background-image: url(\'%image_url%\');" aria-label="%title%"></div>'}},58255:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var o=n(111132);function i(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,n)=>{"use strict";function o(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>o})},374277:(e,t,n)=>{"use strict";function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function i(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=o(e.className,t):e.setAttribute("class",o(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>i})},376125:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});const o={root:"BadgesEntrypoint-module__root--irU6C",separatorWrapper:"BadgesEntrypoint-module__separatorWrapper--YS6lL",separator:"BadgesEntrypoint-module__separator--oIIFM"}},429697:(e,t,n)=>{"use strict";n.d(t,{default:()=>v});var o=n(487462),i=n(263366),r=n(894578),a=n(58255),s=n(374277),c=n(667294),l=n(696630),u=n(559391),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},p=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1];t.removeClasses(i,"exit"),t.addClass(i,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1]?"appear":"enter";t.addClass(i,r,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1]?"appear":"enter";t.removeClasses(i,r),t.addClass(i,r,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,o="string"==typeof n,i=o?""+(o&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:o?i+"-active":n[e+"Active"],doneClassName:o?i+"-done":n[e+"Done"]}},t}(0,r.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var o=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(o+=" "+i),"active"===n&&e&&(0,u.forceReflow)(e),o&&(this.appliedClasses[t][n]=o,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))}(e,o))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],o=n.base,i=n.active,r=n.done;this.appliedClasses[t]={},o&&d(e,o),i&&d(e,i),r&&d(e,r)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.default)(e,["classNames"]));return c.createElement(l.default,(0,o.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.Component);p.defaultProps={classNames:""},p.propTypes={};const v=p},696630:(e,t,n)=>{"use strict";n.d(t,{default:()=>b});var o=n(263366),i=n(894578),r=n(667294),a=n(973935),s=n(806035),c=n(500220),l=n(559391),u="unmounted",d="exited",p="entering",v="entered",f="exiting",m=function(e){function t(t,n){var o;o=e.call(this,t,n)||this;var i,r=n&&!n.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?r?(i=d,o.appearStatus=p):i=v:i=t.unmountOnExit||t.mountOnEnter?u:d,o.state={status:i},o.nextCallback=null,o}(0,i.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==v&&(t=p):n!==p&&n!==v||(t=f)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,o=this.props.timeout;return e=t=n=o,null!=o&&"number"!=typeof o&&(e=o.exit,t=o.enter,n=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===p){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&(0,l.forceReflow)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:u})},n.performEnter=function(e){var t=this,n=this.props.enter,o=this.context?this.context.isMounting:e,i=this.props.nodeRef?[o]:[a.findDOMNode(this),o],r=i[0],c=i[1],l=this.getTimeouts(),u=o?l.appear:l.enter;!e&&!n||s.default.disabled?this.safeSetState({status:v},(function(){t.props.onEntered(r)})):(this.props.onEnter(r,c),this.safeSetState({status:p},(function(){t.props.onEntering(r,c),t.onTransitionEnd(u,(function(){t.safeSetState({status:v},(function(){t.props.onEntered(r,c)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!s.default.disabled?(this.props.onExit(o),this.safeSetState({status:f},(function(){e.props.onExiting(o),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(o)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(o)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),o=null==e&&!this.props.addEndListener;if(n&&!o){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],r=i[0],s=i[1];this.props.addEndListener(r,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,o.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(c.default.Provider,{value:null},"function"==typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function g(){}m.contextType=c.default,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g},m.UNMOUNTED=u,m.EXITED=d,m.ENTERING=p,m.ENTERED=v,m.EXITING=f;const b=m},500220:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});const o=n(667294).createContext(null)},806035:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});const o={disabled:!1}},559391:(e,t,n)=>{"use strict";n.d(t,{forceReflow:()=>o});var o=function(e){return e.scrollTop}},580301:(e,t,n)=>{"use strict";n.d(t,{useEventListenerOnRef:()=>i});var o=n(667294);const i=(e,t,n)=>{(0,o.useLayoutEffect)((()=>{const{current:o}=e;if(o)return o.addEventListener(t,n,{passive:!0}),()=>{o.removeEventListener(t,n)}}),[e.current])}},799695:(e,t,n)=>{"use strict";n.d(t,{useOnClickOutside:()=>i});var o=n(667294);const i=(e,t)=>{(0,o.useEffect)((()=>{const n=n=>{!e.current||n.target instanceof Node&&e.current.contains(n.target)||t(n)};return document.addEventListener("mousedown",n,{passive:!0}),document.addEventListener("touchstart",n,{passive:!0}),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}},828109:(e,t,n)=>{"use strict";n.d(t,{preservePositionBetween:()=>r});var o=n(75272),i=n(659397);function r(e,{scrollByImpl:t=window.scrollBy}={}){let n=e;return{start:(0,i.once)((function(e){e&&(n=e);const r=(0,o.getElementOffset)(n);return(0,i.once)((function(e){if(e&&(n=e),n.isConnected){const e=(0,o.getElementOffset)(n);t(0,e.top-r.top)}}))}))}}},143790:(e,t,n)=>{"use strict";n.d(t,{animationModuleLoaderAsync:()=>s,destroyAnimationItem:()=>a,getAnimationAsync:()=>i,onAnimationReady:()=>r});var o=n(434788);const i=({animationDataGet:e,animationDataSet:t,animationModuleLoader:n})=>(...o)=>n().then((({loadAnimation:n})=>(({animationDataGet:e,animationDataSet:t,loadAnimation:n})=>(o,i,r)=>{var a;const s=o,c=e?e({animationId:s}):void 0,l=n({animationData:c,animationURL:o,container:i,loadAnimationParams:null==(a=r)?void 0:a.loadAnimationParams});return!c&&t&&function(e,t){e.addEventListener("data_ready",(()=>{t(e.animationData)}))}(l,(e=>{t({animationId:s,loadedAnimationData:e})})),l})({animationDataGet:e,animationDataSet:t,loadAnimation:n})(...o)));function r(e,t){e.isLoaded?t():e.addEventListener("DOMLoaded",(()=>{t()}))}function a(e){const t=function(e){return!e._cbs}(e);t||e.destroy()}const s=()=>Promise.all([n.e(38288),n.e(55489)]).then(n.bind(n,682832)).then((e=>{return{loadAnimation:(t=e.lottie,({animationData:e,animationURL:n,container:i,loadAnimationParams:r={}})=>{var a,s;const c=e?{animationData:e}:{path:n};var l,u;const d={renderer:"svg",autoplay:null!=(l=null==(a=r)?void 0:a.autoplay)&&l,loop:null==(u=null==(s=r)?void 0:s.loop)||u,rendererSettings:{progressiveLoad:!0}},p=(0,o._)({},c,d,{container:i});return t.loadAnimation(p)})};var t}))},59985:(e,t,n)=>{"use strict";n.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>o,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>u,REACTION_ID_DEFAULT:()=>r,REACTION_ID_MAX:()=>a,REACTION_ID_MIN:()=>s,REACTION_ID_UNSET:()=>c,REACTION_SET_ITEMS_MIN_COUNT:()=>l,SHOW_TOOLTIP_TIMEOUT:()=>i});const o=600,i=140,r=0,a=7,s=0,c=void 0,l=2,u=r},419328:(e,t,n)=>{"use strict";n.d(t,{makePendingRequestState:()=>o});const o=(e={})=>{const t=Object.create(null);return{cancel:e=>{var n;null==(n=t[e])||n.abort(),delete t[e]},register:(n,o)=>{var i;const r=t[n],a=(e=>{var n;return void 0!==(null==(n=t[e])?void 0:n.throttleTimerId)})(n);if(r){if(a)return!1;console.warn(`Reactions pending request for key '${n}' wasn't unregistered, but has to be overwritten.\nPending request should be cancelled through .cancel() explicitly before .register()`),r.abort()}let s;t[n]={abort:o},void 0!==(null==(i=e)?void 0:i.throttleMs)&&(s=((e,n)=>{const o=t[e];if(!o)return;o.throttleTimerId&&window.clearTimeout(o.throttleTimerId);const i=window.setTimeout((()=>{const n=t[e];n&&(n.throttleTimerId=void 0)}),n);return o.throttleTimerId=i,i})(n,e.throttleMs));return()=>{var e;(null==(e=t[n])?void 0:e.abort)===o&&delete t[n],window.clearTimeout(s)}}}}},457972:(e,t,n)=>{"use strict";n.d(t,{isDebugEnabled:()=>r});var o=n(531730);let i;const r=()=>(void 0!==i||(i=!!o.ls.get("reactions.debug_enabled")),i)},192441:(e,t,n)=>{"use strict";n.d(t,{reactionCountsBrandUnwrap:()=>i,reactionCountsBrandWrap:()=>r});var o=n(640971);const i=e=>(0,o.unwrap)(e),r=e=>(0,o.wrap)(e)},698216:(e,t,n)=>{"use strict";n.d(t,{reactionLogError:()=>r});var o=n(970978);const i="reactions";function r({error:e,reportError:t=!1}){t&&(0,o.logError)(e,{environment:i}),console.error(e)}},822715:(e,t,n)=>{"use strict";n.d(t,{areCountersEqual:()=>I,calcCounters:()=>_,calcCountersSum:()=>h,calcCountersWeightedSum:()=>y,counterForReactionId:()=>S,getDefaultReaction:()=>l,getDefaultReactionTitle:()=>u,getReaction:()=>c,hasReactionsForCounts:()=>C,isReactionIdSet:()=>v,isReactionIdUnset:()=>f,isUnknownObject:()=>s,isValidReactionId:()=>m,parseReactionId:()=>g,parseReactionIdOrUnset:()=>b,parseReactionMenuConfig:()=>R,prepareReactionMenuSet:()=>p,validateReactionSetPayloaditems:()=>E});var o=n(59985),i=n(192441),r=n(659397);const a=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),s=e=>null!==e&&"object"==typeof e,c=(e,t)=>e.itemsById[t],l=e=>c(e,o.REACTION_ID_DEFAULT),u=e=>{var t;return null==(t=l(e))?void 0:t.title},d=(e,t)=>0===e.length?"":((e,t,n=!0)=>e.reduce(((e,o)=>{const i=t(o),r=t(e);return r===i?n?e:o:r<i?e:o})))(e,(e=>Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)),!1).url,p=(e,t,n)=>{const o=t.map((({asset:e,color_sets:t,id:o,score:i,title:r})=>{var a,s;return{animationURL:e.animation_url||void 0,backgroundColor:null==(a=t)?void 0:a.background,id:o,imageMenuURL:d(e.images,n.imageMenuSize),imagePreviewURL:"imagePreviewSize"in n?d(e.images,n.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in n?d(e.images,n.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in n?d(e.images,n.imageStoryPreviewSize):void 0,score:i,title:r,titleColor:null==(s=t)?void 0:s.foreground}})),i={};return o.forEach((e=>{i[e.id]=e})),{id:e,items:o,itemsById:i}},v=e=>e!==o.REACTION_ID_UNSET,f=e=>e===o.REACTION_ID_UNSET,m=e=>a(e)&&e>=o.REACTION_ID_MIN&&e<=o.REACTION_ID_MAX,g=e=>{const t=parseInt(e,10);return m(t)?{isValid:!0,value:t}:{isValid:!1}},b=e=>{const t=g(e);return t.isValid?t.value:o.REACTION_ID_UNSET},E=(e,t)=>{if(e.length<o.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error(`Invalid reactions items count in set '${t}': ${e.length}`)}},R=e=>{if(!s(e))return;const t={},{animationShowStaticAfterEnd:n,menuShowDelay:i,openedDefaultReactionId:r,reportJsErrors:a}=e;return"number"!=typeof i&&void 0!==i||(t.menuShowDelay=i),"boolean"==typeof n&&(t.animationShowStaticAfterEnd=n),"boolean"==typeof a&&(t.reportJsErrors=a),"number"==typeof r||null===r?null===r?t.openedDefaultReactionId=void 0:m(r)&&(t.openedDefaultReactionId=r):t.openedDefaultReactionId=o.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t},_=(e,t)=>{const n=(0,i.reactionCountsBrandWrap)({});return Object.entries((0,i.reactionCountsBrandUnwrap)(e)).forEach((([e,o])=>{var i,r,a;const s=e;var c;const l=null!=(c=null==(a=t)||null==(r=a.itemsById)||null==(i=r[s])?void 0:i.score)?c:1;n[s]=l*(o||0)})),n},h=e=>Object.values((0,i.reactionCountsBrandUnwrap)(e)).reduce(((e,t)=>e+(t||0)),0),y=e=>h((0,i.reactionCountsBrandWrap)(e)),C=e=>h(e)>0;var w;const S=(e,t)=>null!=(w=e[t])?w:void 0,I=(e,t)=>e&&t?(0,r.isEqual)(e,t):e===t},640971:(e,t,n)=>{"use strict";n.d(t,{unwrap:()=>o,wrap:()=>i});const o=e=>e,i=e=>e},216833:(e,t,n)=>{"use strict";n.d(t,{isBadgesEnabled:()=>r,isBadgesRenderingEnabled:()=>a});var o,i=n(839470);!function(e){e.BADGES="badges",e.BADGES_RENDERING="badges_rendering",e.DONUT_ONE_TIME="donut_one_time_payments_users"}(o||(o={}));const r=()=>(0,i.partConfigEnabled)("badges"),a=()=>(0,i.partConfigEnabled)("badges_rendering")},849307:(e,t,n)=>{"use strict";var o,i,r,a=n(412818);(null==(i=window.vk)||null==(o=i.pe)?void 0:o.static_manager_dynamic_imports)&&(null==(r=window.vk)?void 0:r.stDomain)&&(n.p=window.vk.stDomain+"/dist/"),window.Reactions=a.ReactionsEntryGlobal,(0,a.init)();try{window.stManager.done(window.jsc("web/reactions.js"))}catch(e){}},508087:(e,t,n)=>{"use strict";n.d(t,{stripPercentVars:()=>o});const o=e=>e.replace(/%[-\w]+%/g,"")},693982:(e,t,n)=>{"use strict";function o(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,n,o]=t;return{objectType:n,objectId:o}}n.d(t,{getElementLikeButtonCount:()=>s,getElementLikeButtonIcon:()=>l,getElementLikeButtonLabel:()=>d,likePostObjectId:()=>i,likeReplyObjectId:()=>r,parseLikeObjectId:()=>o});const i=e=>`wall${e}`,r=e=>`wall_reply${e}`;var a;const s=e=>{var t;return null!=(a=null==(t=e)?void 0:t.querySelector(".like_button_count, ._like_button_count"))?a:void 0};var c;const l=e=>{var t;return null!=(c=null==(t=e)?void 0:t.querySelector(".like_button_icon, ._like_button_icon"))?c:void 0};var u;const d=e=>null!=(u=e.querySelector(".like_button_label, ._like_button_label"))?u:void 0},424952:(e,t,n)=>{"use strict";n.d(t,{BadgesEntrypointSkeleton:()=>a});var o=n(785893),i=n(444972),r=n(238071);const a=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Separator,{}),(0,o.jsx)(i.Skeleton,{circle:!0,width:36,height:36})]})},238071:(e,t,n)=>{"use strict";n.d(t,{Separator:()=>r});var o=n(785893),i=n(376125);const r=()=>(0,o.jsx)("div",{className:i.default.separatorWrapper,children:(0,o.jsx)("div",{className:i.default.separator})})},409549:(e,t,n)=>{"use strict";n.d(t,{LazyBadgesEntryPoint:()=>l});var o=n(434788),i=n(785893),r=n(667294),a=n(895145),s=n(424952);const c=(0,a.asyncComponent)((()=>Promise.all([n.e(98066),n.e(24509),n.e(13492),n.e(65040),n.e(68602),n.e(31902)]).then(n.bind(n,620209))),(({BadgesEntrypoint:e})=>e)),l=e=>(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)(s.BadgesEntrypointSkeleton,{}),children:(0,i.jsx)(c,(0,o._)({},e))})},135683:(e,t,n)=>{"use strict";n.d(t,{ATTR_USER_REACTION_ID:()=>o});const o="data-reaction-user-reaction-id"},299156:(e,t,n)=>{"use strict";n.d(t,{getLastOwnReactionChangeTime:()=>I,setDataCurrentId:()=>P,updateReactionButtonContainerForCounts:()=>C,updateReactionButtonCounts:()=>S,updateReactionButtonForCurrentReaction:()=>w});var o=n(11010),i=n(434788),r=n(664988),a=(n(75272),n(29271)),s=n(143790),c=n(457972),l=n(822715),u=n(795558),d=n(893106),p=n(135683),v=n(666734),f=n(775060),m=n(577698),g=n(908088);const b="data-reaction-last-own-change-time",E="PostButtonReactions__icon--animationActive";const R=e=>{var t;const n=null==(t=e.__reactionIconAnimation)?void 0:t.animationItem;if(n){!n._cbs||n.destroy(),delete e.__reactionIconAnimation}},_=(0,o._)((function*(e,t,n,o){var i;if(!(e!==(null==(i=n.__reactionIconAnimation)?void 0:i.animationURL))&&e||(R(n),t.innerHTML="",n.classList.remove(E)),!o||!e)return;const r=yield(0,v.getAnimationAsync)(e,t,{loadAnimationParams:{autoplay:!0,loop:!1}});(0,s.onAnimationReady)(r,(()=>{n.classList.add(E)}));r.addEventListener("complete",(()=>{var e;!0===(null==(e=(0,g.getReactionConfig)())?void 0:e.animationShowStaticAfterEnd)&&(n.classList.remove(E),R(n))})),n.__reactionIconAnimation={animationItem:r,animationURL:e}})),h=(e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-icon"]');if(!n)return;const{currentOption:o,isUserAction:i}=t;if(o.isReactionSet){var r,a;const e=o.current,t=null==(r=e)?void 0:r.imageMenuURL;n.style.backgroundImage=`url('${t}')`,n.setAttribute("aria-label",null==(a=e)?void 0:a.title)}else{var s;const e=o.default;var c;if(n.style.backgroundImage="",null==(s=e)?void 0:s.title)n.setAttribute("aria-label",null==(c=e)?void 0:c.title)}n.classList.toggle("PostButtonReactions__icon--custom",o.isReactionSet);{const e=o.isReactionSet?o.current.animationURL:void 0,t=(e=>{let t=e.querySelector(".PostButtonReactions__iconAnimation");return t||(t=(0,u.se)('<div class="PostButtonReactions__iconAnimation" data-section-ref="reactions-button-icon-animation"></div>'),e.appendChild(t),t)})(n);_(e,t,n,i)}},y=(e,t,n)=>{e.classList.toggle("PostButtonReactions--icon-active",t),e.classList.toggle("PostButtonReactions--active",t)},C=(e,t)=>{const n=!t||!(0,l.hasReactionsForCounts)(t);e.classList.toggle("PostBottomAction--empty",n)},w=(e,t,n,o)=>{const r=!(0,l.isReactionIdUnset)(t),s=((e,t)=>{let n,o=(0,l.getDefaultReaction)(e);if((0,l.isReactionIdUnset)(t)){if(o)return{isReactionSet:!1,default:o}}else{if(n=e.itemsById[t],n)return{isReactionSet:!0,current:n};console.error(new Error(`Missing reaction meta for ${t} in set '${e.id}'`))}return{_error:!0}})(n,t);"_error"in s||(h(e,{currentOption:s,isUserAction:o}),((e,t)=>{const{currentOption:n}=t,o=n.isReactionSet?n.current.titleColor:void 0,r=n.isReactionSet?n.current.backgroundColor:void 0,a=o?{"--reaction-button-title-color-light":o.light,"--reaction-button-title-color-dark":o.dark}:{"--reaction-button-title-color-light":null,"--reaction-button-title-color-dark":null},s=r?{"--reaction-button-background-color-light":r.light,"--reaction-button-background-color-dark":r.dark}:{"--reaction-button-background-color-light":null,"--reaction-button-background-color-dark":null},c=(0,i._)({},a,s);Object.entries(c).forEach((([t,n])=>{e.style.setProperty(t,n)}))})(e,{currentOption:s}),((e,t)=>{const{currentOption:n}=t;let o="";o=n.isReactionSet?(0,a.langReplace)(a.getLang("reactions_button_unset_reaction_title")||"",{reaction_name:n.current.title||""}):(0,a.langReplace)(a.getLang("reactions_button_set_reaction_with_name")||"",{reaction_name:n.default.title||""})||a.getLang("reactions_button_title")||"",e.setAttribute("aria-label",o||"")})(e,{currentOption:s}),(0,f.isCounterEnabledForBtn)(e)||((e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-title"]');if(!n)return;const{currentOption:o}=t,i=o.isReactionSet?o.current.title:o.default.title;i?n.innerText=i:(0,c.isDebugEnabled)()&&console.log("reactions: setReactionNameTitle: missing title",o)})(e,{currentOption:s})),y(e,r),o&&function(e,t){e.setAttribute(b,String(t))}(e,Date.now())},S=(e,t,n,o,i)=>{const r=(0,f.getCounterForTitle)(e,t,o,i);if((0,f.isCounterEnabled)(r)&&(((e,t)=>{const n=e.querySelector('[data-section-ref="reactions-button-title"]');if(!n)return;const{counterForTitle:o}=t;if((0,f.isCounterAvailable)(o)){const e=o.buttonText;(0,d.animateCount)(n,e,{allowZero:o.allowZeroAnimation,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})}else(0,c.isDebugEnabled)()&&console.log("reactions: setReactionTitle: missing title",o)})(e,{counterForTitle:r}),o)){((e,t)=>{var n;const o=null==(n=(0,m.getClosestLikeBtnContainerElem)(e))?void 0:n.querySelector('[data-section-ref="reactions-button-screen-reader-counter"]');if(!o)return;const i=(0,a.langNumeric)(t,a.getLang("reactions_n_reacted","raw")||"%s",!0);o.innerText=i})(e,(0,l.calcCountersSum)(o))}},I=e=>{const t=e.getAttribute(b);if(t&&(0,r.isNumeric)(t))try{return new Date(Number.parseInt(t)).getTime()||void 0}catch(e){return void console.error(e)}};const P=(e,t)=>{e.setAttribute(p.ATTR_USER_REACTION_ID,(0,l.isReactionIdUnset)(t)?"":String(t))}},536943:(e,t,n)=>{"use strict";n.d(t,{ReactionImage:()=>s});var o=n(785893),i=n(667294),r=n(396849),a=n(659397);const s=(0,i.forwardRef)((({animationURL:e,isPlaying:t,image:n,loadAnimationParams:s},c)=>{const l=(0,i.useRef)(null),{isAnimationReady:u}=(0,r.useReactionAnimation)({animationElem:l,animationURL:e,play:t,loadAnimationParams:s}),d=u&&t;return(0,o.jsx)("div",{className:"ReactionImage",style:{backgroundImage:!d&&n?`url(${n})`:void 0},ref:c,children:(0,o.jsx)("div",{className:(0,a.classNames)("ReactionImage__animationContainer",{"ReactionImage__animationContainer--hidden":!d}),ref:l})})}))},418559:(e,t,n)=>{"use strict";n.d(t,{PreloadImages:()=>r});var o=n(249823),i=n(667294);const r=(0,i.memo)((function({imageURLs:e}){return(0,i.useEffect)((()=>{Promise.all(e.map((e=>(0,o.preloadImage)(e)))).catch((()=>{}))}),[e]),null}))},858789:(e,t,n)=>{"use strict";n.d(t,{ReactedUsersStack:()=>s,stackConfigForVisibleCount:()=>c,userPhotoStub:()=>a});var o=n(785893),i=n(659397),r=n(82161);const a={kind:"stub"};function s({photos:e,size:t,totalCount:n,visibleCount:a}){const s=null!=n?n:e.length;let c=Math.min(e.length,a);s===c+1&&e.length>=c+1&&(c+=1);let l=Math.max(0,s-c),u=l>0;const d=e.slice(0,c),p=(0,r.formatCount)(l);return(0,o.jsx)("div",{className:(0,i.classNames)("ReactedUsersStack",`ReactedUsersStack--size-${t}`,{"ReactedUsersStack--others":u}),children:(0,o.jsxs)("div",{className:"ReactedUsersStack__photos",role:"presentation",children:[d.map(((e,t)=>function(e){return"profile"===e.kind}(e)?(0,o.jsx)("div",{className:"ReactedUsersStack__photo",role:"img",style:{backgroundImage:`url(${e.imageURL})`},title:e.title},t):function(e){return"stub"===e.kind}(e)?(0,o.jsx)("div",{role:"img",className:"ReactedUsersStack__photo ReactedUsersStack__photo--stub"},t):null)),u&&(0,o.jsx)("div",{className:"ReactedUsersStack__photo ReactedUsersStack__photo--others","aria-hidden":"true",dangerouslySetInnerHTML:{__html:`+${p}`}})]})})}function c(e){const t=e+1;return{maxStackItems:t,visibleCount:e,stubItemsForPhotos:e=>Math.min(e,t)}}},820161:(e,t,n)=>{"use strict";n.d(t,{Reaction:()=>l});var o=n(785893),i=n(953908),r=n(659397),a=n(249917),s=n(731262),c=n(536943);const l=({animationURL:e,image:t,isOpenedDefault:n,onMouseEnter:l,onReactionClick:u,reactionId:d,reactionTitle:p})=>{const v=(0,s.useReactedUsersConfig)(d),f=()=>{var e;null==(e=u)||e(d)};return(0,o.jsxs)("div",{className:(0,r.classNames)("Reaction",{"Reaction--openedDefault":n&&v.shouldShowReactedUsers}),onClick:e=>{f(),e.stopPropagation()},onKeyDown:e=>{[i.KEY.RETURN,i.KEY.SPACE].includes(e.keyCode)&&(f(),e.stopPropagation())},onMouseEnter:l,tabIndex:0,role:"button","aria-label":p||void 0,children:[(0,o.jsx)("div",{className:"Reaction__hoverArea"}),(0,o.jsx)("div",{className:"Reaction__title",children:(0,o.jsx)(a.ReactionTitle,{reactedUsersConfigResult:v,reactionId:d,title:p})}),(0,o.jsx)("div",{className:"Reaction__image",children:(0,o.jsx)(c.ReactionImage,{isPlaying:!0,image:t,animationURL:e})})]})}},282795:(e,t,n)=>{"use strict";n.d(t,{ReactionMenuTitleVariants:()=>r,TITLE_VARIANT_DEFAULT:()=>i,TitleVariantWithLikedUsers:()=>o});const o="WithLikedUsers",i=o,r=[o,"TitleOnly"]},249917:(e,t,n)=>{"use strict";n.d(t,{ReactionTitle:()=>s});var o=n(785893),i=n(667294),r=n(659397),a=n(763832);const s=({reactedUsersConfigResult:e,reactionId:t,title:n})=>{const s=(0,i.useRef)(null),{reactedUsersConfig:c,shouldShowReactedUsers:l}=e;return(0,o.jsxs)("div",{className:(0,r.classNames)("ReactionTitle",{"ReactionTitle--withUsers":l}),ref:s,children:[(0,o.jsx)("div",{className:"ReactionTitle__name",children:n}),(0,o.jsx)("div",{className:(0,r.classNames)({"ReactionTitle__reactedUsers--visible":l}),children:(0,o.jsx)(a.ReactionsMenuReactedUsersPreview,{parentClickContainerRef:s,reactedUsersConfig:c,reactionId:t})})]})}},674953:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenu:()=>v});var o=n(785893),i=n(667294),r=n(659397),a=n(953908),s=n(820161),c=n(921881),l=n(805827),u=n(32375),d=n(216833),p=n(409549);const v=(0,i.forwardRef)((function({close:e,currentReactionId:t,onReactionChoose:n,position:v=c.PopperVerticalPosition.TOP,reactionsOptions:f,onMouseEnter:m,onMouseLeave:g,badgesProps:b},E){var R;const _=(0,l.useReactionMenuConfig)(),h=v===c.PopperVerticalPosition.TOP?null==(R=_)?void 0:R.openedDefaultReactionId:void 0,[y,C]=(0,i.useState)(h),w=(0,i.useCallback)((t=>{var n;t.keyCode===a.KEY.ESC&&(null==(n=e)||n())}),[]),S=(0,i.useCallback)((()=>{C(void 0)}),[]);return(0,o.jsx)("div",{className:(0,r.classNames)("ReactionsMenu ReactionsMenu--extraHoverArea",{"ReactionsMenu--extraHoverAreaToTop":v===c.PopperVerticalPosition.TOP,"ReactionsMenu--extraHoverAreaToBottom":v===c.PopperVerticalPosition.BOTTOM}),onKeyDown:w,onMouseEnter:m,onMouseLeave:g,ref:E,children:(0,o.jsxs)("div",{className:"ReactionsMenu__inner",children:[f.items.map((e=>(0,o.jsx)(s.Reaction,{animationURL:e.animationURL,image:e.imageMenuURL,isOpenedDefault:e.id===y,isSelected:e.id===t,onMouseEnter:S,onReactionClick:n,reactionId:e.id,reactionTitle:e.title},e.id))),(0,d.isBadgesEnabled)()&&(0,u.verifyPayloadForBadges)(b)&&(0,o.jsx)(p.LazyBadgesEntryPoint,{onClick:e,badgesProps:b})]})})}))},40165:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuContextProvider:()=>l,useReactionsMenuContext:()=>c});var o=n(434788),i=n(785893),r=n(667294),a=n(921414);const s=(0,r.createContext)({currentReactionId:void 0,likeObjectId:void 0,reactedUsers:a.REMOTE_RESOURCE_STATE_CONTEXT_STUB,reactedUsersCounts:void 0,titleVariant:void 0,triggerClose:()=>{}}),c=()=>(0,r.useContext)(s),l=({value:e,children:t})=>{const n=(0,a.useRemoteResource)();return(0,i.jsx)(s.Provider,{value:(0,o._)({},e,{reactedUsers:n}),children:t})}},763832:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuReactedUsersPreview:()=>d});var o=n(785893),i=n(667294),r=n(198508),a=n(858789),s=n(40165),c=n(580301),l=n(731262);const u="s";function d({parentClickContainerRef:e,reactionId:t,reactedUsersConfig:n}){const{likeObjectId:d,triggerClose:p}=(0,s.useReactionsMenuContext)(),v=(0,i.useCallback)((function(e){var o;if(e.stopPropagation(),!d)throw new Error("ReactionTitle: unable to open reacted modal, missing object id");(null==(o=n)?void 0:o.hasSomeReactions)&&(p(),(0,r.showReactedModal)(t,d))}),[]);return(0,c.useEventListenerOnRef)(e,"click",v),(0,o.jsx)("div",{className:"ReactionsMenuReactedUsersPreview",children:n&&n.userPhotos?(0,o.jsx)(a.ReactedUsersStack,{visibleCount:l.visibleCount,totalCount:n.totalPhotosCount,photos:n.userPhotos,size:u}):null})}},976873:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuStateContainer:()=>r});var o=n(785893),i=n(40165);const r=({children:e,contextValue:t})=>(0,o.jsx)(i.ReactionsMenuContextProvider,{value:t,children:e})},705967:(e,t,n)=>{"use strict";n.d(t,{getUsersForReactionId:()=>i,isTitleVariantWithUsers:()=>r});var o=n(282795);function i(e,t){var n;const o=null==(n=e.byReactionId)?void 0:n[t];if(void 0!==o)return o}function r(e){return e===o.TitleVariantWithLikedUsers}},731262:(e,t,n)=>{"use strict";n.d(t,{useReactedUsersConfig:()=>d,visibleCount:()=>u});var o=n(40165),i=n(858789),r=n(880549),a=n(282795),s=n(705967),c=n(822715);const{stubItemsForPhotos:l,visibleCount:u}=(0,i.stackConfigForVisibleCount)(3);function d(e){var t;const{currentReactionId:n,reactedUsers:{valueMaybeStale:u}}=(0,o.useReactionsMenuContext)(),d=function(e){const{titleVariant:t=a.TITLE_VARIANT_DEFAULT,reactedUsers:{valueMaybeStale:n},reactedUsersCounts:i}=(0,o.useReactionsMenuContext)();if(!(0,s.isTitleVariantWithUsers)(t))return;return function(e,t,n){const o=t?(0,s.getUsersForReactionId)(t,e):void 0;if(o)return{kind:"reacted_users",reactedUsersForReaction:o};const i=n?(0,c.counterForReactionId)(n,e):void 0;if(i&&i>0)return{kind:"count_only_stub",counter:i};return}(e,n,i)}(e);let v,f;if(d&&"reacted_users"===d.kind&&d.reactedUsersForReaction.users){var m;let{reactedUsersForReaction:{users:t=[],totalCount:o}}=d;const i=(0,r.withCurrentUser)(t,o,e,n,null==(m=u)?void 0:m.currentUser);o=i.totalCount,t=i.users,f=null!=o?o:t.length,v=t.map(p)}else if(d&&function(e){return"count_only_stub"===e.kind}(d)){var g;let t=d.counter;const o=(0,r.withCurrentUser)([],t,e,n,null==(g=u)?void 0:g.currentUser);t=o.totalCount;const a=o.users;t&&(f=t,v=[...a.map(p),...Array.from({length:l(t)},(()=>i.userPhotoStub))])}else{var b;const t=(0,r.withCurrentUserAddedOnly)(e,n,null==(b=u)?void 0:b.currentUser);f=t.totalCount,v=t.users.map(p)}var E;f=null!=(E=null!=f?f:null==(t=v)?void 0:t.length)?E:0;const R=Boolean(f&&f>0);return R?{shouldShowReactedUsers:!0,reactedUsersConfig:{hasSomeReactions:R,totalPhotosCount:f,userPhotos:v}}:{shouldShowReactedUsers:!1,reactedUsersConfig:void 0}}function p(e){return{kind:"profile",imageURL:e.ownerImageURL,title:e.ownerName}}},880549:(e,t,n)=>{"use strict";n.d(t,{useReactedUsersPreview:()=>v,withCurrentUser:()=>g,withCurrentUserAddedOnly:()=>b});var o=n(11010),i=n(434788),r=n(822715),a=n(647434),s=n(512637),c=n(705967),l=n(40165),u=n(851793),d=n(667294),p=n(991059);function v({attemptRefetch:e}){const{likeObjectId:t,titleVariant:n,reactedUsers:i}=(0,l.useReactionsMenuContext)(),{counts:r}=(0,u.useReactionsGlobalStateForObject)(t,{payloadIsSuitable:f}),[p,v]=(0,d.useState)(!1);(0,d.useEffect)((()=>{r&&v(!0)}),[r]),(0,d.useEffect)((()=>{if(!t||!(0,c.isTitleVariantWithUsers)(n))return;function r(){return(r=(0,o._)((function*(){if(!t)return;p&&v(!1),i.setLoading(!0);const e=(0,a.requestGetReacted)(t);try{const t=function(e){const{reactedMenuStats:t}=e;if(!t)return;let n;const{byReactionId:o}=t;if(o){n={};for(const[e,t]of Object.entries(o)){var i,r,a;n[e]={totalCount:null!=(r=t.totalCount)?r:void 0,users:null!=(a=null==(i=t.users)?void 0:i.map((e=>m(e))))?a:void 0}}}const s=t.currentUser?m(t.currentUser):t.currentUser;return{byReactionId:n,currentUser:s}}(yield e.promise);if(!t){const e=new Error("useReactedUsersTooltip: failed to transform response");return(0,s.isDebugEnabled)()&&console.error(e),void i.setFailed(e)}i.setLoaded(t)}catch(e){i.setFailed(e)}}))).apply(this,arguments)}e&&("initial"===i.resource.kind||"loading"!==i.resource.kind&&p)&&function(){r.apply(this,arguments)}()}),[n,t,p,e])}function f(e){return"counts_only"===e.kind||!0===e.isQueueUpdate}function m(e){return(0,i._)({},e,{ownerName:e.ownerName?(0,p.stringWithHTMLEntitiesDecode)(e.ownerName):void 0})}function g(e,t,n,o,i){const a=null!=t?t:0,s=window.vk.id;if((0,r.isReactionIdSet)(o)&&o===n&&i){var c;const t=function(e,t,n,o,i){if(!i)return;const{ownerImageURL:r,ownerName:a}=i;if(!r)return;if(n.find((t=>t.ownerId===e)))return;return{currentUser:{ownerId:e,ownerImageURL:r,ownerName:a},totalCount:o+1}}(s,0,e,a,i);if(null==(c=t)?void 0:c.currentUser){const n={ownerId:t.currentUser.ownerId,ownerImageURL:t.currentUser.ownerImageURL,ownerName:t.currentUser.ownerName};return{totalCount:t.totalCount,users:[n].concat(e||[])}}}else if((0,r.isReactionIdUnset)(o)||o!==n){const t=function(e,t,n,o){const i=n&&n.filter((t=>t.ownerId!==e)),r=i&&n&&i.length<n.length;if(r)return{totalCount:r?o-1:o,users:i}}(s,0,e,a);if(t)return{totalCount:t.totalCount,users:t.users}}return{totalCount:a,users:e}}function b(e,t,n){return g([],0,e,t,n)}},396849:(e,t,n)=>{"use strict";n.d(t,{useReactionAnimation:()=>c});var o=n(11010),i=n(434788),r=n(667294),a=n(666734),s=n(143790);const c=({animationElem:e,animationURL:t,play:n=!0,loadAnimationParams:c})=>{const l=(0,r.useRef)(null),[u,d]=(0,r.useState)((()=>t&&(0,a.animationItemHasData)(t)));return(0,r.useEffect)((()=>{if(!t)return void(l.current=null);if(!e.current)return void console.error(new Error("Missing animation container"));let n=()=>{};return(0,o._)((function*(){e.current&&(l.current=yield(0,a.getAnimationAsync)(t,e.current,{loadAnimationParams:(0,i._)({autoplay:!0},c)}),n=()=>{d(!0)},(0,s.onAnimationReady)(l.current,n))}))(),()=>{var e,t;!l.current||!l.current._cbs||(null==(e=l.current)||e.removeEventListener("DOMLoaded",n),null==(t=l.current)||t.destroy());d(!1),l.current=null}}),[t,e]),(0,r.useEffect)((()=>{var e,t;u&&(n?null==(e=l.current)||e.play():null==(t=l.current)||t.stop())}),[n,u]),{isAnimationReady:u}}},445031:(e,t,n)=>{"use strict";n.d(t,{useReactionMenuSet:()=>r});var o=n(667294),i=n(908088);const r=e=>(0,o.useMemo)((()=>(0,i.getReactionSet)(e)),[e])},851793:(e,t,n)=>{"use strict";n.d(t,{useReactionsGlobalStateForObject:()=>c,useReactionsGlobalUpdateEventsForObject:()=>l});var o=n(667294),i=n(822715),r=n(505426),a=n(693982),s=n(249823);function c(e,{payloadIsSuitable:t}={}){const[n,r]=(0,o.useState)(void 0),a=(0,s.usePreviousRef)(n);return l(e,(0,o.useCallback)((function(e){var n;t&&!t(e)||e.counts&&!(0,i.areCountersEqual)(e.counts,null!=(n=a.current)?n:void 0)&&r(e.counts)}),[e])),{counts:n}}function l(e,t){!function({onAnyPostCountsAnyUpdate:e}){(0,o.useEffect)((()=>(0,r.registerNonGlobalNonUniqueListener)(r.WallDataEvents.post_reactions_counts_update,e)),[e])}({onAnyPostCountsAnyUpdate:(0,o.useCallback)((function(n){(0,a.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}},921414:(e,t,n)=>{"use strict";n.d(t,{REMOTE_RESOURCE_STATE_CONTEXT_STUB:()=>r,useRemoteResource:()=>c});var o=n(667294);const i={kind:"initial"},r={valueMaybeStale:void 0,value:void 0,reset:()=>{},setFailed:()=>{},setLoaded:()=>{},setLoading:()=>{},resource:i};function a(e){if("value"in e&&void 0!==e.value)return e.value}function s(e){const t=a(e);return void 0!==t?t:"staleValue"in e&&void 0!==e.staleValue?e.staleValue:void 0}function c(){const[e,t]=(0,o.useState)(i);return{valueMaybeStale:s(e),value:a(e),resource:e,setFailed:(0,o.useCallback)(((e,n=!1)=>{t((t=>({kind:"failed",error:e,staleValue:n?s(t):void 0})))}),[]),setLoaded:(0,o.useCallback)((e=>{t({kind:"loaded",value:e})}),[]),setLoading:(0,o.useCallback)(((e=!1)=>{t((t=>({kind:"loading",staleValue:e?s(t):void 0})))}),[]),reset:(0,o.useCallback)((()=>{t((()=>i))}),[])}}},753566:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuButton:()=>g});var o=n(785893),i=n(667294),r=n(512637),a=n(805827),s=n(123799),c=n(418559),l=n(655154),u=n(674953),d=n(445031),p=n(407089),v=n(577698),f=n(976873),m=n(32375);const g=({objectId:e,onReactionChoose:t,reactionButtonContainerElem:n,reactionHiddenButtonContainerElem:g,reactionIdInitial:b,reactionSetId:E,reactionsCounts:R,styleVariant:_,triggerMouseenterOnInitial:h,titleVariant:y})=>{var C,w;const{isAllowedReenter:S,tooltipVisibility:I,triggerClose:P}=(0,s.useTooltipVisibility)(),[k,T]=(0,i.useState)(b);(0,i.useEffect)((()=>{const t=[(0,l.addReactionChooseListener)(e,(()=>{P()})),(0,l.addDataUpdateListener)(e,(e=>{T(e.currentReactionId)}))];return()=>{t.forEach((e=>{e()}))}}),[]);const A=(0,d.useReactionMenuSet)(E),L=(0,a.useReactionMenuConfig)();var O;const U=(0,i.useMemo)((()=>{var e;return null!=(O=null==(e=A)?void 0:e.items.map((e=>e.imageMenuURL)))?O:[]}),[null==(C=A)?void 0:C.id]);(0,i.useEffect)((()=>{var e;A&&void 0!==k&&!(null==(e=A.items)?void 0:e.find((e=>e.id===k)))&&console.warn(`Current reaction ID ${k} is not found in set '${E}'`)}),[A]);if(!A)return console.warn(`ReactionsMenuButton init error, unavailable reaction set: ${E}`),null;const B={close:P,currentReactionId:k,onReactionChoose:e=>{(P(),e!==k)&&t(e)},reactionsOptions:A,badgesProps:(0,m.reactionsElemPayloadForBadges)(n)},M={currentReactionId:k,likeObjectId:e,reactedUsersCounts:R,titleVariant:y,triggerClose:P};return(0,o.jsxs)(f.ReactionsMenuStateContainer,{contextValue:M,children:[(0,o.jsx)(p.ReactionsMenuTooltip,{delayShow:null==(w=L)?void 0:w.menuShowDelay,getAttachElem:e=>{if(!e)return;const t=(0,v.getClosestLikeBtnContainerElem)(e);return t||(0,r.isDebugEnabled)()&&console.warn("ReactionsMenuButton missing attach target:",e),t},isAllowedReenter:S,popup:u.ReactionsMenu,popupProps:B,reactionButtonContainer:n,reactionHiddenButtonContainer:g,styleVariant:_,triggerMouseenterOnInitial:h,visibility:I}),(0,o.jsx)(c.PreloadImages,{imageURLs:U})]})}},407089:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuTooltip:()=>m});var o=n(434788),i=n(785893),r=n(667294),a=n(59985),s=n(880549),c=n(249823),l=n(310707),u=n(544311),d=n(123799),p=n(746257);const v=["--post-padding-lr"],f=()=>document.createElement("div"),m=({getAttachElem:e,initialIsOpen:t=!1,isAllowedReenter:n,reactionButtonContainer:m,reactionHiddenButtonContainer:g,popup:b,popupProps:E,delayHide:R=a.HIDE_TOOLTIP_TIMEOUT,delayShow:_=a.SHOW_TOOLTIP_TIMEOUT,onOpenStateChange:h,onPopperVisibilityChange:y,styleVariant:C,triggerMouseenterOnInitial:w=!0,visibility:S=d.TooltipVisibility.uncontrolled})=>{const I=void 0!==e,[P,k]=(0,r.useState)(t),T=S!==d.TooltipVisibility.uncontrolled,A=(0,c.usePrevious)(S),L=(0,r.useRef)(null),O=(0,r.useRef)(null),U=(0,r.useRef)(null);(0,s.useReactedUsersPreview)({attemptRefetch:P});const{style:B}=(0,p.useCSSVarsPropagation)({elementWithPropsRef:O,properties:v}),M=(0,r.useMemo)((()=>{var t;if(e)return e(null!=(t=U.current)?t:void 0)}),[e,U.current]),j=(0,r.useCallback)(((e,t)=>{!t&&T||k(e)}),[T]);(0,r.useEffect)((()=>{var e;null==(e=h)||e(P,U.current)}),[P]),(0,r.useEffect)((()=>{P&&n&&(n.current=d.IS_ALLOWED_REENTER_DEFAULT)}),[P]);const x=(0,u.useTooltipTrigger)({afterHide:j,afterShow:j,cancelCloseOnContentHover:n,delayHide:R,delayShow:_,ignoreMouseTriggers:T,popperPopupRef:L,reactionButtonContainer:m,reactionHiddenButtonContainer:g,triggerMouseenterOnInitial:w});return(0,r.useEffect)((()=>{if(T){const e=S===d.TooltipVisibility.opened;return e||x.cancelDelayedOpening(),void k(e)}P&&A===d.TooltipVisibility.opened&&k(!1)}),[S,T]),(0,i.jsx)(l.TransitionPopper,{attachTarget:M,isOpen:P,content:b,contentProps:(0,o._)({},E,x.contentProps),mode:"side",onPopperVisibilityChange:y,position:"t",popperContentStyle:B,popperPopupRef:L,ref:I?U:O,renderNodeFactory:f,styleVariant:C,children:(0,i.jsx)("div",{className:"ReactionsMenuButtonPopperReference"})})}},310707:(e,t,n)=>{"use strict";n.d(t,{TransitionPopper:()=>v});var o=n(434788),i=n(820224),r=n(785893),a=n(667294),s=n(659397),c=n(429697),l=n(515190),u=n(921881),d=n(814833);const p={appear:150,enter:150,exit:150},v=(0,a.forwardRef)((function(e,t){var{attachTarget:n,isOpen:v=!1,content:f,contentProps:m,onPopperVisibilityChange:g,popperContentStyle:b,popperPopupRef:E,styleVariant:R}=e,_=(0,i._)(e,["attachTarget","isOpen","content","contentProps","onPopperVisibilityChange","popperContentStyle","popperPopupRef","styleVariant"]);const{isVisible:h,onEnter:y,onHidden:C}=(e=>{const[t,n]=(0,a.useState)(!!e);return{isVisible:!!e||t,onEnter:(0,a.useCallback)((()=>{n(!0)}),[]),onHidden:(0,a.useCallback)((()=>{n(!1)}),[])}})(v),w=(0,a.useRef)(null),S=(0,d.useCombinedRefs)(t,w);var I;const P=(0,u.usePopperTopAutoPosition)(null!=(I=w.current)?I:void 0,146,h),k=(()=>{const e=(0,a.useRef)(!0);return(0,a.useEffect)((()=>{e.current=!1}),[]),e.current})();(0,a.useEffect)((()=>{var e;k||null==(e=g)||e(h)}),[h]);const T=(0,s.classNames)("ReactionsMenuPopper _ReactionsMenuPopperRoot",{"ReactionsMenuPopper--alignType-post":"post"===R,"ReactionsMenuPopper--popperBottom":P===u.PopperVerticalPosition.BOTTOM,"ReactionsMenuPopper--popperTop":P===u.PopperVerticalPosition.TOP}),A=(0,r.jsx)(f,(0,o._)({},m,{position:P})),L=(0,r.jsx)(c.default,{appear:!0,in:v,classNames:"ReactionsMenuPopperTransition",onEnter:y,onExited:C,timeout:p,children:(0,r.jsx)("div",{className:T,ref:E,style:b,children:A})});return(0,r.jsx)(l.Popper,(0,o._)({},_,{align:"left",attachTarget:n,content:L,open:h,position:P,ref:S}))}))},225960:(e,t,n)=>{"use strict";n.d(t,{ButtonStyleVariant:()=>o});const o={Post:"post",Reply:"reply"}},746257:(e,t,n)=>{"use strict";n.d(t,{useCSSVarsPropagation:()=>i});var o=n(667294);const i=({elementWithPropsRef:e,properties:t})=>(0,o.useMemo)((()=>{const n=e.current;if(!n)return{style:{}};const o=window.getComputedStyle(n),i={};return t.forEach((e=>{const t=o.getPropertyValue(e);t&&(i[e]=t)})),{style:i}}),[e.current,t])},921881:(e,t,n)=>{"use strict";n.d(t,{PopperVerticalPosition:()=>o,usePopperTopAutoPosition:()=>a});var o,i=n(667294),r=n(759876);!function(e){e.BOTTOM="b",e.TOP="t"}(o||(o={}));const a=(e,t,n)=>(0,i.useMemo)((()=>((e,t)=>{if(!e)return"t";const n=(0,r.default)(e),o=window.pageYOffset||document.documentElement.scrollTop;return n.top-o<t?"b":"t"})(e,t)),[e,t,n])},805827:(e,t,n)=>{"use strict";n.d(t,{useReactionMenuConfig:()=>r});var o=n(667294),i=n(908088);const r=()=>(0,o.useMemo)((()=>(0,i.getReactionConfig)()),[])},544311:(e,t,n)=>{"use strict";n.d(t,{useTooltipTrigger:()=>r});var o=n(799695),i=n(667294);const r=({afterHide:e,afterShow:t,cancelCloseOnContentHover:n,delayHide:r=0,delayShow:a=0,ignoreMouseTriggers:s=!1,reactionButtonContainer:c,reactionHiddenButtonContainer:l,popperPopupRef:u,triggerMouseenterOnInitial:d})=>{const p=(0,i.useRef)(null),v=(0,i.useRef)(void 0),f=(0,i.useRef)(void 0),m=(0,i.useCallback)((()=>{var e;window.clearTimeout(null!=(e=v.current)?e:void 0)}),[]),g=(0,i.useCallback)((()=>{var e;m(),null==(e=t)||e(!1)}),[t]),b=(0,i.useCallback)((()=>{var e;m(),null==(e=t)||e(!0)}),[t]);(0,o.useOnClickOutside)(u,g),(0,i.useEffect)((()=>()=>{window.clearTimeout(v.current),window.clearTimeout(f.current)}),[]);const E=(0,i.useCallback)((t=>window.setTimeout((()=>{var t;null==(t=e)||t(!1)}),null!=t?t:0)),[e]),R=()=>{var e,t;(window.clearTimeout(null!=(e=f.current)?e:void 0),s)||(v.current=(t=a,window.setTimeout((()=>{b()}),null!=t?t:0)))},_=e=>{var t,n,o;if(window.clearTimeout(null!=(o=v.current)?o:void 0),s)return;e.relatedTarget instanceof HTMLElement&&(null==(n=p)||null==(t=n.current)?void 0:t.contains(e.relatedTarget))||(f.current=E(r))};(0,i.useEffect)((()=>{d&&R()}),[]),(0,i.useEffect)((()=>{var e,t,n;return null==(e=c)||e.addEventListener("mouseenter",R,{passive:!0}),null==(t=c)||t.addEventListener("mouseleave",_,{passive:!0}),null==(n=l)||n.addEventListener("click",R,{passive:!0}),()=>{var e,t,n;null==(e=c)||e.removeEventListener("mouseenter",R),null==(t=c)||t.removeEventListener("mouseleave",_),null==(n=l)||n.removeEventListener("click",R)}}),[c]);return{cancelDelayedOpening:m,contentProps:{ref:p,onMouseEnter:(0,i.useCallback)((()=>{var e,t;window.clearTimeout(null!=(t=f.current)?t:void 0),(null==(e=n)?void 0:e.current)&&b()}),[s,b]),onMouseLeave:(0,i.useCallback)((e=>{s||c&&e.target instanceof HTMLElement&&c.contains(e.target)||(f.current=E(r))}),[E,r,s,c])}}}},123799:(e,t,n)=>{"use strict";n.d(t,{IS_ALLOWED_REENTER_DEFAULT:()=>r,TooltipVisibility:()=>o,useTooltipVisibility:()=>a});var o,i=n(667294);!function(e){e.closed="closed",e.opened="opened",e.uncontrolled="uncontrolled"}(o||(o={}));const r=!0,a=()=>{const[e,t]=(0,i.useState)("uncontrolled"),n=(0,i.useRef)(r),o=(0,i.useCallback)((o=>{"closed"!==e&&(void 0!==o&&(n.current=o),t("closed"),window.setTimeout((()=>{t("uncontrolled")})))}),[]);return{isAllowedReenter:n,tooltipVisibility:e,setTooltipVisibility:t,triggerClose:o}}},398948:(e,t,n)=>{"use strict";n.d(t,{renderPreviewItems:()=>u});var o=n(659397),i=n(822715),r=n(795558),a=n(428817),s=n.n(a),c=n(225960),l=n(908088);const u=(e,t,n,a,u)=>{const d=((e,t,n=!1)=>{let o=[];for(const t of Object.keys(e)){const n=(0,i.parseReactionId)(t);n.isValid&&e[n.value]>0&&o.push(n.value)}return o=o.sort(((t,n)=>(e[n]||0)-(e[t]||0))).slice(0,t),n&&o.reverse(),o})(t,3),p=e.querySelector(".ReactionsPreview__items"),v=(0,l.getReactionSet)(n),f=0===(0,i.calcCountersSum)(t),m=s().reactions_preview_item;p&&v&&"string"==typeof m?(p.innerHTML=d.map((e=>{const t=v.itemsById[e];if(!t)return"";const n=(0,o.classNames)({"ReactionsPreviewItem--lite ReactionsPreviewItem--stackOverlayLite":u===c.ButtonStyleVariant.Reply,"ReactionsPreviewItem--post ReactionsPreviewItem--stackOverlayPost":u===c.ButtonStyleVariant.Post});return(0,r.rs)(m,{image_url:t.imagePreviewURL,title:t.title,class:n})})).join(""),e.classList.toggle("ReactionsPreview--empty",f),e.classList.toggle("ReactionsPreview--active",void 0!==a)):console.warn("Unable to render reaction previews",{itemsContainer:p,previewItemTemplate:m,reactionSet:v})}},898298:(e,t,n)=>{"use strict";n.d(t,{isIntentPreviewHidden:()=>c,isIntentPreviewInActionStatusBar:()=>s,isIntentPreviewUseCurrent:()=>l,isVariantHidden:()=>r,isVariantInActionStatusBar:()=>i,parsePreviewVariant:()=>d,previewVisibilityIntentForVariant:()=>u,previewVisibilityUseCurrent:()=>a});var o=n(580151);const i=e=>e===o.PreviewVariantActionStatusBar,r=e=>e===o.PreviewVariantHidden,a={kind:"useCurrent"},s=e=>e.kind===o.PreviewVariantActionStatusBar,c=e=>e.kind===o.PreviewVariantHidden,l=e=>"useCurrent"===e.kind,u=e=>e?{kind:e}:a,d=e=>o.PreviewVariants.includes(e)?e:void 0},580151:(e,t,n)=>{"use strict";n.d(t,{PreviewVariantActionStatusBar:()=>o,PreviewVariantHidden:()=>i,PreviewVariants:()=>r});const o="action_status_bar",i="hidden",r=[o,i]},682951:(e,t,n)=>{"use strict";n.d(t,{REACTIONS_COUNTS_RESPONSE_FIELD:()=>c,SIZE_128:()=>s,SIZE_32:()=>i,SIZE_40:()=>r,SIZE_96:()=>a,SUPPORTED_OBJECT_TYPES:()=>o,WK_SECTION_PREFIX_REACTIONS:()=>l});const o={wall:"wall",wall_reply:"wall_reply"},i={width:32,height:32},r={width:40,height:40},a={width:96,height:96},s={width:128,height:128},c="reactions_counts",l="reactions"},189841:(e,t,n)=>{"use strict";n.d(t,{reactionsButtonMount:()=>m});var o=n(785893),i=n(973935),r=n(198508),a=n(512637),s=n(32375),c=n(282795),l=n(753566),u=n(655154),d=n(225960),p=n(577698),v=n(321850);const f=d.ButtonStyleVariant.Post,m=(e,t={})=>{var n;if("__isMounted"in e)return;const d=(0,p.getLikeBtn)(e),m=(0,p.getHiddenLikeBtn)(e),g=(0,p.getMenuMount)(e);if(!d||!g)return void((0,a.isDebugEnabled)()&&console.error("Init reactions button failed",g,d));const b=(0,s.reactionsElemPayload)(d);if(!(null==(n=b)?void 0:n.objectRaw))return void((0,a.isDebugEnabled)()&&console.error("Init reactions button failed",b));const{counts:E,csrfHash:R,objectRaw:_,reactionSetId:h,styleVariant:y=f,userReactionId:C}=b;var w;const S=null!=(w=b.titleVariant)?w:c.TITLE_VARIANT_DEFAULT;null===R&&console.warn("Missing reactions csrf hash"),(0,a.isDebugEnabled)()&&console.log("Init reactions button",_,h);i.render((0,o.jsx)(l.ReactionsMenuButton,{objectId:_,onReactionChoose:e=>{const t=(0,s.reactionsElemPayload)(d);null!==R&&t&&((0,u.emitReactionChoose)(_),(0,r.reactionButtonSetReaction)(e,t.userReactionId,_,R,d))},reactionButtonContainerElem:d,reactionHiddenButtonContainerElem:m,reactionIdInitial:C,reactionSetId:h,reactionsCounts:E,styleVariant:y,titleVariant:S,triggerMouseenterOnInitial:!!t.isMouseenterEvent}),g),(0,v.pushNavDestroy)((function(){g&&(i.unmountComponentAtNode(g),delete e.__isMounted)})),e.__isMounted=!0}},198508:(e,t,n)=>{"use strict";n.d(t,{reactionButtonSetReaction:()=>b,showReactedModal:()=>E});var o=n(434788),i=n(95432),r=n(192441),a=n(682951),s=n(898298),c=n(999237),l=n(72569),u=n(647434),d=n(512637),p=n(32375),v=n(249823),f=n(767176),m=n(809053);const g=(e,{counts:t,isFromWkLayer:n,isPrimaryLikeButtonClick:o,isUserAction:i=!1,objectRaw:r,previewVisibility:a,reactionId:s,suggestSubscribe:l})=>{(0,c.triggerReactionsUpdate)(r,t,{id:s},{isFromWkLayer:n,isPrimaryLikeButtonClick:o,isUserAction:i,previewVisibility:a,suggestSubscribe:l})},b=(e,t,n,i,a,c)=>{var b,E,R,_;if((0,d.isDebugEnabled)()&&console.log(`Change reaction for object ${n}: ${e}`),!(0,v.isValidEnvironment)())return;const h=(0,p.reactionsElemPayload)(a),y=null==(b=h)?void 0:b.counts,C=((e,t,n)=>{const i=(0,o._)({},e);return void 0!==t&&(i[t]=(i[t]||0)+1),void 0!==n&&(i[n]=Math.max(0,(i[n]||0)-1)),i})((null==(E=h)?void 0:E.counts)||(0,r.reactionCountsBrandWrap)({}),e,t),w=null==(R=c)?void 0:R.isPrimaryLikeButtonClick,S=(0,l.isWkLayerWallPostOpen)(),I=(0,s.previewVisibilityIntentForVariant)(null==(_=h)?void 0:_.previewVariant),P=(0,m.getTrackCodeFromPost)(a);g(0,{counts:C,isFromWkLayer:S,isPrimaryLikeButtonClick:w,isUserAction:!0,objectRaw:n,previewVisibility:I,reactionId:e}),(0,u.requestPostReactionSet)(e,n,i,{trackCode:P}).promise.then((t=>{var o;const i=(0,u.validateLikesChangeResponse)(t),r=null==(o=i)?void 0:o.userReaction;i&&void 0!==r&&g(0,{counts:i.counts,isFromWkLayer:S,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:I,reactionId:r.id,suggestSubscribe:i.suggestSubscribe});let a=n.replace("wall","post"),s=document.getElementById(a);if(s){let t=s.getAttribute("data-ad");if(t){let n=void 0===e?"unlike":"like";f.AdsEvents.register(n,t)}}}),(e=>{var o;(null==(o=e)?void 0:o.isAborted)||g(0,{counts:y,isFromWkLayer:S,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:I,reactionId:t})}))};function E(e,t){!function(e){(0,i.showWiki)({w:e},!1,void 0,{queue:1})}(`${a.WK_SECTION_PREFIX_REACTIONS}_${e}/${t}`)}},666734:(e,t,n)=>{"use strict";n.d(t,{animationItemHasData:()=>a,getAnimationAsync:()=>s});var o=n(143790);const i=(0,n(367431).makeSharedState)("reactions-animations-storage",(()=>({animationItemsData:new Map})),{version:0}),r=()=>i().animationItemsData,a=e=>r().has(e),s=(0,o.getAnimationAsync)({animationDataGet:({animationId:e})=>r().get(e),animationDataSet:({animationId:e,loadedAnimationData:t})=>{r().set(e,t)},animationModuleLoader:o.animationModuleLoaderAsync})},647434:(e,t,n)=>{"use strict";n.d(t,{requestGetReacted:()=>o.requestGetReacted,requestPostReactionSet:()=>i.requestPostReactionSet,validateLikesChangeResponse:()=>i.validateLikesChangeResponse});var o=n(585386),i=n(913923)},585386:(e,t,n)=>{"use strict";n.d(t,{requestGetReacted:()=>a});var o=n(434788),i=n(822715),r=n(363444);const a=e=>{const t={act:"reactions_get_reacted",object:e};return{promise:new Promise(((e,n)=>{r.ajax.post("/like.php",t,{onDone:t=>{const r=function(e){let t;if(!(0,i.isUnknownObject)(e))return t;const{reactedMenuStats:n}=e;n&&(t||(t={}),t=(0,o._)({},t,{reactedMenuStats:n}));return t}(t);if(!r){const e=new Error("requestGetReacted: Invalid response");return console.error(e,t),void n(e)}e(r)},onFail:e=>(n({err:e}),!1)})}))}}},991059:(e,t,n)=>{"use strict";n.d(t,{stringWithHTMLEntitiesDecode:()=>r});var o=n(640971),i=n(659397);const r=e=>(0,i.decodeHTMLEntities)((0,o.unwrap)(e));o.unwrap},913923:(e,t,n)=>{"use strict";n.d(t,{requestPostReactionSet:()=>d,validateLikesChangeResponse:()=>p});var o=n(419328),i=n(822715),r=n(363444),a=n(383320),s=n(584356),c=n(682951),l=n(878021);const u=(0,o.makePendingRequestState)(),d=(e,t,n,o)=>{var i,c,d,p;(null==(p=null==(i=o)?void 0:i.abortPendingRequests)||p)&&u.cancel(t);const v={act:"a_set_reaction",object:t,reaction_id:e,hash:n,wall:2,from:null==(c=window.Likes)?void 0:c._getReference(t),track_code:null==(d=o)?void 0:d.trackCode},f=new a.AjaxCancellationToken,m=new Promise(((e,t)=>{const n=r.ajax.post("like.php",v,{cancellationToken:f,onDone:n=>{var o,i;if(null==(o=n)?void 0:o.unauth_action_box)return l.UnauthActionBox.show(n.unauth_action_box),void t();(null==(i=n)?void 0:i.done_box)&&(0,s.showDoneBox)("",{},n.done_box),e(n)},onFail:e=>{const o=(e=>{return"object"==typeof(t=e)&&null!==t&&"readyState"in t&&0===e.readyState;var t})(n);return t({err:e,isAborted:o}),!!o}})})),g=()=>{f.cancel()},b=u.register(t,g);return m.catch((()=>{})).finally((()=>{b&&b()})),{abort:g,promise:m}},p=e=>{var t,n,o;if(void 0===(null==(t=e)?void 0:t.reactions_my))return void console.warn("Invalid reaction change response format",e);const r=null!=(o=null==(n=e)?void 0:n[c.REACTIONS_COUNTS_RESPONSE_FIELD])?o:void 0,a=e.reactions_my,s=e.suggest_subscribe;let l;return null===a?l={id:void 0}:(0,i.isValidReactionId)(a)&&(l={id:a}),{counts:r,userReaction:l,suggestSubscribe:s}}},512637:(e,t,n)=>{"use strict";n.d(t,{ENABLED_IN_POST_REPLY:()=>i,isDebugEnabled:()=>o.isDebugEnabled});var o=n(457972);const i=!1},775060:(e,t,n)=>{"use strict";n.d(t,{getCounterForTitle:()=>a,isCounterAvailable:()=>c,isCounterEnabled:()=>s,isCounterEnabledForBtn:()=>r});var o=n(822715),i=n(29271);const r=e=>!!e.getAttribute("data-reaction-button-text-is-counter");function a(e,t,n,a){if(!r(e))return{kind:"disabled"};if(!n)return{kind:"error"};const s=0!==(a?(0,o.calcCountersSum)(a):0);if(!(0,o.hasReactionsForCounts)(n))return{kind:"enabled",allowZeroAnimation:s,buttonText:""};const c=(0,o.calcCounters)(n,t),l=(0,o.calcCountersWeightedSum)(c);return{kind:"enabled",allowZeroAnimation:s,buttonText:(0,i.langNumeric)(l,"%s",!0)}}function s(e){return!!e&&"disabled"!==e.kind}function c(e){return"enabled"===e.kind}},655154:(e,t,n)=>{"use strict";n.d(t,{addDataUpdateListener:()=>a,addReactionChooseListener:()=>c,emitDataUpdate:()=>s,emitReactionChoose:()=>l});var o=n(980602);const i=(0,n(367431).makeSharedState)("reactions-menu-events",(()=>({emitter:new o.default})),{version:0}),r=()=>i().emitter,a=(e,t)=>{const n=r(),o={[`${e}:data_update`]:t};return n.addListeners(o),()=>{n.removeListeners(o)}},s=(e,t)=>{r().emit(`${e}:data_update`,t)},c=(e,t)=>{const n=r(),o={[`${e}:reaction_choose`]:t};return n.addListeners(o),()=>{n.removeListeners(o)}},l=e=>{r().emit(`${e}:reaction_choose`)}},32375:(e,t,n)=>{"use strict";n.d(t,{getPreviewVariantForLikeBtn:()=>f,reactionsElemPayload:()=>m,reactionsElemPayloadForBadges:()=>g,shouldReactionsPreviewBeVisible:()=>_,updateReactionsButtonForCounts:()=>C,updateReactionsPreview:()=>y,verifyPayloadForBadges:()=>b});var o=n(265865),i=n(822715),r=n(893106),a=n(29271),s=n(908088),c=n(577698),l=n(249823),u=n(898298),d=n(398948),p=n(135683);const v=e=>{const t=e.getAttribute("data-reaction-counts");if(null===t)return{};const n=t?(0,o.parseJSON)(t):void 0;return"object"==typeof n&&null!==n?n:void 0},f=e=>{const t=e.getAttribute("data-reaction-preview-variant");if(t)return(0,u.parsePreviewVariant)(t)},m=e=>{const t=e.getAttribute("data-reaction-target-object"),n=e.getAttribute("data-reaction-hash"),o=e.getAttribute("data-reaction-set-id");if(null===o)return;const r=e.getAttribute(p.ATTR_USER_REACTION_ID),a=r?(0,i.parseReactionIdOrUnset)(r):void 0,s=e.getAttribute("data-reaction-style-variant"),c=s&&(0,l.isValidButtonStyleVariant)(s)?s:void 0,u=e.getAttribute("data-reaction-menu-title-variant"),d=u&&(0,l.isValidButtonTitleVariant)(u)?u:void 0,m=f(e);return{counts:v(e),csrfHash:n,objectRaw:t,reactionSetId:o,styleVariant:c,titleVariant:d,userReactionId:a,previewVariant:m}},g=e=>({objectId:e.getAttribute("data-badges-object-id"),objectOwnerId:e.getAttribute("data-badges-object-owner-id"),objectType:e.getAttribute("data-badges-object-type"),ref:e.getAttribute("data-badges-ref"),showOnboarding:e.getAttribute("data-badges-show-onboarding")}),b=e=>{const{objectId:t,objectOwnerId:n,objectType:o}=e;return t&&n&&o};var E;const R=(e,t,n,o)=>{const i=(0,a.langNumeric)(n,a.getLang("reactions_n_reacted","raw")||"%s",!0);e.setAttribute("aria-label",i);const s=null!=(E=e.querySelector('[data-section-ref="like-button-count"]'))?E:void 0;if(!s)return;if(e.tt&&"object"==typeof e.tt){var c,l;if(!(e.tt.shown||e.tt.showing))null==(l=e.tt)||null==(c=l.destroy)||c.call(l)}const u=(0,a.langNumeric)(t,"%s",!0);(0,r.animateCount)(s,u,{allowZero:0!==o,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})},_=e=>(0,i.hasReactionsForCounts)(e),h=(e,t,n)=>{const o=m(e);o&&o.objectRaw&&((e,{counts:t,countsPrevious:n,objectRaw:o,reactionId:r,reactionSetId:a,styleVariant:l})=>{const u=(0,s.getReactionSet)(a),p=(0,i.calcCounters)(t,u),v=(0,i.calcCountersWeightedSum)(p),f=(0,i.calcCountersSum)(t),m=n?(0,i.calcCountersSum)(n):0,g=(0,c.getPreviewElem)(o);g&&((0,d.renderPreviewItems)(g,t,a,r,l),R(g,v,f,m))})(0,{counts:t,countsPrevious:n,objectRaw:o.objectRaw,reactionId:o.userReactionId,reactionSetId:o.reactionSetId,styleVariant:o.styleVariant})},y=(e,t)=>{const n=(0,c.getLikeBtnElem)(e),o=t.counts;n&&o?h(n,o,t.countsPrevious):console.warn("Unable to update object reactions",{objectRaw:e,options:t})},C=(e,{counts:t})=>{const n=(0,c.getLikeBtnElem)(e);n&&((e,t)=>{e.setAttribute("data-reaction-counts",JSON.stringify(t))})(n,t)}},412818:(e,t,n)=>{"use strict";n.d(t,{ReactionsEntryGlobal:()=>f,init:()=>p});var o=n(953908),i=n(189841),r=n(557530),a=n(259036),s=n(835821),c=n(908088),l=n(530517),u=n(839470),d=n(577698);const p=()=>{(0,l.postRenderReactionsInit)(),(0,s.initResponseHandlers)()},v=e=>"1"===e.dataset.reactionsMenuDisabled,f={onReactionKeyDown:(e,t)=>{(0,r.isEventFromMenu)(t)||(0,u.partConfigEnabled)("unlike_archived_post")&&v(e)||[o.KEY.RETURN,o.KEY.SPACE].includes(t.keyCode)&&(t.stopPropagation(),(0,r.toggleReactionOnClick)(e))},initReactionByMouseEvent:(e,t)=>{if(t.target!==e)return;const n=(0,d.getButtonContainer)(e);n&&((0,u.partConfigEnabled)("unlike_archived_post")&&v(e)||(0,a.reactionsButtonInit)(n,{isMouseenterEvent:!0}))},onReactionClick:(e,t)=>{(0,o.checkEvent)(t)||(0,r.isEventFromMenu)(t)||((0,r.toggleReactionOnClick)(e),(0,u.partConfigEnabled)("unlike_archived_post")&&v(e)||(0,a.reactionsButtonInit)(e))},reactionsButtonMount:i.reactionsButtonMount,storageAddSets:c.storageAddSets,storageSetConfig:c.storageSetConfig}},557530:(e,t,n)=>{"use strict";n.d(t,{isEventFromMenu:()=>s,toggleReactionOnClick:()=>c});var o=n(59985),i=n(198508),r=n(655154),a=n(32375);const s=e=>{var t,n;return e.target instanceof HTMLElement&&(null==(t=(n=e.target).closest)?void 0:t.call(n,"._ReactionsMenuPopperRoot"))},c=e=>{var t;const n=(0,a.reactionsElemPayload)(e);if(!(null==(t=n)?void 0:t.objectRaw))return void console.warn("Missing reactions object raw",e);const{csrfHash:s,objectRaw:c,userReactionId:l}=n;if((0,r.emitReactionChoose)(c),null===s)return void console.warn("Missing reactions csrf hash",e);const u=void 0===l?o.REACTION_ID_DEFAULT:void 0;(0,i.reactionButtonSetReaction)(u,l,c,s,e,{isPrimaryLikeButtonClick:!0})}},259036:(e,t,n)=>{"use strict";n.d(t,{reactionsButtonInit:()=>o});const o=(...e)=>{const t=window.Reactions;t?t.reactionsButtonMount(...e):window.stManager.add([window.jsc("web/reactions.js"),"reactions.css"]).then((()=>{window.Reactions?o(...e):console.error("Reactions module is unavailable")}))}},403702:(e,t,n)=>{"use strict";n.d(t,{reactionLogError:()=>r});var o=n(698216),i=n(908088);const r=({error:e})=>{var t;var n;const r=null!=(n=null==(t=(0,i.getReactionConfig)())?void 0:t.reportJsErrors)&&n;(0,o.reactionLogError)({error:e,reportError:r})}},835821:(e,t,n)=>{"use strict";n.d(t,{initResponseHandlers:()=>c});var o=n(541140),i=n(908088);const r=e=>{var t;const n=null==(t=e)?void 0:t.reaction_sets;n&&(0,i.storageAddSets)(n)},a=e=>{e&&(0,i.storageSetConfig)(e)};let s=!1;const c=()=>{s||((0,o.replaceExtraHandler)("reactionsConfig",a),(0,o.replaceExtraHandler)("reactions",r),s=!0)}},577698:(e,t,n)=>{"use strict";var o;n.d(t,{getButtonContainer:()=>l,getClosestLikeBtnContainerElem:()=>a,getHiddenLikeBtn:()=>m,getLikeBtn:()=>v,getLikeBtnElem:()=>i,getLikeWrap:()=>c,getMenuMount:()=>d,getPreviewElem:()=>g});const i=e=>null!=(o=document.querySelector(`[data-section-ref="reactions-button"][data-reaction-target-object="${e}"]`))?o:void 0;var r;const a=e=>null!=(r=e.closest('[data-section-ref="reactions-button-container"]'))?r:void 0;var s;const c=e=>{const t=i(e);if(t)return null!=(s=t.closest(".like_wrap"))?s:void 0},l=e=>e.closest('[data-section-ref="reactions-button-container"]');var u;const d=e=>null!=(u=e.querySelector('[data-section-ref="reactions-menu-mount"]'))?u:null;var p;const v=e=>null!=(p=e.querySelector('[data-section-ref="reactions-button"]'))?p:null;var f;const m=e=>null!=(f=e.querySelector('[data-section-ref="reactions-hidden-button"]'))?f:void 0,g=e=>document.querySelector(`[data-section-ref="reactions-preview-items"][data-reaction-target-object="${e}"]`)},908088:(e,t,n)=>{"use strict";n.d(t,{getReactionConfig:()=>m,getReactionSet:()=>v,storageAddSets:()=>p,storageSetConfig:()=>f});var o=n(434788),i=n(659397),r=n(822715),a=n(367431),s=n(403702),c=n(682951),l=n(512637);const u=(0,a.makeSharedState)("reactions-storage",(()=>new Map),{version:0}),d=(0,a.makeSharedState)("reactions-config",(()=>({config:void 0})),{version:0}),p=e=>{(0,l.isDebugEnabled)()&&console.log(e),Object.entries(e).forEach((([e,t])=>{const n=(0,r.validateReactionSetPayloaditems)(t,e);if(n)return void(0,s.reactionLogError)({error:n.error});const a=t.map((e=>(0,o._)({},e,{title:(0,i.decodeHTMLEntities)(e.title)})));u().set(e,(0,r.prepareReactionMenuSet)(e,a,{imageMenuSize:c.SIZE_96,imagePreviewSize:c.SIZE_32,imageStoryPanelSize:c.SIZE_128,imageStoryPreviewSize:c.SIZE_40}))}))},v=e=>{const t=u().get(e);if(t)return t;{const t=new Error(`Reaction set not found: ${e}`);(0,s.reactionLogError)({error:t})}},f=e=>{(0,l.isDebugEnabled)()&&console.log(e);const t=(0,r.parseReactionMenuConfig)(e);t?d().config=t:console.warn("Reactions: invalid menu config passed",e)},m=()=>{var e;return null==(e=d())?void 0:e.config}},249823:(e,t,n)=>{"use strict";n.d(t,{isValidButtonStyleVariant:()=>p,isValidButtonTitleVariant:()=>d,isValidEnvironment:()=>a,preloadImage:()=>s,usePrevious:()=>c,usePreviousRef:()=>l});var o=n(667294),i=n(282795),r=n(225960);const a=()=>{var e,t,n;return"function"==typeof(null==(e=window.cur)?void 0:e.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null==(n=window.Widgets)||null==(t=n.oauth)||t.call(n),!1)},s=e=>new Promise(((t,n)=>{const o=new Image;o.src=e,o.onload=()=>t(),o.onerror=()=>n()})),c=e=>{const t=(0,o.useRef)(e);return(0,o.useEffect)((()=>{t.current=e})),t.current},l=e=>{const t=(0,o.useRef)(e);return(0,o.useEffect)((()=>{t.current=e})),t},u=Object.values(r.ButtonStyleVariant),d=e=>i.ReactionMenuTitleVariants.includes(e),p=e=>u.includes(e)},109454:(e,t,n)=>{"use strict";n.d(t,{isReactionsFullUpdatePayload:()=>a,reactionsCountsOnlyUpdatePayload:()=>s,reactionsCountsUpdatePayload:()=>r});var o=n(434788),i=n(900641);const r=(e,t)=>(0,o._)({kind:i.PayloadKindFull},e,{reactionIdState:{reactionId:t.id}}),a=e=>e.kind===i.PayloadKindFull,s=e=>(0,o._)({kind:i.PayloadKindCountsOnly},e)},900641:(e,t,n)=>{"use strict";n.d(t,{PayloadKindCountsOnly:()=>o,PayloadKindFull:()=>i});const o="counts_only",i="counts_with_current_reaction"},999237:(e,t,n)=>{"use strict";n.d(t,{triggerReactionsUpdate:()=>s});var o=n(693982),i=n(682951),r=n(505426),a=n(109454);const s=(e,t,n,s)=>{const c=(0,o.parseLikeObjectId)(e);c&&c.objectType===i.SUPPORTED_OBJECT_TYPES.wall&&c.objectId?(0,r.emitEvent)(r.WallDataEvents.post_reactions_counts_update,function(e,t,n,o){var i,r,s;const c={counts:e,isFromWkLayer:null==(i=t)?void 0:i.isFromWkLayer,isPrimaryLikeButtonClick:null==(r=t)?void 0:r.isPrimaryLikeButtonClick,isQueueUpdate:null==(s=t)?void 0:s.isQueueUpdate,isUserAction:t.isUserAction,postFullId:n.objectId,previewVisibility:t.previewVisibility,reactionIdState:o?{reactionId:o.id}:void 0,suggestSubscribe:t.suggestSubscribe};return o?(0,a.reactionsCountsUpdatePayload)(c,o):(0,a.reactionsCountsOnlyUpdatePayload)(c)}(t,s,c,n)):c&&c.objectType===i.SUPPORTED_OBJECT_TYPES.wall_reply&&c.objectId?(0,r.emitEvent)(r.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:c.objectId,reactionIdState:n?{reactionId:n.id}:void 0}):console.warn("Unsupported reactions object update",e)}},530517:(e,t,n)=>{"use strict";n.d(t,{postRenderReactionsInit:()=>T});var o=n(299156),i=n(659397),r=n(828109),a=n(795558),s=n(508087),c=n(693982),l=n(512637),u=n(32375),d=n(898298),p=n(577698),v=n(109454),f=n(358496),m=n(170864),g=n(72569),b=n(655154),E=n(580151),R=n(908088),_=n(216833);const h=(e,t,n=(()=>{var e;return null==(e=window.cur)?void 0:e.wallTpl})())=>{var o;const i=null==(o=n)?void 0:o[e];if(i)return(0,s.stripPercentVars)((0,a.rs)(i,t));console.warn(`renderTemplate: missing template '${e}'`,n)},y=({isUserAction:e=!1},...t)=>{e?console.error(...t):(0,l.isDebugEnabled)()&&console.warn(...t)},C=e=>(0,_.isBadgesEnabled)()&&e.classList.contains("PostActionStatusBar--withBadges");const w=(e,t,{isActionStatusBarVisible:n,isReactionsPreviewVisible:o,positionTrackingEnd:r})=>{const s=((e,t)=>{var n,o,i;const r=(0,p.getLikeWrap)(e);if(!r)return;const s=null==(n=(0,m.getPostElem)(t,r))?void 0:n.querySelector('[data-section-ref="post-action-status-bar"]');if(s)return{actionStatusBar:s};const c=(0,g.isWkLayerWallPostOpen)()?null==(o=window.wkcur)?void 0:o.wallTpl:null==(i=window.cur)?void 0:i.wallTpl,l=(0,a.se)(h("post_action_status_bar",{class:"PostActionStatusBar--hidden"},c));return l?((0,a.domInsertBefore)(l,r),{actionStatusBar:l}):void 0})(e,t.postFullId);if(!s)return void y({},"Unable to init ActionStatusBar in post",t);const{actionStatusBar:c}=s;if(c.classList.toggle("PostActionStatusBar--hidden",!n),C(c)&&c.classList.toggle("PostActionStatusBar--withReactions",o),n&&!(0,p.getPreviewElem)(e)){const t=(0,a.se)(function(e,t,n={}){var o,r;const a=(0,g.isWkLayerWallPostOpen)()?null==(o=window.wkcur)?void 0:o.wallTpl:null==(r=window.cur)?void 0:r.wallTpl,s=(0,i.classNames)({"ReactionsPreview--empty":!e,"ReactionsPreview--isInActionStatusBar":!!n.isInActionStatusBar});return h("post_reactions_preview",{class:s,object_raw:t},a)}(o,e,{isInActionStatusBar:!0}));if(C(c)){const e=c.querySelector(".PostActionStatusBar__leftInner");e&&e.prepend(t)}else c.prepend(t)}if(r){var l;const t=(0,p.getLikeBtnElem)(e);null==(l=r)||l(t)}},S=e=>{var t;if(!(e=>void 0!==e.counts)(e))return void y(e,"Counts is invalid or missing");const n=(0,c.likePostObjectId)(e.postFullId),o=(0,m.getPostElem)(e.postFullId,(0,p.getLikeWrap)(n));o||y(e,"Missing post element for reactions preview update",{payload:e,likeWrap:(0,p.getLikeWrap)(n)});const i=(0,p.getLikeBtnElem)(n);if(!i)return void y(e,"Unable to find reactions button",{likeObjectId:n});const r=(0,u.reactionsElemPayload)(i),a=null==(t=r)?void 0:t.counts;I({elemPayload:r,likeBtnElem:i,likeObjectId:n,payload:e}),P({countsPrevious:a,likeBtnElem:i,likeObjectId:n,payload:e,postEl:o})},I=({elemPayload:e,likeBtnElem:t,likeObjectId:n,payload:i})=>{const{counts:r}=i;if(!!i.isQueueUpdate&&(e=>{const t=(0,o.getLastOwnReactionChangeTime)(e);if(!t)return!1;const n=t+1e4;return Date.now()<n})(t))(0,l.isDebugEnabled)()&&console.log("Ignoring reactions update from queue",i);else{if(e){const{counts:n,reactionSetId:a}=e,s=(0,R.getReactionSet)(a);if((0,v.isReactionsFullUpdatePayload)(i)){const e=i.reactionIdState.reactionId;s&&(0,o.updateReactionButtonForCurrentReaction)(t,e,s,i.isUserAction)}s&&((0,o.updateReactionButtonCounts)(t,s,i.isUserAction,r,n),(0,o.updateReactionButtonContainerForCounts)(t,r))}if((0,v.isReactionsFullUpdatePayload)(i)){var a;const n=i.reactionIdState.reactionId;(0,o.setDataCurrentId)(t,n),i.isUserAction&&(null==(a=e)?void 0:a.objectRaw)&&(0,b.emitDataUpdate)(e.objectRaw,{currentReactionId:n})}(0,u.updateReactionsButtonForCounts)(n,{counts:r})}},P=({countsPrevious:e,likeBtnElem:t,likeObjectId:n,payload:o,postEl:i})=>{const{counts:a,previewVisibility:s=d.previewVisibilityUseCurrent}=o,c=((e,t)=>{if((0,d.isIntentPreviewInActionStatusBar)(e))return{previewVariant:E.PreviewVariantActionStatusBar};if((0,d.isIntentPreviewHidden)(e))return{previewVariant:E.PreviewVariantHidden};if((0,d.isIntentPreviewUseCurrent)(e)){const e=(0,u.getPreviewVariantForLikeBtn)(t);if(e)return{previewVariant:e}}})(s,t);if(!c)return;const{previewVariant:l}=c,p=(0,d.isVariantInActionStatusBar)(l),v=(0,u.shouldReactionsPreviewBeVisible)(a),f=(0,d.isVariantHidden)(l)||p&&!v;if(p){let e;o.isPrimaryLikeButtonClick&&!o.isFromWkLayer&&(e=(0,r.preservePositionBetween)(t).start());const a=v;var m;if(!(0,_.isBadgesEnabled)())null==(m=i)||m.classList.toggle("post--withActionStatusBar",a);w(n,o,{isActionStatusBarVisible:a,isReactionsPreviewVisible:v,positionTrackingEnd:e})}f||(0,u.updateReactionsPreview)(n,{counts:a,countsPrevious:e})},k=e=>{if(!l.ENABLED_IN_POST_REPLY)return!1;const{counts:t}=e;if(!t)return;const n=(0,c.likeReplyObjectId)(e.replyFullId);(0,u.updateReactionsPreview)(n,{counts:t,countsPrevious:void 0}),(0,u.updateReactionsButtonForCounts)(n,{counts:t})},T=()=>{let e=[(0,f.registerUniqueListener)("wall-post-action-status-bar",f.WallDataEvents.post_reactions_counts_update,S),(0,f.registerUniqueListener)("wall-reply-reactions-counts",f.WallDataEvents.reply_reactions_counts_update,k)];return{onDestroy:()=>{e.forEach((e=>{e()})),e=[]}}}},505426:(e,t,n)=>{"use strict";n.d(t,{WallDataEvents:()=>a,emitEvent:()=>d,registerNonGlobalNonUniqueListener:()=>u,registerUniqueListener:()=>l});var o=n(434788),i=n(980602),r=n(367431);const a={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},s=(0,r.makeSharedState)("wall-data",(()=>({emitter:new i.default,keyedListeners:Object.create(null)})),{version:0}),c=(e,t,n)=>{var i,r;const a=s(),c=null==(r=a.keyedListeners)||null==(i=r[e])?void 0:i[t];return c&&a.emitter.removeListener(e,c),((e,t,n)=>{const i=s();return i.emitter.addListener(e,n),i.keyedListeners[e]=(0,o._)({},i.keyedListeners[e],{[t]:n}),()=>{var o,r;i.emitter.removeListener(e,n),(null==(o=i.keyedListeners[e])?void 0:o[t])===n&&(null==(r=i.keyedListeners[e])||delete r[t])}})(e,t,n)},l=(e,t,n)=>c(t,e,n),u=(e,t)=>((e,t)=>{const n=s();return n.emitter.addListener(e,t),()=>{n.emitter.removeListener(e,t)}})(e,t),d=(e,t)=>{s().emitter.emit(e,t)}},358496:(e,t,n)=>{"use strict";n.d(t,{WallDataEvents:()=>o.WallDataEvents,registerUniqueListener:()=>o.registerUniqueListener});var o=n(505426)},767176:(e,t,n)=>{"use strict";n.d(t,{AdsEvents:()=>p});var o=n(599809),i=n(936134),r=n(795558),a=n(796943),s=n(866310),c=n(95432),l=n(9480);let u=[];const d=(0,i.debounce)((()=>{if(0===u.length)return;const e=u.splice(0,u.length);(0,o.api)("adsint.registerAdEvents",{events:JSON.stringify(e)}).catch((t=>{for(;e.length;)u.unshift(e.pop())}))}),1e3);const p={register:(e,t)=>{(e=>["like","unlike","share","music_pause","music_play","music_track_to_profile","music_playlist_to_profile","music_track_share","music_playlist_share","music_track_share_to_story","music_playlist_share_to_story"].includes(e))(e)&&(e=>!!e)(t)&&(u.push({event_type:e,ad_data:t}),d())},handleShareEvent:(e,t,n)=>{const o=e&&e.dataset&&e.dataset.ad;if(!o||!t)return null;let i="share";0===t.indexOf("audio")&&(window.Wall&&Wall.triggerAdStat(e,"audio_click"),0===t.indexOf("audio_playlist")?i=2==n?"music_playlist_share_to_story":"music_playlist_share":0===t.indexOf("audio")&&(i=2==n?"music_track_share_to_story":"music_track_share")),p.register(i,o)}};(0,a.onDomReady)((()=>{const e="adsEvents",t=(0,c.getAudioPlayer)();if(!t||t.subscribers&&t.subscribers.filter((t=>t.context===e)).length>0)return;const n={[s.AudioPlayerEventType.PLAY]:"music_play",[s.AudioPlayerEventType.PAUSE]:"music_pause",[s.AudioPlayerEventType.MUSIC_AUDIOS_ADD]:"music_track_to_profile",[s.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD]:"music_playlist_to_profile"},o=e=>{if(n[e]){const o=l.AudioUtils.audioTupleToAudioObject(t.getCurrentAudio()),i=o?document.querySelector("._audio_row_"+o.fullId+"."+l.AudioUtils.AUDIO_CURRENT_CLS):null,a=(0,r.domClosest)("post",i);let s=a&&a.dataset&&a.dataset.ad;s||(s=(e=>{if(!e)return null;const t=0===e.indexOf("feed:")?e.replace("feed:","post"):null,n=t&&document.getElementById(t);return n&&n.dataset&&n.dataset.ad})(t._getPlayingContext())),s&&(window.Wall&&Wall.triggerAdStat(a,"audio_click"),p.register(n[e],s))}};t.on(e,s.AudioPlayerEventType.PLAY,(()=>o(s.AudioPlayerEventType.PLAY))),t.on(e,s.AudioPlayerEventType.PAUSE,(()=>o(s.AudioPlayerEventType.PAUSE))),t.on(e,s.AudioPlayerEventType.MUSIC_AUDIOS_ADD,(()=>o(s.AudioPlayerEventType.MUSIC_AUDIOS_ADD))),t.on(e,s.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD,(()=>o(s.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD)))}))}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return a[e].call(n.exports,n,n.exports,c),n.exports}c.m=a,c.amdO={},e=[],c.O=(t,n,o,i)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,o,i]=e[u],a=!0,s=0;s<n.length;s++)(!1&i||r>=i)&&Object.keys(c.O).every((e=>c.O[e](n[s])))?n.splice(s--,1):(a=!1,i<r&&(r=i));if(a){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var i=Object.create(null);c.r(i);var r={};t=t||[null,n({}),n([]),n(n)];for(var a=2&o&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,c.d(i,r),i},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,n)=>(c.f[n](e,t),t)),[])),c.u=e=>25394===e?"AudioLongtapModal.98b6df61d646414354a3.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.b73d1f0a03f70163e02d.js":96816===e?"web-audio-lyrics-modal.5b786d2492e85e4a335f.js":9375===e?"voice_message_player.f0c31b4a3dc08de145c9.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.6cf18c53f58f775934b3.js":28872===e?"feed-client-nav-skeleton.a30e12215b3ca16e7fe2.js":35953===e?"feed-client-nav-async-right-block.d1fcdf48d7fa743442bf.js":55489===e?"lottie-light.511c5814b6f1077825b7.js":13492===e?"83101cfad1fa3d30a972a617b6fdb748.async.88043d17775fec27d02d.js":65040===e?"781db2254988bf714fc6336b49284e48.async.d8b5199249af1da6b322.js":68602===e?"8f47dfab49e6781040e4fafd5d12573f.async.8bd1189b7256833411f8.js":31902===e?"BadgesEntrypoint.7b4ad190ae1e826b622b.js":59240===e?"performance-stats.59c5c96e7372abb54c8c.js":53243===e?"54d4cc6f076e2f10ddd499a3f3031c4e.async.492a2cccaba9713e13b1.js":18669===e?"BadgesCatalog.03a53f82265b178e22e9.js":83803===e?"BadgesObjectInfo.b8a4d37e4884e3f8bd83.js":27772===e?"badges_status_bar_onboarding_init.41dec8fe654d681a0ed5.js":60456===e?"BadgesRestrictedModal.dc14503540851669633a.js":64369===e?"BadgesTaskModal.f0ae8132ed1066dcf667.js":72728===e?"OneTimeDonut.78e3e5017a6e4747cfdc.js":44221===e?"IconBadges.2da61b7762dda802ae61.js":38288===e?"lottie.5e4758c39f106eab733a.js":void 0,c.miniCssF=e=>e+"."+{18669:"737a59d2b2d72890ab23",25394:"6af57e1b0cf5a74f9a87",31902:"101d344cd9edcdddc950",57468:"35be3dfa1e90e3cdd0a1",72728:"d6b377ab8298fad9c46c",75980:"5bbee2c9f3e189193a73",83803:"f9502d82cd6090d527a2"}[e]+".css",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},c.l=(e,t,n,i)=>{if(o[e])o[e].push(t);else{var r,a;if(void 0!==n)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var u=s[l];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="vk:"+n){r=u;break}}r||(a=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,c.nc&&r.setAttribute("nonce",c.nc),r.setAttribute("data-webpack","vk:"+n),r.src=e),o[e]=[t];var d=(t,n)=>{r.onerror=r.onload=null,clearTimeout(p);var i=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),a&&document.head.appendChild(r)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="/dist/",i=e=>new Promise(((t,n)=>{var o=c.miniCssF(e),i=c.p+o;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var i=(a=n[o]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){var a;if((i=(a=r[o]).getAttribute("data-href"))===e||i===t)return a}})(o,i))return t();((e,t,n,o)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=r=>{if(i.onerror=i.onload=null,"load"===r.type)n();else{var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=s,i.parentNode.removeChild(i),o(c)}},i.href=t,document.head.appendChild(i)})(e,i,t,n)})),r={70724:0},c.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{18669:1,25394:1,31902:1,57468:1,72728:1,75980:1,83803:1}[e]&&t.push(r[e]=i(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{var e={70724:0};c.f.j=(t,n)=>{var o=c.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise(((n,i)=>o=e[t]=[n,i]));n.push(o[2]=i);var r=c.p+c.u(t),a=new Error;c.l(r,(n=>{if(c.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",a.name="ChunkLoadError",a.type=i,a.request=r,o[1](a)}}),"chunk-"+t,t)}},c.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[r,a,s]=n,l=0;if(r.some((t=>0!==e[t]))){for(o in a)c.o(a,o)&&(c.m[o]=a[o]);if(s)var u=s(c)}for(t&&t(n);l<r.length;l++)i=r[l],c.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return c.O(u)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=c.O(void 0,[75514,98066,56990,24509,76400,40885,76429,68592],(()=>c(849307)));l=c.O(l)})();