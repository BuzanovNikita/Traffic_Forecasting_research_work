"use strict";(self.webpackChunkvk=self.webpackChunkvk||[]).push([[57283],{338386:(e,t,n)=>{n.d(t,{customMetricsCollector:()=>i});var o=n(193452);const i=new class{logEvent(e){return this.actionStatCollector.logEvent({type:"type_ab_custom_metrics_item",type_ab_custom_metrics_item:e})}constructor(){this.productionStatCollector=new o.ProductionStatCollector,this.actionStatCollector=new o.ActionStatCollector(this.productionStatCollector)}}},999110:(e,t,n)=>{n.d(t,{messagingActionItemStatCollector:()=>i});var o=n(193452);const i=new class{logEvent(e){const t={type:"type_messaging_action_item",type_messaging_action_item:e};this.actionStatCollector.logEvent(t)}constructor(){this.productStatCollector=new o.ProductionStatCollector,this.actionStatCollector=new o.ActionStatCollector(this.productStatCollector)}}},578137:(e,t,n)=>{n.d(t,{audioMessageStatCollector:()=>i});var o=n(193452);const i=new class{logEvent(e){const t={type:"type_messaging_audio_message_item",type_messaging_audio_message_item:e};this.actionStatCollector.logEvent(t)}constructor(){this.productStatCollector=new o.ProductionStatCollector,this.actionStatCollector=new o.ActionStatCollector(this.productStatCollector)}}},68586:(e,t,n)=>{n.d(t,{ContactRecommendationCollector:()=>a});var o=n(957973),i=n(193452);const a=new class{logEvent(e){switch(e.event_type){case"click":{const t={type:"type_messaging_contact_recommendations_item",position:e.position,type_messaging_contact_recommendations_item:e},n={type:o.EventItemType.TYPE_MESSAGING_CONTACT_RECOMMENDATIONS_ITEM};return this.clickStatCollector.logEvent(t,n)}case"show":case"hide":{const t={type:"type_messaging_contact_recommendations_item",type_messaging_contact_recommendations_item:e};return this.actionStatCollector.logEvent(t)}}}constructor(){this.productionStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productionStatCollector),this.actionStatCollector=new i.ActionStatCollector(this.productionStatCollector)}}},396316:(e,t,n)=>{n.d(t,{STICKERS_CONFDATA_KEY:()=>o,isNewStickerPicker:()=>a,isPromoVmojiCounterEnabled:()=>r,isUGCStickersEnabled:()=>s});var o,i=n(839470);function a(){return(0,i.partConfigEnabled)("new_sticker_picker")}function s(){return(0,i.partConfigEnabled)("stickers.ugc")}function r(){return(0,i.partConfigEnabled)("vmoji.promo.avatar_suggestion.promo_counter")}!function(e){e.UGC="stickers.ugc",e.PROMO_VMOJI_COUNTER="vmoji.promo.avatar_suggestion.promo_counter",e.NEW_STICKER_PICKER="new_sticker_picker"}(o||(o={}))},196635:(e,t,n)=>{n.d(t,{updateLazyLocation:()=>a,updateLocation:()=>i});var o=n(82161);function i(e,t){const n=(0,o.extend)({},window.nav.objLoc,e);Object.keys(n).filter((e=>""===n[e])).forEach((e=>{delete n[e]}));const i=window.nav.toStr(n);window.nav.setLoc(i,t)}function a(){let e={};return{scheduleNav(t){e=(0,o.extend)(e,t)},commitNav(){i(e),e={}},scheduleNavWithTimeOut(t,n=100){e=(0,o.extend)(e,t),setTimeout((()=>{i(e),e={}}),n)}}}},568012:(e,t,n)=>{n.d(t,{MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS:()=>_,MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE:()=>p,MAIL_CHAT_FLAG_IS_BUSINESS_NOTIFY:()=>m,MAIL_CHAT_FLAG_IS_CASPER:()=>v,MAIL_CHAT_FLAG_IS_COMMUNITY_CHAT:()=>C,MAIL_CHAT_FLAG_IS_COMMUNITY_CHAT_DELETED:()=>f,MAIL_CHAT_FLAG_IS_FAKE_CHANNEL:()=>g,MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL:()=>b,MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE:()=>c,MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE:()=>l,MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE:()=>r,MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION:()=>h,MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN:()=>u,MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK:()=>L,MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL:()=>T,MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE:()=>M,MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE:()=>E,MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE:()=>I,MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION:()=>A,MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN:()=>S,MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK:()=>N,MAIL_CHAT_FLAG_SERVICE_CHAT:()=>d,canAddAdmin:()=>F,canChangeInviteLink:()=>U,canChangeTitle:()=>G,canCloseChat:()=>Y,canInviteUser:()=>P,canKickUser:()=>D,canMassMention:()=>y,canPinOrUnpin:()=>H,canSeeAllMessages:()=>x,canSeeInviteLink:()=>w,canSeeSettingsItem:()=>V,canStartGroupCall:()=>B,isUserAdminInChat:()=>j,isUserOwnerInChat:()=>W});var o=n(705758),i=n(408014),a=n(502478),s=n(931917);const r=1,c=2,u=4,l=8,_=16,d=64,g=1024,m=4096,p=16384,v=32768,C=1<<17,f=1<<18,h=1<<19,A=1<<20,I=1<<21,E=1<<22,S=1<<23,L=1<<24,N=1<<25,b=1<<26,T=1<<27,M=1<<31;var k;!function(e){e.SEE_INVITE_LINK="see_invite_link",e.CHANGE_INVITE_LINK="change_invite_link",e.INVITE_USER="invite_user",e.PIN_OR_UNPIN="pin_unpin",e.CHANGE_TITLE="change_title",e.ADD_ADMIN="add_admin",e.MASS_MENTION="mass_mention",e.START_GROUP_CALL="call",e.CHANGE_STYLE="change_style"}(k||(k={}));const R={change_invite_link:[32,32],add_admin:[_,_],see_invite_link:[L,N],invite_user:[r,I],pin_unpin:[u,S],change_title:[l,E],mass_mention:[h,A],call:[b,T],change_style:[c,M]},O=1;function w(e,t,n){return K(e,"see_invite_link",t,n)}function y(e,t,n){return K(e,"mass_mention",t,n)}function U(e,t,n){return K(e,"change_invite_link",t,n)}function F(e,t,n,a){const s=(0,o.unpackStore)(e),r=n||s.peer,c=(0,i.getTab)(s,r);return!(!c||!(0,i.isChatConvo)(c))&&(!W(c,t)&&K(e,"add_admin",r,a))}function P(e,t,n){return K(e,"invite_user",t,n)}function D(e,t,n,a){if(function(e,t){const n=(0,o.unpackStore)(e);return void 0!==n.service&&(n.service&t)>0}(e,O))return!0;const s=(0,o.unpackStore)(e),r=n||s.peer,c=void 0===a?s.viewer_id:a,u=s.gid,l=(0,i.getTab)(s,r);return!(!l||!(0,i.isChatConvoWithDetails)(l))&&(!(l.data.kicked&&!l.data.closed)&&(!(0,i.isChannelPeer)(l)&&(!W(l,t)&&(!!W(l,c)||(!(!u||!W(l,-u))||(j(l,c)||function(e,t){return e.invitedByMe.includes(t)}(l,t))&&!j(l,t))))))}function H(e,t,n){return K(e,"pin_unpin",t,n)}function B(e,t,n){return K(e,"call",t,n)}function G(e,t,n){return K(e,"change_title",t,n)}function x(e,t,n){const r=(0,o.unpackStore)(e),c=n||r.viewer_id,u=t||(0,a.getPeer)(e);if(!s.Ranges.isGroupId(c))return!0;const l=(0,i.getTab)(e,u);return!(!l||!(0,i.isChatConvoWithDetails)(l))&&!!l.caccess[c]}function V(e,t,n){const s=(0,o.unpackStore)(e),r=n||s.viewer_id,c=t||(0,a.getPeer)(e),u=(0,i.getTab)(e,c);if(!u||!(0,i.isChatConvoWithDetails)(u))return!1;const l=(0,i.isChannelPeer)(u);if(!(0,i.isCommunityChat)(u))return W(u,r)&&!l;const _=(0,i.isChatActive)(u),d=W(u,-s.gid)&&_||j(u,r)&&_,g=(u.allowedUpdateFlags||[]).filter((e=>e!==p));return d&&g.length>0}function Y(e,t,n){const s=(0,o.unpackStore)(e),r=n||s.viewer_id,c=t||(0,a.getPeer)(e),u=(0,i.getTab)(e,c);if(!u||!(0,i.isChatConvoWithDetails)(u))return!1;const l=(0,i.isCommunityChat)(u),_=(0,i.isCommunityChatDeleted)(u),d=(0,i.isChatActive)(u),g=W(u,-s.gid)&&d||j(u,r)&&d;return l&&!_&&g&&(u.allowedUpdateFlags||[]).includes(p)}function K(e,t,n,s){const r=(0,o.unpackStore)(e),c=(0,a.isCommunityInterface)(e)?r.id:r.viewer_id,u=void 0===s?c:s,l=void 0===n?r.peer:n,_=(0,i.getTab)(r,l);if(!_||!(0,i.isChatConvo)(_))return!1;const d=(0,i.isChatActive)(_),[g,m]=R[t],p=m|g,v=(0,i.isChannelPeer)(_),C=W(_,u)&&d,f=C||j(_,u)&&d;if(v)switch(t){case"add_admin":case"invite_user":return!1;case"see_invite_link":return d;default:return(0,a.isCommunityInterface)(r)}if((0,i.isCommunityChat)(_)){if((0,i.isClosedChat)(_))return!1;switch(t){case"see_invite_link":return(0,i.isServiceChatTab)(_)?d:(0,i.doesChatTabHaveFlag)(_,p)?(0,i.doesChatTabHaveFlag)(_,m)?d:f:C;case"change_invite_link":return C||f;case"add_admin":return(0,i.doesChatTabHaveFlag)(_,p)?f:C;case"mass_mention":case"call":return(0,i.isServiceChatTab)(_)?d:!C&&((0,i.doesChatTabHaveFlag)(_,p)?f:d);case"invite_user":var h,A;return(0,i.isServiceChatTab)(_)?d:!(C&&!_.isDonutChat)&&("chats"!==(null==(A=window.nav)||null==(h=A.objLoc)?void 0:h.act)&&((0,i.doesChatTabHaveFlag)(_,p)?f:d));case"pin_unpin":case"change_title":return(0,i.isServiceChatTab)(_)?d:f;default:return!1}}switch(t){case"change_invite_link":return(0,i.doesChatTabHaveFlag)(_,g)?f:C;case"add_admin":return(0,i.doesChatTabHaveFlag)(_,p)?f:C;case"see_invite_link":return(0,i.doesChatTabHaveFlag)(_,p)?(0,i.doesChatTabHaveFlag)(_,m)?d:f:C;case"invite_user":case"pin_unpin":case"mass_mention":case"call":case"change_title":return(0,i.doesChatTabHaveFlag)(_,p)?(0,i.doesChatTabHaveFlag)(_,g)?f:C:d}return!1}function j(e,t){return(e.adminIds||[]).includes(t)}function W(e,t){return e.ownerId===t}},408014:(e,t,n)=>{n.d(t,{canArchiveTab:()=>V,canBePinned:()=>$,doesChatTabHaveFlag:()=>y,getConvoInlineMenuActions:()=>Q,getConvoReactedPeerIds:()=>J,getCurrentTab:()=>L,getLocalSortId:()=>R,getPinnedMessage:()=>q,getRecommendedConvoList:()=>j,getTab:()=>p,getTabSafe:()=>S,hasUnreadReactionsBadge:()=>v,isBusinessNotifyPeer:()=>B,isBusinessNotifyTab:()=>H,isCasperChatTab:()=>D,isChannelPeer:()=>U,isChatActive:()=>Y,isChatConvo:()=>f,isChatConvoWithDetails:()=>I,isClosedChat:()=>G,isCommunityChat:()=>F,isCommunityChatDeleted:()=>P,isContactConvo:()=>A,isConvoBusinessNotifyEnabled:()=>z,isFullyLoadedTab:()=>m,isMutedConvo:()=>w,isPinnedMessageHidden:()=>K,isRecommendedConvo:()=>W,isServiceChatTab:()=>x,isTabMarkedUnread:()=>N,isUnreadWithExpiring:()=>ee,isUnreadWithMentions:()=>X,isUserConvo:()=>h,isUserEmptyScreenRich:()=>Z,isVKAgentPeer:()=>O,shouldUseReactionsShortPolling:()=>C,tabIsArchived:()=>k,tabIsBusinessNotification:()=>T,tabIsMessageRequest:()=>b,tabIsNotImportantMessageRequest:()=>M});var o=n(434788),i=n(705758),a=n(728785),s=n(502478),r=n(755320),c=n(568012),u=n(832468),l=n(49988),_=n(931917),d=n(783400),g=n(839470);function m(e,t){var n,o;const i=p(e,t);return!(void 0===(null==(n=i)?void 0:n.history)||!(null==(o=i)?void 0:o.msgs))}function p(e,t){const n=(0,i.unpackStore)(e);return n.tabs&&n.tabs[t]}function v(e,t){const n=p(e,t);if(!n)return!1;const o=(0,s.getUnreadReactions)(e,t);return!X(n)&&!ee(n)&&!!o.size}function C(e){return!!e.short_poll_reactions}function f(e){return _.Ranges.isChatOrChannelPeer(e.peerId)}function h(e){return _.Ranges.isUserIdTransitional(e.peerId)&&!_.Ranges.isContactId(e.peerId)}function A(e){return _.Ranges.isContactId(e.peerId)}function I(e){return _.Ranges.isChatOrChannelPeer(e.peerId)&&!!e.notifications}const E=0;function S(e,t){return p(e,void 0===t?E:t)}function L(e){return p(e,(0,s.getPeer)(e))}function N(e){return!!(e.folders&&e.folders&a.FOLDER_MASKS[a.FOLDER_MARKED_UNREAD])}function b(e){return Boolean(e.is_message_request||e.folders&&e.folders&a.FOLDER_MASKS[a.ConvoListFolder.MR]||e.folders&&e.folders&a.FOLDER_MASKS[a.FOLDER_MESSAGE_REQUEST_REJECTED])}function T(e){return!!(e.folders&&e.folders&a.FOLDER_MASKS[a.FOLDER_BUSINESS_NOTIFY])}function M(e){return Boolean(b(e)&&e.folders&&e.folders&a.FOLDER_MASKS[a.FOLDER_NOT_IMPORTANT_MESSAGE_REQUEST])}function k(e){return!!(e.folders&&e.folders&a.FOLDER_MASKS[a.FOLDER_ARCHIVE])}function R(e,t){const n=e.get().msg_local_ids_sort,o=n&&t.lastmsg&&n[t.lastmsg]||0;return o>0?2e9+o:t.minor_sort_id||0}function O(e){return 333==+e}function w(e,t){return!!e.mutedPeers&&e.mutedPeers.includes(t)}function y(e,t){return((e&&e.data&&e.data.flags||0)&t)>0}function U(e){return f(e)&&y(e,c.MAIL_CHAT_FLAG_IS_FAKE_CHANNEL)}function F(e){return f(e)&&y(e,c.MAIL_CHAT_FLAG_IS_COMMUNITY_CHAT)}function P(e){return f(e)&&y(e,c.MAIL_CHAT_FLAG_IS_COMMUNITY_CHAT_DELETED)}function D(e){return f(e)&&y(e,c.MAIL_CHAT_FLAG_IS_CASPER)}function H(e){return f(e)&&y(e,c.MAIL_CHAT_FLAG_IS_BUSINESS_NOTIFY)}function B(e,t){var n;return!!(null==(n=(0,i.unpackStore)(e).dialog_tabs[a.ConvoListFolder.BUSINESS_NOTIFY])?void 0:n.includes(t))}function G(e){return f(e)&&y(e,c.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE)}function x(e){return f(e)&&y(e,c.MAIL_CHAT_FLAG_SERVICE_CHAT)}function V(e){const t=!!e.offset||!!e.lastmsg;return!(100==+e.peerId||window.vk.id===e.peerId||_.Ranges.isContactId(e.peerId)||D(e))&&t&&!b(e)}function Y(e){return!e.data.closed&&!e.data.kicked}function K(e){const t=e.pinned&&(0,l.parseMessage)(e.pinned);return!!t&&e.pinHideId===t.chat_local_id}function j(e){return(0,i.unpackStore)(e).recommendationList}function W(e,t){const n=(0,i.unpackStore)(e).recommendationList;return Boolean(n&&n.item_data[t])}function z(e){return!!e.can_send_business_notify}function Z(e,t){const n=(0,i.unpackStore)(e),o=p(n,t);return _.Ranges.isUserIdTransitional(t)&&!_.Ranges.isContactId(t)&&!(0,u.isDialogWithYourself)(n.id,t)&&!(0,s.isCommunityInterface)(n)&&!(o&&function(e){return!!h(e)&&Boolean(e.is_deleted)}(o))}function q(e){return e&&f(e)&&e.pinned?(0,l.parseMessage)(e.pinned):null}function $(e,t){const n=(0,i.unpackStore)(e),o=!!t.offset||!!t.lastmsg;return!(0,s.isCommunityInterface)(n)&&o&&!D(t)&&!b(t)&&!k(t)}function Q(e,t){const n=(0,i.unpackStore)(e),c=n.active_tab,l=(0,u.getConvoInlineMenuActionData)(t,(0,s.isCommunityInterface)(e)),_=[];switch(c){case a.ConvoListFolder.ALL:case a.ConvoListFolder.UNREAD:case a.ConvoListFolder.ARCHIVE:V(t)&&_.push(k(t)?a.ConvoAction.UNARCHIVE:a.ConvoAction.ARCHIVE),$(e,t)&&_.push((0,r.isPinnedSortId)(t.major_sort_id||0)?a.ConvoAction.UNPIN_CONVO:a.ConvoAction.PIN_CONVO),_.push(w(n,t.peerId)?a.ConvoAction.UNMUTE:a.ConvoAction.MUTE),_.push(a.ConvoAction.CLEAR),f(t)&&Y(t)&&_.push(a.ConvoAction.LEAVE);break;case a.ConvoListFolder.BUSINESS_NOTIFY:_.push(w(n,t.peerId)?a.ConvoAction.UNMUTE:a.ConvoAction.MUTE),_.push(a.ConvoAction.LEAVE)}return _.map((e=>(0,o._)({},l[e],{action:e})))}function J(e,t){const n=(0,i.unpackStore)(e),o=n.tabs[t].msgs||{},a=Object.values(o).reduce(((e,o)=>{const i=Array.isArray(o)?o[8]:o.chat_local_id;return[...(0,d.getMessageReactedPeerIds)(n,t,i),...e]}),[]);return[...new Set(a)]}function X(e){return(0,g.partConfigEnabled)("me_web_read_by_cmid")?!(!e.mention_cmids||!e.mention_cmids.length):!(!e.mentions||!e.mentions.length)}function ee(e){return(0,g.partConfigEnabled)("me_web_read_by_cmid")?!(!e.expiring_cmids||!e.expiring_cmids.length):!(!e.expiring_messages||!e.expiring_messages.length)}},783400:(e,t,n)=>{n.d(t,{canMessageBeEdited:()=>Y,canSendReactions:()=>K,getLastMessage:()=>C,getLastMeta:()=>f,getLocalId:()=>h,getMessage:()=>d,getMessageAdminId:()=>L,getMessageByCmid:()=>g,getMessageReactedPeerIds:()=>X,getMessageReactions:()=>Q,getMessageTTL:()=>q,getMessageUserId:()=>S,getMyReaction:()=>J,getPreviousMessage:()=>E,hasForwards:()=>x,hasReply:()=>G,isActiveGroupCallMessage:()=>D,isAppAction:()=>b,isAudioMsg:()=>M,isCallMessage:()=>P,isCasperMessage:()=>U,isExistingRid:()=>v,isExpiredCasperMessage:()=>$,isGift:()=>R,isGraffiti:()=>T,isImportant:()=>V,isMessageEmpty:()=>Z,isMessageStored:()=>m,isMessageToBlockedCommunity:()=>z,isMessageWithUGCSticker:()=>ee,isMoney:()=>O,isMoneyRequest:()=>w,isNewStack:()=>W,isOutbound:()=>A,isServiceMsg:()=>I,isSticker:()=>k,isUnread:()=>H,isVKPay:()=>y,isVoiceMessageListened:()=>p,isWidgetMessage:()=>F,shiftDate:()=>j,wasEdited:()=>B});var o=n(835200),i=n(552666),a=n(408014),s=n(49988),r=n(47095),c=n(502478),u=n(672948),l=n(839470),_=n(610812);function d(e,t,n){var o,i;const r=null==(i=(0,a.getTab)(e,t))||null==(o=i.msgs)?void 0:o[n];return r?(0,s.parseMessage)(r):null}function g(e,t,n){var o;const i=(0,a.getTab)(e,t);if(!(null==(o=i)?void 0:o.msgs))return null;const r=Object.values(i.msgs).find((e=>(0,s.parseMessage)(e).chat_local_id===n));return r?(0,s.parseMessage)(r):null}function m(e,t,n){var o,i;return!!(null==(i=(0,a.getTab)(e,t))||null==(o=i.msgs)?void 0:o[n])}function p(e){return Boolean(e.flags&o.FLAG_AUDIO_MESSAGE_LISTENED)}function v(e,t,n){var o;const i=(0,a.getTab)(e,t);if(!(null==(o=i)?void 0:o.msgs))return!1;return!!Object.keys(i.msgs).find((o=>{var i;return(null==(i=d(e,t,+o))?void 0:i.randomId)===n}))}function C(e,t,n){const i=(0,a.getTab)(e,t);if(!i||!i.msgs)return;const r=n?d(e,t,n):void 0,c=Object.keys(e.msg_local_ids_sort||{}).length>1?Object.values(i.msgs).sort(((t,n)=>{const{messageId:o}=(0,s.parseMessage)(t),{messageId:i}=(0,s.parseMessage)(n);return h(e,o)-h(e,i)})):Object.values(i.msgs);if(!r)return(0,s.parseMessage)(c[c.length-1]);const u=r.local;for(let t=c.length-1;t>=0;t--){const n=(0,s.parseMessage)(c[t]),i=n.local&&n.type!==o.EDIT_MESSAGE;if(!u&&i)continue;if(u&&!i||h(e,r.messageId)>h(e,n.messageId))return n}}function f(e,t){var n;const o=null==(n=(0,a.getTab)(e,t))?void 0:n.lastmsg_meta;if(o)return Array.isArray(o)?(0,_.getMessageFromTuple)(o):o}function h(e,t){const n=(0,i.unpackStore)(e),o=n.msg_local_ids_sort&&n.msg_local_ids_sort[t];return void 0!==o?2e9+o:t}function A(e){return!!(e.flags&o.FLAG_OUTBOUND)}function I(e){return e.kludges&&void 0!==e.kludges.source_act}function E(e,t,n){const o=(0,a.getTab)(e,t);if(!o||!o.msgs)return null;const i=Object.keys(o.msgs).sort(((e,t)=>+e-+t));if(!i)return null;const s=i&&i.indexOf(""+n);if(-1===s)return null;return d(e,t,i[s-1])}function S(e,t){return A(t)?e.viewer_id:t.userId}function L(e,t){const n=(0,i.unpackStore)(e);return n.gid&&A(t)?Number(t.kludges.from_admin)||-n.gid:0}function N(e,t,n){const o=e.attaches[0];return!!o&&(o.type===t||void 0!==n&&o.type===n)}function b(e){return N(e,"app_action")}function T(e){return N(e,"doc")&&"graffiti"===e.attaches[0].kind}function M(e){return Boolean(e.attaches.find((e=>"doc"===e.type&&("audiomsg"===e.kind||"audio_message"===e.kind))))}function k(e){return Boolean(e.attaches.find((e=>"sticker"===e.type||"ugc_sticker"===e.type)))}function R(e){return N(e,"gift")}function O(e){return N(e,"money_transfer","money_request")}function w(e){return N(e,"money_request")}function y(e){return N(e,"link","vkpay")&&!!e.kludges.attach1_app_id&&6217559==e.kludges.attach1_app_id}function U(e){return Boolean(e.kludges.is_expired||e.kludges.expire_ttl||e.kludges.ttl&&e.flags&o.FLAG_DELETE_BY_TTL)}function F(e){var t;return null==(t=e.attaches)?void 0:t.some((e=>"widget"===e.type))}function P(e){return e.kludges&&e.kludges.attach1_type===r.AttachmentType.CALL}function D(e){return e&&e.attaches&&e.attaches[0]&&"group_call_in_progress"===e.attaches[0].type}function H(e,t){return"number"!=typeof t.messageId||((0,l.partConfigEnabled)("me_web_read_by_cmid")?A(t)?t.chat_local_id>(e.out_up_to_cmid||0):t.chat_local_id>(e.in_up_to_cmid||0):A(t)?t.messageId>(e.out_up_to||0):t.messageId>(e.in_up_to||0))}function B(e){return e.update_time>0}function G(e){const t=e.attaches.filter((e=>"mail"===e.type)).length>0;return!!(e.attaches.filter((e=>"reply"===e.type)).length>0||e.flags&o.FLAG_HAS_REPLY&&t)}function x(e){return e.attaches.some((e=>"mail"===e.type&&e.object.fwd_count>0))&&!(e.flags&o.FLAG_HAS_REPLY)}function V(e){return Boolean(e.flags&o.FLAG_IMPORTANT)}function Y(e,t){const n=(0,s.parseMessage)(t),o=(0,i.unpackStore)(e),r=(0,a.getTab)(o,n.peerId);if(r&&(0,a.isChatConvo)(r)&&!(0,a.isChatActive)(r))return!1;const c=o.viewer_id==n.peerId&&!o.gid,{messageEditAllowedTime:u,pinEditDelayTime:l,isPinEditEnabled:_}=o.pinMessageEditSettings,d=Date.now()/1e3,g=r&&(0,a.getPinnedMessage)(r),m=g&&g.messageId===n.messageId,p=n.kludges&&n.kludges.pinned_at,v=d-n.date>u,C=p&&d-p<l;if((0,a.isVKAgentPeer)(n.peerId))return!1;if(!c&&!A(n))return!1;if(I(n))return!1;if(R(n)||k(n)||M(n)||T(n)||O(n)||y(n)||P(n)||U(n)||function(e){return N(e,"widget")}(n)||b(n))return!1;if(function(e,t,n){const o=(0,i.unpackStore)(e),s=(0,a.getTab)(o,t);if(s){return(s.deleted||[]).includes(n)}return!1}(e,n.peerId,n.messageId))return!1;if(c)return!0;if(m&&v&&_){if(C)return!1}else if(v)return!1;return!0}function K(e,t){const n=(0,a.getTab)(e,t.peerId);return!(!n||!(0,l.partConfigEnabled)("messages_reactions")||(0,a.tabIsMessageRequest)(n)||(0,a.isChatConvo)(n)&&!(0,a.isChatActive)(n)||n.block_error&&n.block_error>0||(0,a.isContactConvo)(n))}function j(e,t){return 1e3*t+1e3*e.timeshift}function W(e,t,n,o,i=!1){if(S(o,t)!==S(o,n))return!0;const a=j(o,t.date),s=j(o,n.date);if(!(0,u.isSameDate)(a,s))return!0;if((0,c.isCommunityInterface)(o)&&Number(t.kludges.from_admin)!==Number(n.kludges.from_admin))return!0;if(n.date-t.date>300)return!0;if(I(t)||I(n))return!0;const r=U(t),l=U(n);if(r!==l)return!0;const _=t.kludges.is_expired,d=n.kludges.is_expired;if(r&&l&&_!==d)return!0;if(r&&l&&!_&&!d)return!0;if(r&&l&&_&&d)return!1;if(P(n)||P(t))return!0;if(D(n)||D(t))return!0;if(R(t)||R(n))return!0;if(T(t)||T(n))return!0;if(G(n))return!0;const g=!o.gid&&e.peerId===o.viewer_id;return!(H(e,t)===H(e,n)||!i||A(n)||g)}function z(e,t){return!(!e.blocked_community||!A(t))}function Z(e){return Number(e.messageId)<=0}function q(e){const t=e.kludges.ttl||e.kludges.expire_ttl;return t?Number(t):void 0}function $(e){return!(!e.kludges||!e.kludges.is_expired)}function Q(e,t,n){var o;return(null==(o=g(e,t,n))?void 0:o.kludges.reactions)||[]}function J(e,t,n){var o;return null==(o=g(e,t,n))?void 0:o.kludges.reaction_id}function X(e,t,n){var o,i;return(null==(i=g(e,t,n))||null==(o=i.kludges.reactions)?void 0:o.map((({user_ids:e})=>e||[])).flat())||[]}function ee(e,t){const n=d(e,(0,c.getPeer)(e),t);return!!n&&n.kludges.attach1_type===r.AttachmentType.UGC_STICKER}},823826:(e,t,n)=>{n.d(t,{oCacheExists:()=>i,oCacheGet:()=>a});var o=n(705758);function i(e,t){return t in(0,o.unpackStore)(e).oCache}function a(e,t){const n=(0,o.unpackStore)(e).oCache[t];return n&&!n._n&&(!function(e){if(!e.first_name){const t=e.name.split(" ",2);e.first_name=t[0],e.short_name=t[1]?t[0]+" "+t[1].substr(0,1)+".":t[0]}e.inv_name||(e.inv_name=e.name),e.kick_name||(e.kick_name=e.inv_name)}(n),n._n=1),n}},502478:(e,t,n)=>{n.d(t,{getActionCallbackTimeout:()=>I,getEmojiOptId:()=>S,getGroupId:()=>c,getKeyboardAppHash:()=>A,getLocalSettingsValue:()=>f,getPeer:()=>_,getPendingReadReactionsCmids:()=>p,getPressedButtonState:()=>h,getReactionData:()=>T,getTabCmidToMessageIdMap:()=>C,getUnreadCount:()=>d,getUnreadCountNotMuted:()=>g,getUnreadCountWithMuted:()=>m,getUnreadReactions:()=>v,isBusinessNotifyEnabled:()=>b,isClassicInterface:()=>L,isCommunityInterface:()=>u,isLastMsgDebugEnabled:()=>r,isRecommendationListRerenderNeeded:()=>E,isReversedConvoOrder:()=>l,isSearchView:()=>N});var o=n(705758),i=n(728785),a=n(931917),s=n(408014);function r(e){return(0,o.unpackStore)(e).isLastMsgFalseDebugger}function c(e){return(0,o.unpackStore)(e).gid}function u(e){return!!c(e)}function l(e){const t=(0,o.unpackStore)(e);return!!u(e)&&((19542789===t.gid||103416369===t.gid)&&(t.active_tab===i.ConvoListFolder.UNRESPOND||t.active_tab===i.ConvoListFolder.UNREAD))}function _(e){return(0,o.unpackStore)(e).peer}function d(e){const t=(0,o.unpackStore)(e);return t.settings.show_only_not_muted_messages?t.unread_counters.countNotMuted:t.unread_counters.count}function g(e){return(0,o.unpackStore)(e).unread_counters.countNotMuted}function m(e){return(0,o.unpackStore)(e).unread_counters.count}function p(e,t){var n;const i=(0,o.unpackStore)(e);if(a.Ranges.isZeroOwner(t))return new Set;return(null==(n=i.pendingReadReactionsCmids)?void 0:n.get(t))||new Set}function v(e,t){const n=(0,o.unpackStore)(e),i=(0,s.getTab)(n,t);if(a.Ranges.isZeroOwner(t)||!i)return new Set;const r=p(n,t),c=(i.unread_reaction_cmids||[]).filter((e=>!r.has(e)));return new Set(c)}function C(e,t){return(0,o.unpackStore)(e).cmidToMessageIdMap.get(t)||new Map}function f(e,t){return(0,o.unpackStore)(e).settings[t]}function h(e,t){const n=(0,o.unpackStore)(t),i=_(t),a=n.callbackEventButtons.get(i);return a?a.get(e):void 0}function A(e){return(0,o.unpackStore)(e).keyboard_app_hash}function I(e){return(0,o.unpackStore)(e).callbackActionTimeout}function E(e){return(0,o.unpackStore)(e).isRecommendationListRerenderNeeded}function S(e){return(0,o.unpackStore)(e).emojiOptId}function L(e){const t=(0,o.unpackStore)(e);return Boolean(t.gid||t.isClassic)}function N(e){const t=(0,o.unpackStore)(e);return Boolean(t.searchText||t.recentSearch)}function b(e){return!!(0,o.unpackStore)(e).isBusinessNotifyEnabled}function T(e,t){return(0,o.unpackStore)(e).reactions.get(t)}},300069:(e,t,n)=>{n.d(t,{addEmptyScreenUserInfo:()=>f,addToUnreadCounter:()=>_,setActionCallbackTimeout:()=>v,setChatList:()=>u,setLocalSettingsValue:()=>d,setMessageReactions:()=>h,setMyMessageReaction:()=>A,setPendingReadReactionsCmids:()=>g,setPressedCallbackButton:()=>m,setUnreadCounters:()=>l,unsetActionCallbackTimeout:()=>C,unsetPressedCallbackButton:()=>p,updateBlockStates:()=>c});var o=n(434788),i=n(728785),a=n(502478),s=n(783400),r=n(408014);function c(e,t){return t.block_states=(0,o._)({},t.block_states,e),Promise.resolve(t)}function u(e,t){return e.chatList=t,Promise.resolve(e)}function l(e,t){var n,o,s,r;const{count:c,countNotMuted:u,businessNotifyUnread:l=0,archiveUnreadCount:_,archiveUnreadUnmutedCount:d,archiveMentionsCount:g}=e;var m,p;return t.unread_counters={count:c,countNotMuted:u},t.dialog_tab_cts[i.ConvoListFolder.UNREAD]={total:(0,a.getUnreadCount)(t),unread:c,unreadNotMuted:u},t.dialog_tab_cts[i.ConvoListFolder.BUSINESS_NOTIFY]={total:Math.max(null!=(m=null==(o=t.dialog_tab_cts)||null==(n=o[i.ConvoListFolder.BUSINESS_NOTIFY])?void 0:n.total)?m:0,l),unread:l},t.dialog_tab_cts[i.ConvoListFolder.ARCHIVE]={total:Math.max(null!=(p=null==(r=t.dialog_tab_cts)||null==(s=r[i.ConvoListFolder.ARCHIVE])?void 0:s.total)?p:0,_),unread:_,unreadNotMuted:d,mentions:g},Promise.resolve(t)}function _(e,t,n){const o=Math.max(0,(0,a.getUnreadCountNotMuted)(n)+e),i=Math.max(0,(0,a.getUnreadCountWithMuted)(n)+e);return n.mutedPeers.includes(t)||(n.unread_counters.countNotMuted=o),n.unread_counters.count=i,Promise.resolve(n)}function d(e,t,n){return n.settings[e]=t,Promise.resolve(n)}function g(e,t,n){return t.length?n.pendingReadReactionsCmids.set(e,new Set(t)):n.pendingReadReactionsCmids.delete(e),Promise.resolve(n)}function m({peerId:e,eventId:t},n,o){o.callbackEventButtons.has(e)||o.callbackEventButtons.set(e,new Map);const i=o.callbackEventButtons.get(e);return i&&i.set(t,n),Promise.resolve(o)}function p({peerId:e,eventId:t},n){const o=n.callbackEventButtons?n.callbackEventButtons.get(e):void 0;if(!o)return Promise.resolve(n);const i=o.get(t);return i&&clearTimeout(i.timeout),o.delete(t),o.size||n.callbackEventButtons.delete(e),Promise.resolve(n)}function v(e,t){return t.callbackActionTimeout=e,Promise.resolve(t)}function C(e){return clearTimeout(e.callbackActionTimeout),e.callbackActionTimeout=void 0,Promise.resolve(e)}function f(e,t,n){var o,i,a;n.emptyScreenUserInfo||(n.emptyScreenUserInfo={});const[s,...r]=t;if(!s)return;const c=r.map((e=>({name:e.first_name||"",photo:e.photo})));n.emptyScreenUserInfo[e]={bdate:s.bdate,occupation:null==(o=s.occupation)?void 0:o.name,occupationType:null==(i=s.occupation)?void 0:i.type,city:null==(a=s.city)?void 0:a.title,commonCount:s.common_count,canWrite:s.can_write_private_message,mutualFriends:c}}function h(e,t,n,o){var i,a;const c=(0,s.getMessage)(e,t,n),u=(0,r.getTab)(e,t);if(!c||!(null==(i=u)?void 0:i.msgs))return Promise.resolve(e);const l=(null==(a=c.kludges.reactions)?void 0:a.map((e=>e.reaction_id)).reverse())||[];return o.sort(((e,t)=>l.indexOf(t.reaction_id)-l.indexOf(e.reaction_id))),c.kludges.reactions=o,u.msgs[n]=c,Promise.resolve(e)}function A(e,t,n,o){var i;const a=(0,s.getMessage)(e,t,n),c=(0,r.getTab)(e,t);return a&&(null==(i=c)?void 0:i.msgs)?(o?a.kludges.reaction_id=o:delete a.kludges.reaction_id,c.msgs[n]=a,Promise.resolve(e)):Promise.resolve(e)}},728785:(e,t,n)=>{n.d(t,{CONTROLLER:()=>a,ConvoAction:()=>E,ConvoListFolder:()=>c,FAVORITES_ICON_URL:()=>s,FOLDER_ALL:()=>u,FOLDER_ARCHIVE:()=>h,FOLDER_BUSINESS_NOTIFY:()=>f,FOLDER_IMPORTANT:()=>l,FOLDER_MARKED_UNREAD:()=>_,FOLDER_MASKS:()=>A,FOLDER_MESSAGE_REQUEST:()=>d,FOLDER_MESSAGE_REQUEST_REJECTED:()=>g,FOLDER_NOT_IMPORTANT_MESSAGE_REQUEST:()=>C,FOLDER_PEER_TAGS:()=>v,FOLDER_UNREAD:()=>m,FOLDER_UNRESPOND:()=>p,FolderAction:()=>S,MENTION_RAW:()=>i,SENDING_ICON_TIMEOUT:()=>r});var o=n(839470);const i=/(^|[\s.,:\'\";>\)\(])(\*|@)([A-Za-z0-9_\.]{2,32})\s*\((.+?)\)/g,a="al_im.php",s="/images/icons/im_favorites_100.png",r=2e3;var c;!function(e){e.ALL="all",e.IMPORTANT="important",e.MR="mr",e.UNREAD="unread",e.UNRESPOND="unrespond",e.AD_TAG="ad_tag",e.BUSINESS_NOTIFY="business_notify",e.ARCHIVE="archive",e.PEER_TAGS="custom_tag"}(c||(c={}));const u="all",l="important",_="marked_unread",d="mr",g="mr_rejected",m="unread",p="unrespond",v="custom_tag",C="mr_not_important",f="business_notify",h="archive",A={unrespond:2,important:1,mr:256,business_notify:8192,archive:1<<23,[g]:512,ad_tag:32768,[_]:1<<20};var I,E,S;(0,o.partConfigEnabled)("test_folder_masks")&&(A[C]=1<<22),function(e){e.USER="user",e.COMMUNITY="community",e.CHAT="chat",e.CHANNEL="channel",e.MR="mr",e.CHAT_MR="chat_mr",e.EMAIL="email",e.CONTACT="contact",e.BUSINESS_NOTIFY="business_notify"}(I||(I={})),function(e){e.SETTINGS="settings",e.BLOCK="block",e.CHAT_INVITE="chat_invite",e.USER_INVITE="user_invite",e.CREATE_CHAT="create_chat",e.MEDIA="media",e.SEARCH="search",e.PIN_HIDE="pin_hide",e.PIN_UNHIDE="pin_unhide",e.UNPIN="unpin",e.MUTE="mute",e.UNMUTE="unmute",e.CLEAR="clear",e.LEAVE="leave",e.RETURN="return",e.BLOCK_COMMUNITY="block_community",e.ALLOW_COMMUNITY="allow_community",e.BLOCK_NOTIFY="block_notify",e.CALL_AUDIO="call_audio",e.CALL_VIDEO="call_video",e.CALL_APP="call_app",e.UNREAD="unread",e.PIN_CONVO="pin_convo",e.UNPIN_CONVO="unpin_convo",e.CALL_BY_NAME="call_by_name",e.ENABLE_BUSINESS_NOTIFY="enable_business_notify",e.DISABLE_BUSINESS_NOTIFY="disable_business_notify",e.BUSINESS_NOTIFY="business_notify",e.ARCHIVE="archive",e.UNARCHIVE="unarchive",e.ADD_FRIEND="add_friend",e.BLOCK_USER="block_user",e.UNBLOCK_USER="unblock_user",e.REPORT_USER="report_user",e.CALL_FINISH="call_finish",e.REPORT_UGC_STICKER="report_ugc_sticker"}(E||(E={})),function(e){e.SHOW="show"}(S||(S={}))},832468:(e,t,n)=>{n.d(t,{getContactPeerId:()=>M,getConvoActionData:()=>U,getConvoInfoFromLocalIndex:()=>k,getConvoInlineMenuActionData:()=>F,getDataForChatMemberGrid:()=>O,getEmptyScreenUserInfo:()=>D,getFilterFnForConvoListFolder:()=>R,isDialogWithYourself:()=>P,mergeConvoLists:()=>N,normalizeTab:()=>T,normalizeTabsGotFromServer:()=>b,sortFn:()=>w});var o=n(434788),i=n(552666),a=n(408014),s=n(502478),r=n(47304),c=n(823826),u=n(728785),l=n(839470),_=n(29271),d=n(214472),g=n(746677),m=n(574714),p=n(491188),v=n(947092),C=n(703689),f=n(137779),h=n(329082),A=n(783905),I=n(579739),E=n(636274),S=n(301522),L=n(931917);function N(e,t,n){const o=e.reduce(((e,t)=>(e.set(t.peerId,!0),e)),new Map),i=n||(()=>!0);return[...e,...t.filter((e=>!o.has(e.peerId)&&i(e)))]}function b(e,t){for(let n in t)t.hasOwnProperty(n)&&T(e,t[n])}function T(e,t){var n;const i=(0,c.oCacheGet)(e,t.peerId),u=(0,a.getTab)(e,t.peerId),l=t.lastmsg;if(i&&(t.photo=t.photo||i.photo,t.name=t.name||i.name,t.href=t.href||i.link,t.sex=t.sex||i.sex),t.last_touched=(null==(n=u)?void 0:n.last_touched)||0,t.verified=!!t.verified,t.lastmsg=l||t.lastmsg_meta&&t.lastmsg_meta[0]||!1,(0,s.isLastMsgDebugEnabled)(e)&&(l||t.lastmsg_meta&&t.lastmsg_meta[0])&&!1===t.lastmsg&&(console.log((0,o._)({},t)),(0,r.showDebugAlert)()),t.folders=t.folders||null,t.unread=t.unread||0,t.online=t.online||0,t.is_new=!!t.is_new,t.out_up_to=null!=t.out_up_to?t.out_up_to:t.in_up_to||0,t.out_up_to_cmid=null!=t.out_up_to_cmid?t.out_up_to_cmid:t.in_up_to_cmid||0,L.Ranges.isUserIdTransitional(t.peerId)){var _,d;const e=t.last_seen;t.online=e&&(null==(_=e)?void 0:_.platform)||0,t.is_nft_photo=t.is_nft_photo||(null==(d=i)?void 0:d.is_nft_photo)||!1,t.last_seen=t.last_seen||{platform:0,time:0,mobile:0,can_see:0}}var g;L.Ranges.isChatOrChannelPeer(t.peerId)&&(t.memberIds=t.memberIds||(null==(g=u)?void 0:g.memberIds)||null);return t}function M(e){return e+19e8}function k(e){const t={peerId:e[0],name:e[1],tab:e[1],photo:e[2],href:e[3],online:e[4],is_friend:e[5],local_index:!0};return e[6]&&(t.data={flags:e[6]}),t}function R(e){switch(e){case u.ConvoListFolder.ALL:return e=>!(((0,l.partConfigEnabled)("simplified_start_conversation")?(0,a.tabIsNotImportantMessageRequest)(e):(0,a.tabIsMessageRequest)(e))||(0,a.tabIsBusinessNotification)(e)||(0,a.tabIsArchived)(e));case u.ConvoListFolder.UNREAD:return e=>!(0,a.tabIsMessageRequest)(e)&&!(0,a.tabIsBusinessNotification)(e)&&!(0,a.tabIsArchived)(e)&&(e.unread&&e.unread>0||(0,a.isTabMarkedUnread)(e));case u.ConvoListFolder.MR:return e=>(0,l.partConfigEnabled)("simplified_start_conversation")?(0,a.tabIsNotImportantMessageRequest)(e):(0,a.tabIsMessageRequest)(e);case u.ConvoListFolder.BUSINESS_NOTIFY:return a.tabIsBusinessNotification;case u.ConvoListFolder.ARCHIVE:return a.tabIsArchived;default:return t=>t.folders&&t.folders&u.FOLDER_MASKS[e]}}function O(e,t,n){const o=t.data.active.slice(0,4).map((t=>(0,c.oCacheGet)(e,t))).filter((e=>!!e));return[o.map((e=>e.photo)),n?o.map((e=>e.link)):[]]}function w(e,t,n){const o=t.lastmsg&&t.major_sort_id||0,i=n.lastmsg&&n.major_sort_id||0;let r=o!==i?i-o:(0,a.getLocalSortId)(e,n)-(0,a.getLocalSortId)(e,t);return(0,s.isReversedConvoOrder)(e)?-r:r}function y(e){return e.is_subscribed_to_me?_.getLang("mail_im_add_to_friends_accept"):e.is_subscribe_button?_.getLang("mail_follow_to_friend"):_.getLang("mail_im_add_to_friends")}function U(e,t){const n=(0,a.isChannelPeer)(e);return{[u.ConvoAction.SEARCH]:{icon:"search",name:_.getLang("mail_im_peer_search")},[u.ConvoAction.BLOCK_COMMUNITY]:{icon:"block",name:_.getLang("mail_block_comm_messages")},[u.ConvoAction.BLOCK_NOTIFY]:{icon:"block",name:_.getLang("mail_block_notify_messages")},[u.ConvoAction.ALLOW_COMMUNITY]:{icon:"unblock",name:_.getLang("mail_allow_comm_messages")},[u.ConvoAction.CLEAR]:{icon:"clear",name:L.Ranges.isEmailId(e.peerId)?_.getLang("mail_im_delete_email_contact"):_.getLang("mail_im_delete_all_history")},[u.ConvoAction.MUTE]:{icon:"mute",name:_.getLang("mail_im_mute")},[u.ConvoAction.PIN_CONVO]:{icon:"pin_convo",name:_.getLang("mail_pin_chat")},[u.ConvoAction.UNPIN_CONVO]:{icon:"unpin_convo",name:_.getLang("mail_unpin_chat")},[u.ConvoAction.UNMUTE]:{icon:"unmute",name:_.getLang("mail_im_unmute")},[u.ConvoAction.MEDIA]:{icon:"media",name:t?_.getLang("mail_im_show_media_history_group"):_.getLang("mail_im_show_media_history")},[u.ConvoAction.BLOCK]:{icon:"block",name:_.getLang("mail_block_user")},[u.ConvoAction.CHAT_INVITE]:{icon:"add",name:_.getLang("mail_im_create_chat_with")},[u.ConvoAction.USER_INVITE]:{icon:"invite",name:L.Ranges.isUserIdTransitional(e.peerId)&&1===e.canBeAddedToChat?_.getLang("mail_im_add_to_chat"):_.getLang("mail_im_invite_to_chat")},[u.ConvoAction.ADD_FRIEND]:{icon:e.is_subscribe_button?"subscribe_friend":"add_friend",name:y(e),iconHtml:e.is_subscribe_button?`<div class="ui_actions_menu_item_follow-icon">${(0,d.getIcon20AddSquareOutline)().icon}</div>`:""},[u.ConvoAction.CREATE_CHAT]:{icon:"invite",name:_.getLang("mail_im_create_chat_with")},[u.ConvoAction.LEAVE]:{icon:"leave",name:(0,a.isBusinessNotifyTab)(e)?_.getLang("mail_delete"):n?_.getLang("mail_leave_channel"):_.getLang("mail_leave_chat")},[u.ConvoAction.RETURN]:{icon:"return",name:n?_.getLang("mail_return_to_vkcomgroup"):_.getLang("mail_return_to_chat")},[u.ConvoAction.PIN_HIDE]:{icon:"pin_hide",name:_.getLang("mail_menu_pin_hide")},[u.ConvoAction.PIN_UNHIDE]:{icon:"pin_unhide",name:_.getLang("mail_menu_pin_show")},[u.ConvoAction.UNPIN]:{icon:"unpin",name:_.getLang("mail_menu_unpin")},[u.ConvoAction.SETTINGS]:{icon:"settings",name:n?_.getLang("mail_vkcomgroup_settings"):_.getLang("mail_settings")},[u.ConvoAction.CALL_AUDIO]:{icon:"call_audio",name:_.getLang("mail_im_call_audio")},[u.ConvoAction.CALL_VIDEO]:{icon:"call_video",name:_.getLang("mail_im_call_video")},[u.ConvoAction.CALL_APP]:{icon:"call_app",name:_.getLang("mail_im_call_app")},[u.ConvoAction.UNREAD]:{icon:"unread",name:_.getLang("mail_menu_mark_unread")},[u.ConvoAction.CALL_BY_NAME]:{icon:"call_by_name",name:_.getLang("mail_im_call_by_name")},[u.ConvoAction.ENABLE_BUSINESS_NOTIFY]:{icon:"notify",name:_.getLang("mail_im_enable_business_notify")},[u.ConvoAction.DISABLE_BUSINESS_NOTIFY]:{icon:"disable",name:_.getLang("mail_im_disable_business_notify")},[u.ConvoAction.ARCHIVE]:{icon:"archive",name:_.getLang("mail_im_archive")},[u.ConvoAction.UNARCHIVE]:{icon:"unarchive",name:_.getLang("mail_im_unarchive")},[u.ConvoAction.BUSINESS_NOTIFY]:{icon:"business_notify",name:_.getLang("mail_im_business_notify")},[u.ConvoAction.REPORT_USER]:{icon:"spam",name:_.getLang("mail_report_user")},[u.ConvoAction.BLOCK_USER]:{icon:"block",name:_.getLang("mail_block_user")},[u.ConvoAction.UNBLOCK_USER]:{icon:"unblacklist",name:_.getLang("mail_user_unblacklist")},[u.ConvoAction.CALL_FINISH]:{icon:"call_finish",name:_.getLang("calls_im_call_finish")},[u.ConvoAction.REPORT_UGC_STICKER]:{icon:"report",name:_.getLang("mail_im_report_ugc_sticker")}}}function F(e,t){const n=U(e,t);return[[u.ConvoAction.ARCHIVE,(0,g.getIcon20ArchiveOutline)().icon],[u.ConvoAction.UNARCHIVE,(0,m.getIcon20UnarchiveOutline)().icon],[u.ConvoAction.UNREAD,(0,p.getIcon20MessageUnreadTopOutline)().icon],[u.ConvoAction.PIN_CONVO,(0,v.getIcon20PinOutline)().icon],[u.ConvoAction.UNPIN_CONVO,(0,C.getIcon20PinSlashOutline)().icon],[u.ConvoAction.MUTE,(0,f.getIcon20MuteOutline)().icon],[u.ConvoAction.UNMUTE,(0,h.getIcon20VolumeOutline)().icon],[u.ConvoAction.LEAVE,(0,A.getIcon20Cancel)().icon],[u.ConvoAction.CLEAR,(0,I.getIcon20DeleteOutline)().icon],[u.ConvoAction.ENABLE_BUSINESS_NOTIFY,(0,E.getIcon20NotificationOutline)().icon],[u.ConvoAction.DISABLE_BUSINESS_NOTIFY,(0,S.getIcon20BlockOutline)().icon]].reduce(((e,[t,i])=>(e[t]=(0,o._)({},n[t],{icon:i}),e)),{})}function P(e,t){return(0,l.partConfigEnabled)("fav_dialog_with_yourself")&&e===t}function D(e,t){const n=(0,i.unpackStore)(e);return n.emptyScreenUserInfo&&n.emptyScreenUserInfo[t]}},49988:(e,t,n)=>{n.d(t,{parseMessage:()=>i});var o=n(610812);function i(e){return e&&Array.isArray(e)?(0,o.getMessageFromTuple)(e):e}},638871:(e,t,n)=>{n.d(t,{addFriend:()=>d,allowMessagesFromGroup:()=>C,archiveConversation:()=>h,banUser:()=>T,deleteFriend:()=>g,deleteReaction:()=>O,denyMessagesFromGroup:()=>v,forceCallFinish:()=>k,getByConversationMessageId:()=>E,getFriends:()=>u,getInfo:()=>r,getMembers:()=>l,getMessagesReactions:()=>L,getMutual:()=>m,getReactedPeers:()=>y,getUGCStickersInfo:()=>w,hideHelpHint:()=>b,hideSuggestedContact:()=>f,markAsListened:()=>N,markReactionsAsRead:()=>S,recogniseAudioMessage:()=>I,search:()=>_,sendMessageEvent:()=>c,sendReaction:()=>R,setInfo:()=>s,unarchiveConversation:()=>A,unbanUser:()=>M,usersGet:()=>p});var o=n(434788),i=n(599809),a=n(396316);function s(e,t){return(0,i.api)("account.setInfo",{name:e,value:t})}function r(){return(0,i.api)("account.getInfo",{})}function c(e){return(0,i.api)("messages.sendMessageEvent",e)}function u(e){return(0,i.api)("donut.getFriends",e)}function l(e){return(0,i.api)("groups.getMembers",e)}function _(e){return(0,i.api)("users.search",e)}function d(e){return(0,i.api)("friends.add",e)}function g(e){return(0,i.api)("friends.delete",e)}function m(e){return(0,i.api)("friends.getMutual",e)}function p(e){return(0,i.api)("users.get",e)}function v(e){return(0,i.api)("messages.denyMessagesFromGroup",e)}function C(e){return(0,i.api)("messages.allowMessagesFromGroup",e)}function f(e){return(0,i.api)("messages.hideSuggestedContact",e)}function h(e){return(0,i.api)("messages.archiveConversation",e)}function A(e){return(0,i.api)("messages.unarchiveConversation",e)}function I(e,t){return(0,i.api)("messages.recogniseAudioMessage",{message_id:e,audio_message_id:t})}function E(e,t,n){return(0,i.api)("messages.getByConversationMessageId",{conversation_message_ids:e.join(","),peer_id:t,group_id:n})}function S(e,t,n){return(0,i.api)("messages.markReactionsAsRead",{peer_id:t,group_id:n,cmids:e.join(",")})}function L(e,t,n){return(0,i.api)("messages.getMessagesReactions",{peer_id:e,cmids:t.join(","),group_id:n})}function N(e,t){return(0,i.api)("messages.markAsListened",{message_id:e,group_id:t})}function b(e){return(0,i.api)("account.hideHelpHint",{hint_id:e})}function T(e){return(0,i.api)("account.ban",{owner_id:e})}function M(e){return(0,i.api)("account.unban",{owner_id:e})}const k=e=>(0,i.api)("messages.forceCallFinish",{call_id:e}),R=(e,t,n,o)=>(0,i.api)("messages.sendReaction",{peer_id:e,reaction_id:n,group_id:o,cmid:t}),O=(e,t,n)=>(0,i.api)("messages.deleteReaction",{peer_id:e,group_id:n,cmid:t}),w=e=>(0,a.isUGCStickersEnabled)()?(0,i.api)("stickers.getUGCPackLists",{owner_ids:e}):Promise.resolve(),y=(e,t,n,a)=>(0,i.api)("messages.getReactedPeers",(0,o._)({peer_id:e,extended:1,fields:"photo_200, screen_name",group_id:t,cmid:n},a&&{reaction_id:a}))},415789:(e,t,n)=>{n.d(t,{showNotification:()=>i});var o=n(82161);function i({text:e,type:t,title:n,photo:i}){window.Notifier&&window.Notifier.showEvent({text:(0,o.clean)(e),type:t,title:n,author_photo:i})}},656448:(e,t,n)=>{n.d(t,{ConvoInviteEntryPoint:()=>o,collectChatCreateStats:()=>p,collectConversationSuggestionItemStats:()=>g,collectConvoInviteStats:()=>l,collectOnboardingFindFriendsClickStats:()=>d,collectOnboardingFindFriendsShowStats:()=>_,collectOpenMessageRequestStats:()=>m,collectVoiceStat:()=>v});var o,i=n(385376),a=n(338386),s=n(999110),r=n(68586),c=n(839470),u=n(578137);!function(e){e.DIALOG_ACTIONS="dialog_actions",e.PROFILE_SCREEN="profile_screen",e.CONTACT_SCREEN="contact_screen"}(o||(o={}));const l=(e,t)=>{(0,i.saveStatlogEvents)({name:"convo_invite",value:e,keys:[t]})},_=e=>{a.customMetricsCollector.logEvent({experiment_id:1285,service:"messages",metric_name:"open_vk_service_chat",metric_value:3,unit_id:e,unit_type_id:1})},d=e=>{a.customMetricsCollector.logEvent({experiment_id:1285,service:"messages",metric_name:"push_find_friends_button",metric_value:3,unit_id:e,unit_type_id:1})},g=(e,t,n)=>{r.ContactRecommendationCollector.logEvent({event_type:n,track_code:e,position:t})},m=e=>{s.messagingActionItemStatCollector.logEvent({peer_id:e,action_type:"OPEN_MR"})},p=(e,t,n)=>{(0,c.partConfigEnabled)("me_web_log_create_chat")&&s.messagingActionItemStatCollector.logEvent({peer_id:e,action_type:"CREATE_CHAT",entry_point:t,group_id:n})},v=(e,t,n,o,i,a)=>{u.audioMessageStatCollector.logEvent({action_type:e,peer_id:t,cmid:n,audio_message_id:o,action_source:"msg_list_attach",playback_rate:"play"===e?100:void 0,transcription_show:void 0!==i?i?1:0:void 0,actor:a})}},214472:(e,t,n)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="M11.6 3.5H8.4c-1.14 0-1.91 0-2.5.05-.58.05-.85.13-1.03.22a2.5 2.5 0 0 0-1.1 1.1c-.09.18-.17.45-.22 1.03-.05.59-.05 1.35-.05 2.5v3.2c0 1.14 0 1.91.05 2.5.05.58.13.85.22 1.04a2.5 2.5 0 0 0 1.1 1.09c.18.09.45.17 1.03.22.59.05 1.36.05 2.5.05h3.2c1.14 0 1.91 0 2.5-.05.58-.05.85-.13 1.04-.22a2.5 2.5 0 0 0 1.09-1.1c.09-.18.17-.45.22-1.03.05-.59.05-1.36.05-2.5V8.4c0-1.14 0-1.91-.05-2.5a2.72 2.72 0 0 0-.22-1.03 2.5 2.5 0 0 0-1.1-1.1c-.18-.09-.45-.17-1.03-.22-.59-.05-1.36-.05-2.5-.05Zm-9.16.68C2 5.04 2 6.16 2 8.4v3.2c0 2.24 0 3.36.44 4.22a4 4 0 0 0 1.74 1.74c.86.44 1.98.44 4.22.44h3.2c2.24 0 3.36 0 4.22-.44a4 4 0 0 0 1.74-1.74c.44-.86.44-1.98.44-4.22V8.4c0-2.24 0-3.36-.44-4.22a4 4 0 0 0-1.74-1.74C14.96 2 13.84 2 11.6 2H8.4c-2.24 0-3.36 0-4.22.44a4 4 0 0 0-1.74 1.74ZM10 6a.75.75 0 0 1 .75.75v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5A.75.75 0 0 1 10 6Z" clip-rule="evenodd"/></svg>',name:"add_square_outline_20"}}n.d(t,{getIcon20AddSquareOutline:()=>o})},746677:(e,t,n)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M7 10.75c0-.41.34-.75.75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75z"/><path clip-rule="evenodd" d="M14.58 2H5.42c-.53 0-.98 0-1.34.03-.38.03-.74.1-1.08.27-.52.26-.94.68-1.2 1.2-.17.34-.24.7-.27 1.08-.03.36-.03.8-.03 1.34v.42c.02.13.05.3.14.48a1.25 1.25 0 0 0 1.02.67L3 7.5v4.98c0 .81 0 1.47.04 2 .05.55.14 1.03.37 1.47.36.7.93 1.28 1.64 1.64.44.23.92.32 1.47.37.53.04 1.19.04 2 .04h2.96c.81 0 1.47 0 2-.04a3.84 3.84 0 0 0 1.47-.37c.7-.36 1.28-.93 1.64-1.64.23-.44.32-.92.37-1.47.04-.53.04-1.19.04-2V7.5h.34c.13-.02.3-.05.48-.14a1.25 1.25 0 0 0 .67-1.02l.01-.37v-.05c0-.53 0-.98-.03-1.34-.03-.38-.1-.74-.27-1.08A2.75 2.75 0 0 0 17 2.3a2.8 2.8 0 0 0-1.08-.27C15.56 2 15.12 2 14.58 2zm.92 5.5h-11v4.95c0 .85 0 1.45.04 1.9.04.46.1.72.2.92.22.42.57.77.99.98.2.1.46.17.91.21.46.04 1.06.04 1.91.04h2.9c.85 0 1.45 0 1.9-.04.46-.04.72-.1.92-.2.42-.22.77-.57.98-.99.1-.2.17-.46.21-.91.04-.46.04-1.06.04-1.91zM17 6v-.05c0-.57 0-.96-.02-1.25a1.36 1.36 0 0 0-.12-.52 1.25 1.25 0 0 0-.54-.54c-.1-.05-.23-.1-.52-.12-.3-.02-.68-.02-1.25-.02h-9.1c-.57 0-.96 0-1.25.02-.29.03-.43.07-.52.12-.23.12-.42.3-.54.54-.05.1-.1.23-.12.52C3 5 3 5.38 3 5.95V6z" fill-rule="evenodd"/></g></svg>',name:"archive_outline_20"}}n.d(t,{getIcon20ArchiveOutline:()=>o})},301522:(e,t,n)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17Zm4.4-3.05a7 7 0 0 1-9.84-9.84l9.83 9.84Zm1.05-1.06L5.61 4.55a7 7 0 0 1 9.84 9.84Z" fill="currentColor"/></svg>',name:"block_outline_20"}}n.d(t,{getIcon20BlockOutline:()=>o})},579739:(e,t,n)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.84 4H2.75a.75.75 0 0 0 0 1.5h.55l.9 9.25c.05.52.1.96.16 1.31.06.37.16.71.35 1.03a2.9 2.9 0 0 0 1.25 1.13c.33.16.68.22 1.06.25.36.03.8.03 1.32.03h3.32c.53 0 .96 0 1.32-.03.38-.03.73-.1 1.06-.25a2.9 2.9 0 0 0 1.25-1.13c.19-.32.29-.66.35-1.03.06-.35.1-.79.16-1.31l.9-9.25h.55a.75.75 0 0 0 0-1.5h-4.09a3.25 3.25 0 0 0-6.32 0Zm1.58 0h3.16a1.75 1.75 0 0 0-3.16 0Zm6.78 1.5H4.8l.9 9.07c.05.56.08.94.13 1.23.05.28.1.42.17.52a1.4 1.4 0 0 0 .6.55c.1.04.25.08.53.1.3.03.68.03 1.24.03h3.26c.56 0 .94 0 1.23-.02.29-.03.43-.07.54-.11a1.4 1.4 0 0 0 .6-.55c.06-.1.11-.24.16-.52.05-.3.1-.67.15-1.23l.89-9.07Zm-2.89 2a.75.75 0 0 1 .69.81l-.5 6a.75.75 0 0 1-1.5-.12l.5-6a.75.75 0 0 1 .81-.69Zm-4.62 0a.75.75 0 0 1 .8.69l.5 6a.75.75 0 0 1-1.49.13l-.5-6a.75.75 0 0 1 .69-.82Z" clip-rule="evenodd"/></svg>',name:"delete_outline_20"}}n.d(t,{getIcon20DeleteOutline:()=>o})},491188:(e,t,n)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M3.5 10c0-3.21 2.87-6 6.75-6 .42 0 .8-.3.8-.75.01-.44-.38-.75-.8-.75C5.68 2.5 2 5.83 2 10a7 7 0 0 0 1.26 4c-.1.6-.47 1.52-1.12 2.73a1.2 1.2 0 0 0 1.1 1.77c1.9-.06 3.35-.51 4.35-1.4.85.27 1.74.4 2.66.4 4.57 0 8.25-3.33 8.25-7.5 0-.36-.03-.72-.08-1.07a.75.75 0 0 0-1.49.23c.05.28.07.56.07.84 0 3.21-2.87 6-6.75 6a7.58 7.58 0 0 1-2.22-.33l-.4-.12a.75.75 0 0 0-.72.15l-.31.28c-.57.5-1.48.88-2.9 1 .53-1.05.9-1.98 1.04-2.71l.05-.3a.75.75 0 0 0-.12-.57l-.17-.25a5.51 5.51 0 0 1-1-3.15ZM17 5.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z"/></svg>',name:"message_unread_top_outline_20"}}n.d(t,{getIcon20MessageUnreadTopOutline:()=>o})},137779:(e,t,n)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M4.89 3.55c.29-.29.76-.29 1.06 0L16.1 13.72a.75.75 0 0 1-1.06 1.06L13 12.73v2.53c0 .83-.7 1.4-1.46 1.4-.63 0-1.25-.23-1.72-.66L6.3 12.72h-1.5c-.94 0-1.79-.71-1.79-1.7V8.98c0-1 .85-1.71 1.78-1.71h1.5l.66-.6L4.9 4.6a.75.75 0 0 1 0-1.06zM8 7.74l-.92.84a.75.75 0 0 1-.5.2h-1.8c-.1 0-.18.03-.23.08a.17.17 0 0 0-.06.13V11c0 .04.02.09.06.13.05.05.13.08.22.08h1.8c.2 0 .37.07.51.2l3.75 3.48c.17.16.4.26.66.27v-3.94zm3.53-4.4c.75 0 1.46.57 1.46 1.4v1.94a.75.75 0 0 1-1.5 0V4.83c-.26.01-.49.11-.66.27l-.1.1A.75.75 0 0 1 9.7 4.1l.11-.1a2.53 2.53 0 0 1 1.72-.67z" fill="currentColor"/></svg>',name:"mute_outline_20"}}n.d(t,{getIcon20MuteOutline:()=>o})},636274:(e,t,n)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 8a4.5 4.5 0 0 1 9 0v1.67c0 .3.1.58.3.8l1.52 1.8a.75.75 0 0 1-.57 1.23H4.25a.75.75 0 0 1-.57-1.24l1.52-1.78c.2-.23.3-.52.3-.81V8zm-1.49-.39A6 6 0 0 1 16 7.75v1.82l1.46 1.72c1.25 1.46.21 3.71-1.7 3.71h-2.08a3.75 3.75 0 0 1-7.35 0H4.25a2.25 2.25 0 0 1-1.71-3.7L4 9.56V7.75l.01-.14zM10 16.5c-.98 0-1.81-.63-2.12-1.5h4.24c-.3.87-1.14 1.5-2.12 1.5z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"notification_outline_20"}}n.d(t,{getIcon20NotificationOutline:()=>o})},947092:(e,t,n)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="pin_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="pin_outline_20__Icons-20/pin_outline_20"><g id="pin_outline_20__pin_outline_20"><path d="M0 0h20v20H0z"/><path d="M11.33 2.6a.75.75 0 0 1 1.27-.38l5.18 5.18a.75.75 0 0 1-.38 1.27l-1.54.3a.3.3 0 0 0-.15.09l-2.47 2.46a.3.3 0 0 0-.08.19l-.3 3.86a1.01 1.01 0 0 1-1.72.63L8 13.07l-4.72 4.71a.75.75 0 0 1-1.13-.98l.07-.08L6.93 12 3.8 8.87c-.37-.37-.4-.94-.09-1.34l.09-.1c.17-.17.4-.27.63-.29l3.86-.3a.3.3 0 0 0 .19-.08l2.46-2.46a.3.3 0 0 0 .08-.16Zm1.2 1.67-.03.17a1.8 1.8 0 0 1-.5.92L9.54 7.82c-.3.3-.7.49-1.13.52l-2.8.22 5.83 5.83.22-2.8c.03-.37.17-.73.41-1.01l.11-.12L14.64 8c.26-.25.58-.42.92-.5l.17-.03-3.2-3.2Z" id="pin_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"pin_outline_20"}}n.d(t,{getIcon20PinOutline:()=>o})},703689:(e,t,n)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M17.96 8.15a.75.75 0 0 1-.57.52l-1.56.31a.25.25 0 0 0-.14.08c-.22.24-.45.47-.69.7a.75.75 0 0 1-1.06-1.06l.65-.66c.25-.27.58-.45.94-.53l.2-.04-3.2-3.2-.04.19c-.07.34-.23.65-.48.9l-.7.7A.75.75 0 0 1 10.23 5l.7-.7a.25.25 0 0 0 .08-.13l.3-1.56a.75.75 0 0 1 1.27-.39l5.19 5.18c.2.2.26.49.18.75zM8 13.06l3.14 3.14c.6.61 1.61.23 1.71-.58.09-.84.13-1.68.2-2.51l1.67 1.67a.75.75 0 1 0 1.06-1.06l-9.5-9.5a.75.75 0 1 0-1.06 1.06l1.67 1.67c-.85.07-1.72.08-2.56.2a1.01 1.01 0 0 0-.53 1.72L6.94 12l-4.8 4.8a.75.75 0 0 0 1.14.98zm3.44 1.33.21-2.68-3.37-3.37-2.67.22z"/></g></svg>',name:"pin_slash_outline_20"}}n.d(t,{getIcon20PinSlashOutline:()=>o})},574714:(e,t,n)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="m10.75 11.56.97.97a.75.75 0 1 0 1.06-1.06l-2.25-2.25a.75.75 0 0 0-1.06 0l-2.25 2.25a.75.75 0 1 0 1.06 1.06l.97-.97v2.69a.75.75 0 0 0 1.5 0z"/><path clip-rule="evenodd" d="M14.58 2H5.42c-.53 0-.98 0-1.34.03-.38.03-.74.1-1.08.27-.52.26-.94.68-1.2 1.2-.17.34-.24.7-.27 1.08-.03.36-.03.8-.03 1.34v.42c.02.13.05.3.14.48a1.25 1.25 0 0 0 1.02.67L3 7.5v4.98c0 .81 0 1.47.04 2 .05.55.14 1.03.37 1.47.36.7.93 1.28 1.64 1.64.44.23.92.32 1.47.37.53.04 1.19.04 2 .04h2.96c.81 0 1.47 0 2-.04a3.84 3.84 0 0 0 1.47-.37c.7-.36 1.28-.93 1.64-1.64.23-.44.32-.92.37-1.47.04-.53.04-1.19.04-2V7.5h.34c.13-.02.3-.05.48-.14a1.25 1.25 0 0 0 .67-1.02l.01-.37v-.05c0-.53 0-.98-.03-1.34-.03-.38-.1-.74-.27-1.08A2.75 2.75 0 0 0 17 2.3a2.8 2.8 0 0 0-1.08-.27C15.56 2 15.12 2 14.58 2zm.92 5.5h-11v4.95c0 .85 0 1.45.04 1.9.04.46.1.72.2.92.22.42.57.77.99.98.2.1.46.17.91.21.46.04 1.06.04 1.91.04h2.9c.85 0 1.45 0 1.9-.04.46-.04.72-.1.92-.2.42-.22.77-.57.98-.99.1-.2.17-.46.21-.91.04-.46.04-1.06.04-1.91zM17 6v-.05c0-.57 0-.96-.02-1.25a1.36 1.36 0 0 0-.12-.52 1.25 1.25 0 0 0-.54-.54c-.1-.05-.23-.1-.52-.12-.3-.02-.68-.02-1.25-.02h-9.1c-.57 0-.96 0-1.25.02-.29.03-.43.07-.52.12-.23.12-.42.3-.54.54-.05.1-.1.23-.12.52C3 5 3 5.38 3 5.95V6z" fill-rule="evenodd"/></g></svg>',name:"unarchive_outline_20"}}n.d(t,{getIcon20UnarchiveOutline:()=>o})},329082:(e,t,n)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M11.54 3.33c.75 0 1.46.58 1.46 1.41v10.52c0 .83-.7 1.4-1.46 1.4-.63 0-1.25-.23-1.72-.66L6.3 12.72h-1.5c-.94 0-1.79-.71-1.79-1.7V8.98c0-1 .85-1.71 1.78-1.71h1.5L9.83 4a2.53 2.53 0 0 1 1.72-.67zm-.04 1.5c-.26.01-.49.11-.66.27L7.1 8.58a.75.75 0 0 1-.5.2h-1.8c-.12 0-.29.07-.29.2v2.03c0 .14.17.21.28.21h1.8c.2 0 .37.07.51.2l3.75 3.48c.17.16.4.26.66.27zm6.12.4A6.76 6.76 0 0 1 19.67 10c0 1.84-.79 3.5-2.05 4.78a.75.75 0 1 1-1.07-1.06A5.26 5.26 0 0 0 18.17 10c0-1.4-.6-2.7-1.62-3.72a.75.75 0 1 1 1.07-1.06zm-2.13 2.54c.52.61.84 1.38.84 2.23 0 .85-.32 1.62-.84 2.23a.75.75 0 0 1-1.15-.96c.32-.38.5-.82.5-1.27 0-.45-.18-.89-.5-1.27a.75.75 0 0 1 1.15-.96z" fill="currentColor"/></svg>',name:"volume_outline_20"}}n.d(t,{getIcon20VolumeOutline:()=>o})},571039:(e,t,n)=>{n.d(t,{wrapAway:()=>s,wrapAwayIfExternal:()=>a});var o=n(404145);const i=new RegExp(`^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${o.VK_SITE_REGEX_SOURCE_UNSAFE}(\\/.*)?`);function a(e,t=!1){return function(e){const t=decodeURIComponent(e);return/^\/[^/]/.test(t)||i.test(t)}(e)?e:s(e,t)}function s(e,t){return"/away.php?to="+encodeURIComponent(decodeURIComponent(e))+(t?"&utf=1":"")}},12402:(e,t,n)=>{n.d(t,{BUTTON_TYPE_OPEN_LINK:()=>b,BUTTON_TYPE_OPEN_MODAL_VIEW:()=>T,CALLBACK_TIMEOUT_MS:()=>G,getActionObjectFromElement:()=>j,getAttributesFromActionObject:()=>W,getButtonAppearance:()=>V,getButtonLabel:()=>Y,handleButtonClick:()=>x,handleCallbackAction:()=>B,handleOpenApp:()=>U,handleOpenLink:()=>y,handleShowSnackbar:()=>F,sendLocationFromKeyboard:()=>z});var o=n(82161),i=n(29271),a=n(659397),s=n(95432),r=n(514986),c=n(571039),u=n(638871),l=n(300069),_=n(408014),d=n(415789),g=n(755320),m=n(502478),p=n(823826),v=n(656448),C=n(552666),f=n(375353),h=n(77520),A=n(931917);const I=7131443,E="text",S="vkpay",L="location",N="open_app",b="open_link",T="open_modal_view",M="callback",k="default",R="secondary",O="primary",w=["app-id","owner-id","type","payload","hash","label","link"];function y(e,t){const n=new URL(e);if(!!n.hostname.match(h.OUR_DOMAINS))return void window.open(e);const o=new r.MessageBox;o.setOptions({title:i.getLang("mail_callback_popup_title"),bodyStyle:"overflow: hidden; text-overflow: ellipsis;"});const a=i.getLang("mail_callback_popup_text").replace("{name}",t).replace("{domain}",n.hostname);o.content(a),o.addButton(i.getLang("box_cancel"),!1,"no"),o.addButton(i.getLang("global_open"),(()=>{window.open((0,c.wrapAwayIfExternal)(e,!0)),o.hide()})),o.show()}function U({type:e,appId:t,ownerId:n,hash:o,appHash:i}){const a=e===S?I:t,r=n?"_"+n:"",c=o?encodeURIComponent("#"+o):"";(0,s.showWiki)({w:"app"+a+r+c,from_keyboard:1,app_hash:i})}function F({peerId:e,ownerId:t,text:n,store:o}){const i=(0,_.getTab)(o,e),a=(0,p.oCacheGet)(o,t),s=A.Ranges.isChatOrChannelPeer(e)&&a?a.photo:void 0;(0,d.showNotification)({text:n,title:i.name,photo:s})}const P=["open_link","open_modal_view","open_app"],D=2e3;function H(e){const t=setTimeout((()=>e.set(l.unsetActionCallbackTimeout)),D);e.set((e=>(0,l.setActionCallbackTimeout)(t,e)))}function B(e,t){const{action:n}=e,o=(0,m.getPeer)(t)===e.peer_id;if(!n||!o)return;if(!(P.includes(e.action.type)&&(0,m.getActionCallbackTimeout)(t)))switch(e.action.type){case"open_link":case"open_modal_view":!function({peerId:e,store:t,link:n}){y(n,(0,_.getTab)(t,e).name)}({peerId:e.peer_id,link:n.link,store:t}),H(t);break;case"open_app":U({type:n.type,appId:n.app_id,ownerId:n.owner_id,hash:n.hash,appHash:(0,m.getKeyboardAppHash)(t)}),H(t);break;case"show_snackbar":F({peerId:e.peer_id,ownerId:e.owner_id,text:n.text,title:n.title,store:t});break;default:return}}const G=6e4;function x(e,t,n,o){const{app_id:i,owner_id:a,type:s,payload:r,hash:c="",link:l=""}=e,{keyboardAuthorId:_}=o,d=(0,m.getKeyboardAppHash)(n);switch(s){case b:(0,m.getPeer)(n)===f.VK_OFFICIAL_PEER_ID&&(0,g.isOnboardingFindFriendsLink)(l)&&(0,v.collectOnboardingFindFriendsClickStats)((0,C.unpackStore)(n).viewer_id);break;case S:case N:U({type:s,appId:i,ownerId:a,hash:c,appHash:d});break;case L:z((e=>t({keyboardAuthorId:_,action:{label:"",attaches:[e],payload:r}})));break;case E:t({action:e,appHash:d,keyboardAuthorId:_});break;case M:var p,h;const{message:A,peerId:I,onBeforeSend:T=(()=>{}),onSendSuccess:k=(()=>{}),onSendFail:R=(()=>{})}=o;T(),(0,u.sendMessageEvent)({author_id:_,conversation_message_id:null==(p=A)?void 0:p.chat_local_id,message_id:null==(h=A)?void 0:h.messageId,peer_id:I,payload:e.payload}).then(k,R);break;default:e.payload=JSON.stringify({command:"not_supported_button",button_type:s,payload:e.payload}),t({action:e,appHash:d,keyboardAuthorId:_})}}function V(e){return K(e)?O:e.color.toLowerCase().replace(k,R)}function Y(e){const{type:t,label:n}=e.action;return t===L?i.getLang("mail_keyboard_label_location"):K(e)?i.getLang("mail_keyboard_label_vkpay").replace(/ VK Pay$/,""):function(e){let t=e;return t=(0,a.decodeHTMLEntities)(t||""),t=(0,o.clean)(t).replace(/\n(\r)?/gi," "),t=Emoji.emojiToHTML(t,!0),t}(n)}function K(e){const{type:t,app_id:n}=e.action;return t===S||t===N&&n===I}function j(e){return w.reduce(((t,n)=>(t[n.replace("-","_")]=e.getAttribute("data-"+n)||void 0,t)),{})}function W(e,t){let n=Object.entries(e).reduce(((e,[t,n])=>e+` data-${t.replace("_","-")}="${(0,o.clean)(""+n)}"`),"");if(e.type===b||e.type===T){n+=` href="${(0,c.wrapAwayIfExternal)(encodeURI(e.link),!0)}" target="_blank" rel="nofollow noopener"`}return n+=` data-index="${t}"`,n}function z(e){cur.sendLocation=function(t,n){n(),e(t)},(0,r.showBox)("al_places.php",{act:"a_choose_place_box",from_keyboard:1},{stat:["places.css","map.css","maps.js","ui_controls.css","ui_controls.js","boxes.css"],width:640,bodyStyle:"padding: 0px;"})}},945263:(e,t,n)=>{n.d(t,{statlogsProbValueEvent:()=>s,statlogsValueEvent:()=>a});var o=n(839470),i=n(504867);function a(e,t,n,o,a){return(0,i.statlogsValueEvent)(e,t,n,o,a)}function s(e,t,n,i,s,r){(0,o.randEnabled)(e)&&a(t,n,i,s,r)}}}]);try{stManager.done("dist/a918e42b562c61bc8dc1b99eb767e4c2.7643ef8cbb23a4903276.js")}catch(e){}